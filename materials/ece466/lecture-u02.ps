%!PS-Adobe-3.0
%%Creator: groff version 1.22.2
%%CreationDate: Wed Jan 30 20:25:23 2019
%%DocumentNeededResources: font Symbol
%%+ font Times-Roman
%%+ font Times-Bold
%%+ font Courier
%%+ font Times-Italic
%%DocumentSuppliedResources: file valtree2.eps
%%+ file valtree.eps
%%+ file g2.eps
%%+ file nonambig.eps
%%+ file ambig.eps
%%+ file parsetree.eps
%%+ procset grops 1.22 2
%%+ font Symbol-Slanted
%%Pages: 34
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.22 2
%!PS-Adobe-3.0 Resource-ProcSet
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
DEFS/BPhook known{DEFS begin BPhook end}if
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/Fr{
setrgbcolor fill
}bind def
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
/Fg{
setgray fill
}bind def
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne
2 index/UniqueID ne
and
{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
/setpagedevice{}def
mark
}bind def
/PEND{
cleartomark
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%EndProlog
%%BeginSetup
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Symbol
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Bold
%%IncludeResource: font Courier
%%IncludeResource: font Times-Italic
%%BeginResource: font Symbol-Slanted
%!PS-Adobe-3.0 Resource-Font
%%DocumentNeededResources: font Symbol
%%EndComments
/MakeTransformedFont{
findfont dup maxlength dict begin
{
exch dup dup/FID ne exch/UniqueID ne and{
exch def
}{
pop pop
}ifelse
}forall
/FontBBox
currentdict/FontBBox get
4 array copy def
FontBBox aload pop
4 index transform 4 2 roll
4 index transform 4 2 roll
FontBBox astore pop
FontMatrix exch matrix concatmatrix
/FontMatrix exch def
dup/FontName exch def
currentdict end
definefont pop
}bind def
/Symbol-Slanted
[.89 0.0 15.5 dup sin exch cos div .89 0.0 0.0]
/Symbol
MakeTransformedFont
%%EndResource
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Courier@0 ENC0/Courier RE
/Times-Bold@0 ENC0/Times-Bold RE/Times-Roman@0 ENC0/Times-Roman RE
%%EndSetup
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 122.742(ECE466:Compilers Unit)69.336 60 R(2/pg 1)
2.25 E(\2512019 Jef)126.405 E 2.25(fH)-.225 G(akner)-2.25 E/F1 13
/Times-Bold@0 SF -.13(Pa)211.93 120 S(rsing -- Ov).13 E(er)-.13 E(view)
-.13 E/F2 13/Times-Roman@0 SF 1.157
(The second phase of front-end analysis is)33.336 156 R F1(parsing)4.407
E F2 7.657(.I)C 4.407(ti)-7.657 G 4.407(st)-4.407 G 1.157
(he parser which is the dri)-4.407 F(ving)-.325 E 1.118
(force of the front-end, requesting and consuming tok)33.336 171 R 1.118
(ens from the le)-.13 F -.195(xe)-.195 G 2.158 -.52(r, a).195 H 1.118
(nd performing).52 F 2.718(semantic analysis and intermediate code gene\
ration via embedded actions, which are)33.336 186 R
(triggered as parts of the input are recognized in the frame)33.336 201
Q -.13(wo)-.325 G(rk of the de\214ned language.).13 E 4.096(While le)
33.336 222 R 4.096(xical rules are one-dimensional, the rules of syntax\
 analysis form a tw)-.195 F(o-)-.13 E .956
(dimensional tree of syntax relationships.)33.336 237 R .955
(The rules which the parser follo)7.456 F .955(ws in b)-.325 F(uilding)
-.26 E .654(this tree form a)33.336 252 R F1(grammar)3.904 E F2 7.154
(.B)C 3.904(yw)-7.154 G .654(ay of e)-4.034 F .655
(xample, here is a simple grammar for arithmetic)-.195 F -.195(ex)33.336
267 S(pressions:).195 E/F3 10/Courier@0 SF(/* Grammar 1 */)33.336 279 Q
21.6(expr: IDENT)33.336 291 R(|NUM)90.936 303 Q 6(|')90.936 315 S
(\(' expr '\)')-6 E 6(|e)90.936 327 S(xpr '+' expr)-6 E 6(|e)90.936 339
S(xpr '-' expr)-6 E 6(|e)90.936 351 S(xpr '*' expr)-6 E 6(|e)90.936 363
S(xpr '/' expr)-6 E(;)90.936 375 Q F2 1.383
(Grammars are traditionally written in)33.336 396 R F1 1.383
(Backus Naur F)4.633 F 1.383(orm \(BNF\))-.325 F F2 4.632(,a)C 1.382
(nd man)-4.632 F 4.632(yt)-.195 G -.195(ex)-4.632 G(tbooks).195 E 2.161
(use arro)33.336 411 R 2.161
(ws, greek letters and other symbols which aren')-.325 F 5.411(tr)-.234
G 2.161(eadily found on the typical)-5.411 F -.13(ke)33.336 426 S 5.784
(yboard. In)-.065 F 2.533
(these notes, we will adhere to the format used by the parser generator)
5.784 F -.65 -1.56(YA C)33.336 441 T 7.083(C\()1.56 G -1.3(Ye)-7.083 G
7.083(tA)1.3 G 3.834
(nother Compiler Compiler\) and the open-source, compatible program)
-7.083 F(Bison.)33.336 456 Q 1.3(In the e)33.336 477 R 1.299(xample abo)
-.195 F -.195(ve)-.195 G(,).195 E/F4 13/Courier@0 SF(expr)4.549 E F2
1.299(is an e)4.549 F 1.299(xample of a)-.195 F F1(non-terminal)4.549 E
F2 4.549(symbol. The)4.549 F 1.299(name of a)4.549 F .713
(non-terminal, at the be)33.336 492 R .713
(ginning of the line and follo)-.195 F .714
(wed by a :, indicates the start of rules)-.325 F 1.045
(listing all of the possible w)33.336 507 R 1.045
(ays of forming that non-terminal.)-.13 F 1.044
(The choices \(if more than)7.544 F .097(one\) are delimited by the | c\
haracter and terminated by the semicolon.)33.336 522 R .097
(It is also permitted)6.597 F 1.7(to ha)33.336 537 R 2.09 -.195(ve m)
-.26 H 1.699(ultiple rules for the same non-terminal and this is equi)
.195 F -.325(va)-.325 G 1.699(lent to ha).325 F 1.699(ving them)-.26 F
.285(joined with the | character)33.336 552 R 6.785(.S)-.715 G
(tylistically)-6.785 E 3.535(,w)-.845 G 3.535(el)-3.535 G .285
(ine up the v)-3.535 F .285(ertical bars and the semicolon as)-.195 F
(sho)33.336 567 Q 1.087(wn abo)-.325 F -.195(ve)-.195 G 7.587(.F).195 G
1.087
(urthermore, one \(and only one\) of the choices can be nothing, i.e.)
-7.587 F/F5 13/Symbol-Slanted SF(e)4.336 E F2(the)4.336 E(empty string.)
33.336 582 Q
(This is often used for parts of the language which are optional.)6.5 E
1.032(It is con)33.336 603 R -.195(ve)-.52 G 1.032
(ntional to use all UPPERCASE for).195 F F1(terminal)4.283 E F2 1.033
(symbols \(a terminal is the same)4.283 F 1.482(thing as a tok)33.336
618 R 4.732(en\). Because)-.13 F(Bison/Y)4.732 E -.52(AC)-1.56 G 4.732
(Cu).52 G 1.482(ses inte)-4.732 F 1.482
(gers to represent terminals internally)-.195 F(,)-.845 E 1.113(and bec\
ause it starts assigning symbolic terminal names at 257, we can also us\
e single-)33.336 633 R 2.444(quoted characters directly as terminals, a\
ssuming of course that the le)33.336 648 R -.195(xe)-.195 G 5.694(rf)
.195 G(ollo)-5.694 E 2.444(ws the)-.325 F(same con)33.336 663 Q -.195
(ve)-.52 G(ntion.).195 E .552(Each possible e)33.336 684 R .552
(xpansion of a non-terminal is called a)-.195 F F1(pr)3.802 E(oduction)
-.234 E F2 7.052(.F)C .552(or our purposes, the)-7.247 F 1.502
(terms rule and production are equi)33.336 699 R -.325(va)-.325 G 4.752
(lent. W).325 F 4.752(ec)-1.04 G 1.501(an see that a production must ha)
-4.752 F 1.891 -.195(ve o)-.26 H(ne).195 E 1.407
(non-terminal as the left-hand side, and can ha)33.336 714 R 1.797 -.195
(ve a r)-.26 H 1.407(ight-hand side that contains zero or).195 F
(more terminals OR non-terminals.)33.336 729 Q 0 Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 140.742(ECE466:Compilers Unit)33.336 60 R(2/pg 2)
2.25 E(\2512019 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25 E/F1 13
/Times-Bold@0 SF(Grammars vs Regular Expr)170.499 120 Q(essions)-.234 E
/F2 13/Times-Roman@0 SF 1.594
(There is a certain similarity between grammar rules and the le)33.336
156 R 1.594(xical rules, e)-.195 F 1.594(xpressed as)-.195 F(Re)33.336
171 Q .293(gular Expressions, which we sa)-.195 F 3.544(wi)-.195 G 3.544
(nU)-3.544 G .294(nit 1.)-3.544 F .294(The dif)6.794 F .294
(ference is that the productions of a)-.325 F .692(non-terminal may con\
tain other non-terminals, including direct \(same non-terminal is on)
33.336 186 R .003(both sides of the rule\) or indirect \(right-hand-sid\
e symbol is ultimately de\214ned in terms of)33.336 201 R 3.666
(left-hand-side\) recursion.)33.336 216 R 3.666(This is what gi)10.166 F
-.195(ve)-.325 G 6.916(st).195 G 3.666
(he grammar a 2-dimensional feel, as)-6.916 F(opposed to the linear w)
33.336 231 Q(orld of re)-.13 E(gular e)-.195 E(xpressions.)-.195 E(Ob)
33.336 252 Q(viously)-.195 E 3.293(,s)-.845 G .043
(ince the entire input stream of the program must pass through le)-3.293
F .043(xical analysis)-.195 F .147(\214rst, the re)33.336 267 R .147
(gular e)-.195 F .147(xpressions which comprise the le)-.195 F .147
(xical rules can describe an)-.195 F 3.397(yv)-.195 G .147(alid input)
-3.722 F 4.067(stream. Ho)33.336 282 R(we)-.325 E -.195(ve)-.325 G 1.857
-.52(r, t).195 H(he).52 E 4.067(yw)-.195 G .817(ill also)-4.067 F/F3 13
/Times-Italic@0 SF(accept)4.067 E F2 .817(as v)4.067 F .817
(alid input streams which are not syntatically)-.325 F -.325(va)33.336
297 S 4.146(lid. A).325 F .895(classic e)4.146 F .895
(xample is being able to count and balance pairs of nested parentheses.)
-.195 F(There is no re)33.336 312 Q(gular e)-.195 E
(xpression which can check this and reject unbalanced streams.)-.195 E
2.01(Therefore, we say that grammars are more e)33.336 333 R(xpressi)
-.195 E -.195(ve)-.325 G 5.261(,o).195 G 5.261(rm)-5.261 G 2.011(ore po)
-5.261 F 2.011(werful, than re)-.325 F(gular)-.195 E -.195(ex)33.336 348
S 4.694(pressions. One).195 F 1.444(might then ask wh)4.694 F 4.694(yi)
-.065 G 4.694(ti)-4.694 G 4.694(sp)-4.694 G 1.444
(rudent to bother with RE at all?)-4.694 F(Wh)7.943 E 4.693(yn)-.065 G
(ot)-4.693 E .709(simply describe the le)33.336 363 R .709
(xical rules \(which, after all, are often called the)-.195 F F1(micr)
3.96 E(o-syntax)-.234 E F2 .71(of a)3.96 F 1.472
(language\) directly in the grammar)33.336 378 R 4.722(,f)-.52 G 1.472
(or in f)-4.722 F 1.472(act, the C language standard does this?)-.13 F
(The)7.971 E 4.275
(answer is that doing so in an actual production compiler w)33.336 393 R
4.275(ould mak)-.13 F 7.525(et)-.13 G 4.275(he parser)-7.525 F 3.18
(unbearably lar)33.336 408 R 3.18(ge, a)-.234 F(wkw)-.195 E 3.18
(ard and inef)-.13 F 6.43(\214cient. As)-.325 F 3.179
(we shall see, the more po)6.43 F 3.179(werful the)-.325 F 1.226
(method of e)33.336 423 R 1.226(xpression, the less ef)-.195 F 1.227
(\214cient and more unwieldy is the recognizer for it.)-.325 F -1.04(We)
7.727 G .704(are much better of)33.336 438 R 3.954(fu)-.325 G .704
(sing a more limited method \(re)-3.954 F .704(gular e)-.195 F .704
(xpressions\) to g)-.195 F .704(ain maximum)-.065 F 2.779(performance f\
or that part of the compiler which must react to each and e)33.336 453 R
-.195(ve)-.325 G 2.78(ry input).195 F(character)33.336 468 Q(.)-.715 E
F1(Leftmost and Rightmost deri)167.262 498 Q -.13(va)-.13 G(tions).13 E
F2(Ev)33.336 534 Q 1.531(ery grammar has a particular)-.195 F F1 1.531
(start symbol)4.781 F F2 1.531(which represents the entire language.)
4.781 F(In)8.03 E 2.411(the e)33.336 549 R 2.411(xample abo)-.195 F
-.195(ve)-.195 G 5.661(,t).195 G 2.411(he start symbol is)-5.661 F/F4 13
/Courier@0 SF(expr)5.661 E F2 8.912(.W)C 5.662(ec)-9.952 G(an)-5.662 E
F1(deri)5.662 E -.13(ve)-.13 G F2(an)5.792 E 5.662(yv)-.195 G 2.412
(alid sequence of)-5.987 F 3.539
(symbols \(or "sentence"\) from the start symbol by progressi)33.336 564
R -.195(ve)-.325 G 3.538(ly replacing an).195 F 6.788(yn)-.195 G(on-)
-6.788 E 1.508(terminals by their appropriate productions until only th\
e terminals remain.)33.336 579 R 1.508(If the input)8.008 F(sequence is)
33.336 594 Q F4(a+\(b-c\))3.25 E F2 3.25(,o)C
(ne possible sequence of deri)-3.25 E -.325(va)-.325 G(tion is:).325 E
/F5 8/Courier@0 SF 1.2(expr)33.936 606 S 1.2(expr + expr)33.936 618 S
1.2(IDENT + expr)33.936 630 S 1.2(IDENT + \( expr \))33.936 642 S 1.2
(IDENT + \( expr - expr \))33.936 654 S 1.2(IDENT + \( IDENT - expr \))
33.936 666 S 1.2(IDENT + \( IDENT - IDENT \))33.936 678 S F2 .278
(In this deri)33.336 699 R -.325(va)-.325 G .278
(tion, the leftmost non-terminal w).325 F .278(as e)-.13 F .278
(xpanded at each step.)-.195 F .277(This is kno)6.777 F .277(wn as)-.325
F(the)33.336 714 Q F1(leftmost deri)3.25 E -.13(va)-.13 G(tion).13 E F2
6.5(.W)C 3.25(ec)-7.54 G(ould ha)-3.25 E .39 -.195(ve a)-.26 H(lso e)
.195 E(xpanded the rightmost non-terminal:)-.195 E F5 1.2(expr)33.936
726 S 1.2(expr + expr)33.936 738 S 0 Cg EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 140.742(ECE466:Compilers Unit)33.336 60 R(2/pg 3)
2.25 E(\2512019 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25 E/F1 8
/Courier@0 SF 1.2(expr + \( expr \))33.936 117 S 1.2
(expr + \( expr - expr\))33.936 129 S 1.2(expr + \( expr - IDENT\))
33.936 141 S 1.2(expr + \( IDENT - IDENT\))33.936 153 S 1.2
(IDENT + \(IDENT - IDENT\))33.936 165 S/F2 13/Times-Roman@0 SF 6.199
-1.04(We s)33.336 186 T 4.119(ay that each of the abo)1.04 F 4.509 -.195
(ve s)-.195 H 4.119(teps is a).195 F/F3 13/Times-Bold@0 SF 4.119
(sentential f)7.369 F(orm)-.325 E F2 4.12(of the input sentence.)7.37 F
1.309(De\214nition: a sequence of symbols \(terminals or non-terminals\
\) is a sentential form if it)33.336 201 R 1.331
(can be generated by some e)33.336 216 R 1.331
(xpansion of the start symbol, and if by further e)-.195 F 1.332
(xpansion it)-.195 F(will yield a v)33.336 231 Q
(alid sentence of terminals.)-.325 E 3.773(At)33.336 252 S .523
(ree which represents a partial or complete deri)-3.773 F -.325(va)-.325
G .523(tion is kno).325 F .522(wn as a)-.325 F F3 -.13(Pa)3.772 G .522
(rse T).13 F -.234(re)-.962 G(e).234 E F2 7.022(.E)C(ach)-7.022 E .895
(node of the parse tree represents a symbol, and the edges leading do)
33.336 267 R .896(wn from an interior)-.325 F .782
(node represent the right-hand-side symbols of a rule deri)33.336 282 R
.782(ving that node.)-.325 F .782(The reader will)7.282 F(observ)33.336
297 Q 4.265(et)-.195 G 1.016
(hat in reading the tree from left to right across the bottom frontier)
-4.265 F 4.266(,as)-.52 G(entential)-4.266 E(form is al)33.336 312 Q
-.13(wa)-.13 G(ys seen.).13 E(The \214nal parse tree for the e)6.5 E
(xample abo)-.195 E .39 -.195(ve i)-.195 H(s:).195 E 0 0 230 230 -179
179 152.336 512 PBEGIN
%%BeginDocument: parsetree.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: parsetree.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Wed Sep 17 01:36:40 2008
%%For: hak@lex ()
%%BoundingBox: 0 0 230 179
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 179 moveto 0 0 lineto 230 0 lineto 230 179 lineto closepath clip newpath
-198.0 256.5 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/reencdict 12 dict def /ReEncode { reencdict begin
/newcodesandnames exch def /newfontname exch def /basefontname exch def
/basefontdict basefontname findfont def /newfont basefontdict maxlength dict def
basefontdict { exch dup /FID ne { dup /Encoding eq
{ exch dup length array copy newfont 3 1 roll put }
{ exch newfont 3 1 roll put } ifelse } { pop pop } ifelse } forall
newfont /FontName newfontname put newcodesandnames aload pop
128 1 255 { newfont /Encoding get exch /.notdef put } for
newcodesandnames length 2 idiv { newfont /Encoding get 3 1 roll put } repeat
newfontname newfont definefont pop end } def
/isovec [
8#055 /minus 8#200 /grave 8#201 /acute 8#202 /circumflex 8#203 /tilde
8#204 /macron 8#205 /breve 8#206 /dotaccent 8#207 /dieresis
8#210 /ring 8#211 /cedilla 8#212 /hungarumlaut 8#213 /ogonek 8#214 /caron
8#220 /dotlessi 8#230 /oe 8#231 /OE
8#240 /space 8#241 /exclamdown 8#242 /cent 8#243 /sterling
8#244 /currency 8#245 /yen 8#246 /brokenbar 8#247 /section 8#250 /dieresis
8#251 /copyright 8#252 /ordfeminine 8#253 /guillemotleft 8#254 /logicalnot
8#255 /hyphen 8#256 /registered 8#257 /macron 8#260 /degree 8#261 /plusminus
8#262 /twosuperior 8#263 /threesuperior 8#264 /acute 8#265 /mu 8#266 /paragraph
8#267 /periodcentered 8#270 /cedilla 8#271 /onesuperior 8#272 /ordmasculine
8#273 /guillemotright 8#274 /onequarter 8#275 /onehalf
8#276 /threequarters 8#277 /questiondown 8#300 /Agrave 8#301 /Aacute
8#302 /Acircumflex 8#303 /Atilde 8#304 /Adieresis 8#305 /Aring
8#306 /AE 8#307 /Ccedilla 8#310 /Egrave 8#311 /Eacute
8#312 /Ecircumflex 8#313 /Edieresis 8#314 /Igrave 8#315 /Iacute
8#316 /Icircumflex 8#317 /Idieresis 8#320 /Eth 8#321 /Ntilde 8#322 /Ograve
8#323 /Oacute 8#324 /Ocircumflex 8#325 /Otilde 8#326 /Odieresis 8#327 /multiply
8#330 /Oslash 8#331 /Ugrave 8#332 /Uacute 8#333 /Ucircumflex
8#334 /Udieresis 8#335 /Yacute 8#336 /Thorn 8#337 /germandbls 8#340 /agrave
8#341 /aacute 8#342 /acircumflex 8#343 /atilde 8#344 /adieresis 8#345 /aring
8#346 /ae 8#347 /ccedilla 8#350 /egrave 8#351 /eacute
8#352 /ecircumflex 8#353 /edieresis 8#354 /igrave 8#355 /iacute
8#356 /icircumflex 8#357 /idieresis 8#360 /eth 8#361 /ntilde 8#362 /ograve
8#363 /oacute 8#364 /ocircumflex 8#365 /otilde 8#366 /odieresis 8#367 /divide
8#370 /oslash 8#371 /ugrave 8#372 /uacute 8#373 /ucircumflex
8#374 /udieresis 8#375 /yacute 8#376 /thorn 8#377 /ydieresis] def
/Times-Roman /Times-Roman-iso isovec ReEncode
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 50
% Polyline
7.500 slw
n 4800 1500 m
 3975 1650 l gs col0 s gr 
% Polyline
n 4875 1500 m
 4875 1650 l gs col0 s gr 
% Polyline
n 5100 1425 m
 5925 1650 l gs col0 s gr 
% Polyline
n 3675 1950 m
 3675 2475 l gs col0 s gr 
% Polyline
n 6000 1950 m
 5475 2400 l gs col0 s gr 
% Polyline
n 6075 1950 m
 6075 2400 l gs col0 s gr 
% Polyline
n 6150 1950 m
 6750 2475 l gs col0 s gr 
% Polyline
n 6000 2775 m
 5400 3375 l gs col0 s gr 
% Polyline
n 6075 2775 m
 6075 3300 l gs col0 s gr 
% Polyline
n 6225 2775 m
 6675 3300 l gs col0 s gr 
% Polyline
n 6825 3675 m
 6825 4050 l gs col0 s gr 
% Polyline
n 5475 3675 m
 5475 4050 l gs col0 s gr 
/Times-Roman-iso ff 200.00 scf sf
3525 1875 m
gs 1 -1 sc (expr) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
5850 1875 m
gs 1 -1 sc (expr) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
4650 1425 m
gs 1 -1 sc (expr) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
4875 1875 m
gs 1 -1 sc (+) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
3300 2700 m
gs 1 -1 sc (IDENT) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
5850 2700 m
gs 1 -1 sc (expr) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
5325 2700 m
gs 1 -1 sc (\() col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
6825 2700 m
gs 1 -1 sc (\)) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
5250 3525 m
gs 1 -1 sc (expr) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
6600 3525 m
gs 1 -1 sc (expr) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
6075 3525 m
gs 1 -1 sc (-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
5100 4275 m
gs 1 -1 sc (IDENT) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
6450 4275 m
gs 1 -1 sc (IDENT) col0 sh gr
% here ends figure;
$F2psEnd
rs
showpage
%%EndDocument
end PEND 3.543(Ag)33.336 533 S .293(rammar which is)-3.543 F F3
(unambiguous)3.543 E F2 .293(has the property that re)3.543 F -.065(ga)
-.195 G .293(rdless of ho).065 F 3.543(wt)-.325 G .293(he deri)-3.543 F
-.325(va)-.325 G(tion).325 E -.13(wa)33.336 548 S 4.449(sp).13 G 1.199
(erformed \(leftmost, rightmost, or an)-4.449 F 4.45(yo)-.195 G 1.2
(ther w)-4.45 F 1.2(ay\) it yields the same parse tree, for)-.13 F(an)
33.336 563 Q 3.78(yg)-.195 G -2.795 -.325(iv e)-3.78 H(n).325 E/F4 13
/Times-Italic@0 SF(valid)3.78 E F2 .53(sequence of input tok)3.78 F 3.78
(ens. Furthermore,)-.13 F .53(there is e)3.78 F .53
(xactly one leftmost and)-.195 F(one rightmost deri)33.336 578 Q -.325
(va)-.325 G(tion possible.).325 E(Ambiguous grammars do not ha)6.5 E .39
-.195(ve t)-.26 H(hese properties.).195 E F3(Ambiguity)237.722 608 Q F2
3.861(Ag)33.336 644 S .611(rammar is ambiguous if there e)-3.861 F .611
(xists a sentence of terminals which could ha)-.195 F 1.001 -.195(ve t)
-.26 H .871 -.13(wo o).195 H(r).13 E 1.392(more dif)33.336 659 R 1.392
(ferent \214nal parse trees.)-.325 F 1.392(In our e)7.892 F 1.392
(xample grammar)-.195 F 4.642(,w)-.52 G 1.392(hat is the deri)-4.642 F
-.325(va)-.325 G 1.392(tion of the).325 F(sentence)33.336 674 Q/F5 13
/Courier@0 SF(a+b*c)3.25 E F2 6.5(?T)C(here are tw)-6.5 E 3.25(op)-.13 G
(ossible answers)-3.25 E 0 Cg EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 140.742(ECE466:Compilers Unit)33.336 60 R(2/pg 4)
2.25 E(\2512019 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25 E 0 0 468 480
-81.9 84 33.336 201.9 PBEGIN
%%BeginDocument: ambig.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: ambig.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Wed Feb 24 00:42:56 2010
%%For: hak@lex ()
%%BoundingBox: 0 0 480 84
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 84 moveto 0 0 lineto 480 0 lineto 480 84 lineto closepath clip newpath
-30.4 148.5 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 50
% Polyline
7.500 slw
n 5925 1950 m
 5925 2250 l gs col0 s gr 
% Polyline
n 6750 1275 m
 6150 1500 l gs col0 s gr 
% Polyline
n 6825 1275 m
 6825 1575 l gs col0 s gr 
% Polyline
n 6975 1275 m
 7350 1575 l gs col0 s gr 
% Polyline
n 7500 1875 m
 7500 2175 l gs col0 s gr 
% Polyline
n 1650 1950 m
 1125 2100 l gs col0 s gr 
% Polyline
n 1800 1950 m
 1800 2250 l gs col0 s gr 
% Polyline
n 1950 1950 m
 2175 2175 l gs col0 s gr 
% Polyline
n 2625 1275 m
 2025 1500 l gs col0 s gr 
% Polyline
n 2700 1275 m
 2700 1575 l gs col0 s gr 
% Polyline
n 2850 1275 m
 3225 1575 l gs col0 s gr 
% Polyline
n 3375 1875 m
 3375 2175 l gs col0 s gr 
% Polyline
n 7425 1875 m
 7050 2175 l gs col0 s gr 
% Polyline
n 7575 1875 m
 7950 2175 l gs col0 s gr 
/Times-Roman ff 200.00 scf sf
6825 1200 m
gs 1 -1 sc (expr) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
5925 1800 m
gs 1 -1 sc (expr) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
7500 1800 m
gs 1 -1 sc (expr) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
2700 1200 m
gs 1 -1 sc (expr) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
2700 1800 m
gs 1 -1 sc (*) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
900 2400 m
gs 1 -1 sc (IDENTa) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
1800 1800 m
gs 1 -1 sc (expr) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
3375 1800 m
gs 1 -1 sc (expr) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
1800 2400 m
gs 1 -1 sc (+) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
2400 2400 m
gs 1 -1 sc (IDENTb) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
3300 2400 m
gs 1 -1 sc (IDENTc) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
7500 2475 m
gs 1 -1 sc (*) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
6825 1800 m
gs 1 -1 sc (+) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
5850 2400 m
gs 1 -1 sc (IDENTa) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
6975 2400 m
gs 1 -1 sc (IDENTb) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
8100 2400 m
gs 1 -1 sc (IDENTc) dup sw pop 2 div neg 0 rm  col0 sh gr
% here ends figure;
$F2psEnd
rs
showpage
%%EndDocument
end PEND/F1 13/Times-Roman@0 SF .568
(Therefore, although this grammar is suf)33.336 222.9 R .569
(\214cient for determining v)-.325 F .569(alid vs in)-.325 F -.325(va)
-.52 G .569(lid sentences,).325 F 2.362(it is not useful as part of a c\
ompiler because it does not capture the meaning of the)33.336 237.9 R
(sentence.)33.336 252.9 Q .053(One w)33.336 273.9 R .053(ay to remo)-.13
F .443 -.195(ve t)-.195 H .053
(he ambiguity is to de\214ne operator precedence and associati).195 F
(vity)-.325 E 6.553(.T)-.845 G(his)-6.553 E 2.987(method is often used \
with yacc/bison parser generators, and we shall see it shortly)33.336
288.9 R(.)-.845 E(Ho)33.336 303.9 Q(we)-.325 E -.195(ve)-.325 G 1.386
-.52(r, t).195 H .346(his mechanism is outside of).52 F .346
(the BNF notation, so let us e)6.846 F .347(xplore re-writing the)-.195
F(grammar to be unambiguous:)33.336 318.9 Q/F2 8/Courier@0 SF 1.2
(/*Grammar 2 */)33.936 330.9 S 12 1.2(expr: expr)33.936 342.9 T 1.2
('+' term)6 G 19.2(|e)57.936 354.9 S 1.2(xpr '-' term)-18 G 19.2(|t)
57.936 366.9 S 1.2(erm)-18 G(;)57.936 378.9 Q 12 1.2(term: term)33.936
402.9 T 1.2('*' factor)6 G 19.2(|t)57.936 414.9 S 1.2(erm '/' factor)-18
G 19.2(|f)57.936 426.9 S 1.2(actor)-18 G(;)57.936 438.9 Q 1.2
(factor: '\(' expr '\)')33.936 462.9 S 19.2(|N)57.936 474.9 S 1.2(UM)-18
G 19.2(|I)57.936 486.9 S 1.2(DENT)-18 G(;)57.936 498.9 Q F1 2.716 -1.04
(We h)33.336 519.9 T -2.925 -.26(av e)1.04 H(rede\214ned)4.146 E/F3 13
/Courier@0 SF(expr)3.886 E F1 .636
(so that the rightmost non-terminal can not be something which)3.886 F
2.332(ultimately contains a + or -.)33.336 534.9 R 2.332(This remo)8.832
F -.195(ve)-.195 G 5.582(st).195 G 2.332
(he ambiguity both about precedence and)-5.582 F(associati)33.336 549.9
Q(vity)-.325 E 7.417(.N)-.845 G 1.567 -.325(ow a)-7.417 H 4.167
(+b*c and).325 F .917(a-b-c are unambiguous.)4.167 F .917
(Note in the parse tree belo)7.417 F 4.167(wt)-.325 G(he)-4.167 E 1.554
(introduction of e)33.336 564.9 R 1.554(xtra le)-.195 F -.195(ve)-.325 G
1.554(ls because of the ne).195 F 4.805(wn)-.325 G 1.555
(on-terminals introduced to resolv)-4.805 F 4.805(et)-.195 G(he)-4.805 E
(ambiguity:)33.336 579.9 Q 0 0 221 221 -134 134 156.836 734.9 PBEGIN
%%BeginDocument: nonambig.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: nonambig.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Thu Sep 20 20:19:00 2012
%%For: hak@lex ()
%%BoundingBox: 0 0 221 134
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 134 moveto 0 0 lineto 221 0 lineto 221 134 lineto closepath clip newpath
-202.5 279.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 50
% Polyline
7.500 slw
n 4500 2700 m
 3900 2850 l gs col0 s gr 
% Polyline
n 4800 2700 m
 4800 2850 l gs col0 s gr 
% Polyline
n 4950 2700 m
 5625 2850 l gs col0 s gr 
% Polyline
n 5775 3075 m
 5550 3225 l gs col0 s gr 
% Polyline
n 6000 3075 m
 6000 3300 l gs col0 s gr 
% Polyline
n 6150 3075 m
 6450 3300 l gs col0 s gr 
% Polyline
n 5550 3525 m
 5550 3675 l gs col0 s gr 
% Polyline
n 6525 3525 m
 6525 3750 l gs col0 s gr 
% Polyline
n 5550 3975 m
 5550 4200 l gs col0 s gr 
% Polyline
n 3600 4200 m
 3600 4425 l gs col0 s gr 
% Polyline
n 3600 3750 m
 3600 3975 l gs col0 s gr 
% Polyline
n 3600 3150 m
 3600 3375 l gs col0 s gr 
/Times-Roman ff 200.00 scf sf
4575 2550 m
gs 1 -1 sc (expr) col0 sh gr
/Times-Roman ff 200.00 scf sf
3450 3000 m
gs 1 -1 sc (expr) col0 sh gr
/Times-Roman ff 200.00 scf sf
4725 3000 m
gs 1 -1 sc (+) col0 sh gr
/Times-Roman ff 200.00 scf sf
5700 3000 m
gs 1 -1 sc (term) col0 sh gr
/Times-Roman ff 200.00 scf sf
3450 3675 m
gs 1 -1 sc (term) col0 sh gr
/Times-Roman ff 200.00 scf sf
3375 4200 m
gs 1 -1 sc (factor) col0 sh gr
/Times-Roman ff 200.00 scf sf
5325 3450 m
gs 1 -1 sc (term) col0 sh gr
/Times-Roman ff 200.00 scf sf
6300 3450 m
gs 1 -1 sc (factor) col0 sh gr
/Times-Roman ff 200.00 scf sf
5925 3525 m
gs 1 -1 sc (*) col0 sh gr
/Times-Roman ff 200.00 scf sf
5325 3900 m
gs 1 -1 sc (factor) col0 sh gr
/Times-Roman ff 200.00 scf sf
5400 4425 m
gs 1 -1 sc (IDENT) col0 sh gr
/Times-Roman ff 200.00 scf sf
3375 4650 m
gs 1 -1 sc (IDENT) col0 sh gr
/Times-Roman ff 200.00 scf sf
6375 3975 m
gs 1 -1 sc (IDENT) col0 sh gr
% here ends figure;
$F2psEnd
rs
showpage
%%EndDocument
end PEND 0 Cg EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 140.742(ECE466:Compilers Unit)33.336 60 R(2/pg 5)
2.25 E(\2512019 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25 E/F1 13
/Times-Bold@0 SF(Context-fr)201.939 120 Q(ee grammars)-.234 E/F2 13
/Times-Roman@0 SF .487(In order to write an ef)33.336 156 R .486
(\214cient parser)-.325 F 3.736(,t)-.52 G .486
(he grammar rules must be conte)-3.736 F .486(xt-free, i.e. we must)
-.195 F(kno)33.336 171 Q 4.073(wt)-.325 G .823(hem in adv)-4.073 F .824
(ance without looking at the input.)-.325 F .824
(The grammar rules be de\214ned only)7.324 F 3.374
(in terms of sequences of tok)33.336 186 R 3.374
(ens, not their semantic v)-.13 F 6.624(alues. A)-.325 F 3.374
(language which has)6.624 F 1.255(dynamic syntax can not be e)33.336 201
R 1.256(xpressed with a conte)-.195 F 1.256(xt-free grammar)-.195 F
7.756(.I)-.715 G 1.256(magine a Perl-lik)-7.756 F(e)-.13 E -.195(ex)
33.336 216 S(tension to C which supports iterating o).195 E -.195(ve)
-.195 G 3.25(ra).195 G(rrays using the)-3.25 E/F3 13/Courier@0 SF(for)
3.25 E F2 -.13(ke)3.25 G(yw)-.065 E(ord:)-.13 E/F4 8/Courier@0 SF 1.2
(int func\(\))45.936 228 S({)45.936 240 Q 1.2(int ary[10];)81.936 252 S
1.2(for\(ary\))129.936 276 S({)129.936 288 Q 1.2(/*...*/)177.936 300 S
(})129.936 312 Q(})45.936 324 Q F2 1.378(It can not be determined using\
 syntactic analysis alone whether the sequence of tok)33.336 345 R(ens)
-.13 E F3 .108(FOR, '\(', IDENT, '\)')33.336 360 R F2 .108(is v)3.358 F
3.358(alid. In)-.325 F .109(order to parse this conte)3.358 F .109
(xt-dependent language,)-.195 F 2.927(we must write a conte)33.336 375 R
2.926(xt-free grammar which is more permissi)-.195 F -.195(ve)-.325 G
6.176(,a).195 G(llo)-6.176 E 2.926(wing incorrect)-.325 F 3.59(sentence\
s to be accepted, and then catch the error through semantic analysis \(\
type)33.336 390 R(checking\).)33.336 405 Q .359(Another classic e)33.336
426 R .359(xample of conte)-.195 F .359
(xt dependence is the inability of a conte)-.195 F .359(xt free grammar)
-.195 F 1.352(to accept e)33.336 441 R 1.352
(xpressions in which the identi\214ers must ha)-.195 F 1.742 -.195(ve p)
-.26 H(re).195 E 1.352(viously been declared.)-.325 F(The)7.852 E(te)
33.336 456 Q 3.814(xt \(section 4.3.5\) contains a discussion of the im\
possibility of using conte)-.195 F(xt-free)-.195 E
(grammar to impose this restriction.)33.336 471 Q -.195(Fo)33.336 492 S
4.285(rt).195 G 1.035(he most part, the C language can be e)-4.285 F
1.036(xpressed with a conte)-.195 F 1.036(xt-free grammar)-.195 F 7.536
(.W)-.715 G(e')-8.576 E(ll)-.13 E .92(see ho)33.336 507 R 4.17(wt)-.325
G 4.17(oh)-4.17 G .92(andle the fe)-4.17 F 4.169(we)-.325 G .919
(xceptions by feeding back information to modify the le)-4.364 F -.195
(xe)-.195 G(r').195 E(s)-.715 E(beha)33.336 522 Q(vior dynamically)-.26
E(.)-.845 E F1(LL / T)173.151 552 Q(op-Do)-1.196 E(wn Recursi)-.13 E .26
-.13(ve p)-.13 H(arsing).13 E F2 -.195(Fo)33.336 588 S 3.332(rc).195 G
(omple)-3.332 E 3.332(xp)-.195 G .083
(rojects, parsers are generally created using a tool such as yacc.)
-3.332 F(Ho)6.583 E(we)-.325 E -.195(ve)-.325 G 1.123 -.52(r, i).195 H
(t).52 E .664(is v)33.336 603 R .664(ery useful to ha)-.195 F 1.054
-.195(ve a)-.26 H 3.914(ni).195 G(ntuiti)-3.914 E 1.054 -.195(ve f)-.325
H .664(eel for ho).195 F 3.914(wt)-.325 G 3.914(oc)-3.914 G .663
(reate parsers by hand using recursion.)-3.914 F -.195(Fo)33.336 618 S
5.234(re).195 G 1.984(xample, one might need to construct a small parse\
r in a language which doesn')-5.429 F(t)-.234 E -.13(wo)33.336 633 S
(rk with yacc/bison, or in an embedded en).13 E
(vironment where memory is v)-.52 E(ery scarce.)-.195 E 2.086
(In implementing)33.336 654 R F1 -.234(re)5.336 G(cursi).234 E 2.346
-.13(ve d)-.13 H 2.086(escent parsing).13 F F2 5.336(,w)C 5.336(ew)
-5.336 G 2.086(ill write a program structure which)-5.336 F
(mirrors the grammar)33.336 669 Q 6.5(.L)-.715 G
(et us say our grammar is just:)-6.5 E F4 1.2(/* Grammar 3*/)33.936 681
S 12 1.2(expr: '\(')33.936 693 T 1.2(expr '\)')6 G 31.2(|N)45.936 705 S
1.2(UM)-30 G 31.2(|I)45.936 717 S 1.2(DENT)-30 G(;)45.936 729 Q 0 Cg EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 140.742(ECE466:Compilers Unit)33.336 60 R(2/pg 6)
2.25 E(\2512019 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25 E/F1 13
/Times-Roman@0 SF(Our parser could be:)33.336 120 Q/F2 8/Courier@0 SF
1.2(int curtok;)33.936 132 S 1.2(#define NEXT \(curtok=yylex\(\)\))
33.936 156 S 1.2(expr\(\))33.936 168 S({)33.936 180 Q 1.2
(if \(curtok=='\('\))81.936 192 S({)81.936 204 Q 1.2(NEXT;)129.936 216 S
1.2(if \(!expr\(\)\) return 0;)129.936 228 S 1.2
(if \(curtok!='\)'\) return 0;)129.936 240 S 1.2(NEXT;)129.936 252 S 1.2
(return 1;)129.936 264 S(})81.936 276 Q 1.2
(if \(curtok == IDENT || curtok == NUM\) {NEXT;return 1;})81.936 288 S
1.2(return 0;)81.936 300 S(})33.936 312 Q F1 5.436 -1.04(We r)33.336 333
T 3.356(eturn 1 if the input is v)1.04 F 3.357
(alid according to the grammar)-.325 F 6.607(,a)-.52 G 3.357
(nd 0 otherwise.)-6.607 F(The)9.857 E 5.935(recursion must e)33.336 348
R -.195(ve)-.325 G 5.935(ntually terminate.).195 F(Ho)12.435 E(we)-.325
E -.195(ve)-.325 G 6.975 -.52(r, t).195 H 5.934
(ry applying this method to the).52 F 4.255(unambiguous e)33.336 363 R
4.255(xpression grammar #2 abo)-.195 F -.195(ve)-.195 G 10.756(.W).195 G
7.506(ew)-11.796 G 4.256(ill quickly get into an endless)-7.506 F 1.228
(recursion because of the w)33.336 378 R 1.228
(ay the rules are written.)-.13 F(The)7.727 E 4.477(ya)-.195 G(re)-4.477
E/F3 13/Times-Bold@0 SF 1.227(left r)4.477 F(ecursi)-.234 E -.13(ve)-.13
G F1 7.727(.T).13 G 4.477(oc)-8.767 G(orrect)-4.477 E
(this, we must re-write the grammar)33.336 393 Q(.)-.715 E F2 1.2
(/* Grammar 4 */)33.936 405 S 12 1.2(expr: term)33.936 417 T 25.2(|t)
51.936 429 S 1.2(erm '+' expr)-24 G 25.2(|t)51.936 441 S 1.2
(erm '-' expr)-24 G(;)51.936 453 Q 12 1.2(term: factor)33.936 477 T 25.2
(|f)51.936 489 S 1.2(actor '*' term)-24 G 25.2(|f)51.936 501 S 1.2
(actor '/' term)-24 G(;)51.936 513 Q 1.2(factor: '\(' expr '\)')33.936
537 S 19.2(|N)57.936 549 S 1.2(UM)-18 G 19.2(|I)57.936 561 S 1.2(DENT)
-18 G(;)57.936 573 Q F1 3.919(Ag)33.336 594 S .669
(rammar which has no left recursion and which can be parsed by e)-3.919
F .669(xamining the input)-.195 F 1.683
(stream from left to right and taking the leftmost deri)33.336 609 R
-.325(va)-.325 G 1.682(tion, looking at most one tok).325 F(en)-.13 E
(ahead is called LL\(1\).)33.336 624 Q(From this grammar)6.5 E 3.25(,w)
-.52 G 3.25(ec)-3.25 G(an write a top-do)-3.25 E(wn parser:)-.325 E F2
1.2(#define NEXT \(curtok=yylex\(\)\))33.936 636 S 1.2(int curtok;)
33.936 648 S 1.2(main\(\))33.936 660 S({)33.936 672 Q 1.2(NEXT;)81.936
684 S 1.2(if \(expr\(\)\))81.936 696 S 1.2(printf\("GOOD\\n"\))129.936
708 S 1.2(else)81.936 720 S 1.2(printf\("BAD\\n"\);)129.936 732 S 0 Cg
EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 140.742(ECE466:Compilers Unit)33.336 60 R(2/pg 7)
2.25 E(\2512019 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25 E/F1 8
/Courier@0 SF(})33.936 117 Q 1.2(expr\(\))33.936 141 S({)33.936 153 Q
1.2(if \(!term\(\)\) return 0;)81.936 165 S({)81.936 177 Q 1.2
(if \(curtok=='+'\))81.936 189 S({)81.936 201 Q 1.2(NEXT;)129.936 213 S
1.2(if \(!expr\(\)\) return 0;)129.936 225 S 1.2(return 1;)129.936 237 S
(})81.936 249 Q 1.2(if \(curtok=='-'\))81.936 261 S({)81.936 273 Q 1.2
(NEXT;)129.936 285 S 1.2(if \(!expr\(\)\) return 0;)129.936 297 S 1.2
(return 1;)129.936 309 S(})81.936 321 Q 1.2
(if \(curtok==EOD\) return 1;)81.936 333 S 1.2(return 0;)81.936 345 S(})
33.936 357 Q 1.2(term\(\))33.936 381 S({)33.936 393 Q 1.2
(if \(!factor\(\)\) return 0;)81.936 405 S 1.2(if \(curtok == '*'\))
81.936 417 S({)81.936 429 Q 1.2(NEXT;)129.936 441 S 1.2
(if \(!term\(\)\) return 0;)129.936 453 S 1.2(return 1;)129.936 465 S(})
81.936 477 Q 1.2(if \(curtok == '/'\))81.936 489 S({)81.936 501 Q 1.2
(NEXT;)129.936 513 S 1.2(if \(!term\(\)\) return 0;)129.936 525 S 1.2
(return 1;)129.936 537 S(})81.936 549 Q 1.2(return 1;)81.936 561 S(})
33.936 573 Q 1.2(factor\(\))33.936 597 S({)33.936 609 Q 1.2
(if \(curtok=='\('\))81.936 621 S({)81.936 633 Q 1.2(NEXT;)129.936 645 S
1.2(if \(!expr\(v\)\) return 0;)129.936 657 S 1.2
(if \(curtok!='\)'\) return 0;)129.936 669 S 1.2(NEXT;)129.936 681 S 1.2
(return 1;)129.936 693 S(})81.936 705 Q 1.2
(if \(curtok==NUM || curtok==IDENT\))81.936 717 S({)81.936 729 Q 1.2
(NEXT;)129.936 741 S 0 Cg EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 140.742(ECE466:Compilers Unit)33.336 60 R(2/pg 8)
2.25 E(\2512019 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25 E/F1 8
/Courier@0 SF 1.2(return 1;)129.936 117 S(})81.936 129 Q 1.2(return 0;)
81.936 141 S(})33.936 153 Q/F2 13/Times-Roman@0 SF 4.358 -1.04(We s)
33.336 174 T 2.278(ee that the structure of the abo)1.04 F 2.668 -.195
(ve r)-.195 H(ecursi).195 E 2.668 -.195(ve p)-.325 H 2.278
(arser is that on entry to an).195 F 5.528(yo)-.195 G 5.529(ft)-5.528 G
(he)-5.529 E 4.584(functions, we are "looking for" an e)33.336 189 R
4.583(xpansion of a non-terminal symbol with the)-.195 F 3.447
(corresponding name, and)33.336 204 R/F3 13/Courier@0 SF(curtok)6.697 E
F2 3.447(contains the current tok)6.697 F 6.698(en. If)-.13 F 3.448
(the grammar rule)6.698 F .884
(contains a non-terminal, we recurse using that name.)33.336 219 R .884
(If the rule contains a terminal, we)7.384 F .533
(check to see if it matches.)33.336 234 R .534
(If it does not match, we \215ag an error)7.033 F 7.034(.I)-.715 G 3.784
(fw)-7.034 G 3.784(ed)-3.784 G 3.784(oh)-3.784 G -2.925 -.26(av e)-3.784
H 3.784(am)4.044 G(atch,)-3.784 E 1.141(then we must consume the tok)
33.336 249 R 1.141(en with)-.13 F F3(curtok=yylex\(\))4.391 E F2 7.641
(.T)C 1.141(hus we are using a look-)-7.641 F .801(ahead of one tok)
33.336 264 R 4.051(en. Upon)-.13 F .801(return from an)4.051 F 4.051(yf)
-.195 G(unction,)-4.051 E F3(curtok)4.051 E F2 .802(is e)4.052 F .802
(xpected to contain the)-.195 F/F4 13/Times-Italic@0 SF(ne)33.336 279 Q
(xt)-.26 E F2(tok)3.466 E .216(en \(i.e. not an)-.13 F 3.466(yo)-.195 G
3.466(ft)-3.466 G .216(he tok)-3.466 F .216
(ens associated with the deri)-.13 F -.325(va)-.325 G .215
(tion of that function which).325 F(just returned\).)33.336 294 Q 3.901
(One problem which comes to light is that because we started with right\
-recursi)33.336 315 R -.195(ve)-.325 G .137
(grammar #4, our parser has right associati)33.336 330 R(vity)-.325 E
6.637(.C)-.845 G .137(onsider an e)-6.637 F .137
(xpression such as a-b-c.)-.195 F -1.04(We)6.637 G 1.719(will b)33.336
345 R 1.719(uild a parse tree as if a-\(b-c\) which is incorrect.)-.26 F
1.719(It didn')8.219 F 4.97(tm)-.234 G 1.72(atter in the e)-4.97 F
(xample)-.195 E(abo)33.336 360 Q -.195(ve)-.195 G 4.83(,b).195 G 1.58
(ecause we are neither compiling nor interpreting the code, just v)-4.83
F 1.58(erifying it for)-.195 F(syntax.)33.336 375 Q(No)33.336 396 Q
4.232(ww)-.325 G(e')-4.232 E .982
(ll see a technique for rectifying this associati)-.13 F .982
(vity problem.)-.325 F(Let')7.482 E 4.232(sd)-.715 G 4.232(ot)-4.232 G
.982(his parser)-4.232 F(ag)33.336 411 Q
(ain, this time adding support for calculating the v)-.065 E
(alue of the e)-.325 E(xpression:)-.195 E F1 1.2(#include <stdio.h>)
33.936 423 S 1.2(#include "tokval.h")33.936 435 S 1.2
(int curtok,yylval;)33.936 459 S 1.2(main\(\))33.936 483 S({)33.936 495
Q 1.2(int val,rc;)39.936 507 S 1.2(NEXT;)81.936 519 S 1.2
(rc=expr\(&val\);)81.936 531 S 1.2(printf\("%d\\n",val\);)81.936 543 S
1.2(if \(rc\) printf\("GOOD\\n"\); else printf\("BAD\\n"\);)81.936 555 S
(})33.936 567 Q 1.2(expr\(int *v\))33.936 603 S({)33.936 615 Q 1.2
(int v1,v2,op;)39.936 627 S 1.2(if \(!term\(&v1\)\) return 0;)81.936 639
S 1.2(while \(curtok=='+' || curtok=='-'\))81.936 651 S({)81.936 663 Q
1.2(op=curtok;)129.936 675 S 1.2(NEXT;)129.936 687 S 1.2
(if \(!term\(&v2\)\) return 0;)129.936 699 S 1.2
(if \(op=='+'\) v1+=v2; else v1-=v2;)129.936 711 S(})81.936 723 Q 1.2
(*v=v1;)81.936 735 S 0 Cg EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 140.742(ECE466:Compilers Unit)33.336 60 R(2/pg 9)
2.25 E(\2512019 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25 E/F1 8
/Courier@0 SF 1.2(return curtok==EOF;)81.936 117 S(})33.936 129 Q 1.2
(term\(int *v\))33.936 153 S({)33.936 165 Q 1.2(int v1,v2,op;)39.936 177
S 1.2(if \(!factor\(&v1\)\) return 0;)81.936 189 S 1.2
(while \(curtok=='*' || curtok=='/'\))81.936 201 S({)81.936 213 Q 1.2
(op=curtok;)129.936 225 S 1.2(NEXT;)129.936 237 S 1.2
(if \(!factor\(&v2\)\) return 0;)129.936 249 S 1.2(if \(op=='*'\))
129.936 261 S 1.2(v1*=v2;)177.936 273 S 1.2(else)129.936 285 S({)129.936
297 Q 1.2(if \(v2==0\))177.936 309 S({)177.936 321 Q 1.2
(fprintf\(stderr,"/0 error0\);)225.936 333 S 1.2(return 0;)225.936 345 S
(})177.936 357 Q 1.2(v1/=v2;)177.936 369 S(})129.936 381 Q(})81.936 393
Q 1.2(*v=v1;)81.936 405 S 1.2(return 1;)81.936 417 S(})33.936 429 Q 1.2
(factor\(int *v\))33.936 453 S({)33.936 465 Q 1.2(if \(curtok=='\('\))
81.936 477 S({)81.936 489 Q 1.2(NEXT;)129.936 501 S 1.2
(if \(!expr\(v\)\) return 0;)129.936 513 S 1.2
(if \(curtok!='\)'\) return 0;)129.936 525 S 1.2(NEXT;)129.936 537 S 1.2
(return 1;)129.936 549 S(})81.936 561 Q 1.2
(/* Let's drop support for IDENT for now because we haven't)81.936 573 S
1.2(developed a symbol table yet */)129.936 585 S 1.2
(if \(curtok==NUM\))81.936 597 S({)81.936 609 Q 1.2(*v=yylval;)129.936
621 S 1.2(NEXT;)129.936 633 S 1.2(return 1;)129.936 645 S(})81.936 657 Q
1.2(if \(curtok==EOF\))81.936 669 S({)81.936 681 Q 1.2
(fprintf\(stderr,"found EOF in factor"\);)129.936 693 S 1.2(return 1;)
129.936 705 S(})81.936 717 Q 1.2
(fprintf\(stderr,"found bad token %d in factor",curtok\);)81.936 729 S
1.2(return 0;)81.936 741 S 0 Cg EP
%%Page: 10 10
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 10)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
8/Courier@0 SF(})33.936 117 Q/F2 13/Times-Roman@0 SF .543
(This is still a top-do)33.336 138 R .542(wn recursi)-.325 F .932 -.195
(ve d)-.325 H .542(escent parser).195 F 3.792(,b)-.52 G .542(ut we ha)
-4.052 F .932 -.195(ve r)-.26 H .542(eplaced tail recursion with).195 F
3.25(aw)33.336 153 S(hile loop.)-3.25 E(Doing so mak)6.5 E
(es it easy to e)-.13 E(xpress a syntax lik)-.195 E(e:)-.13 E/F3 10
/Courier@0 SF(expr: term \(\('+'|'-'\) term\)*)33.336 165 Q F2 .35
(Of course, this re)33.336 180 R(ge)-.195 E(xp-lik)-.195 E 3.6(ew)-.13 G
.35(ay of e)-3.73 F .35
(xpressing syntax does not conform to the rules which)-.195 F 1.059
(we ha)33.336 195 R 1.448 -.195(ve a)-.26 H 1.058
(lready stated, i.e. it is not a form of BNF grammar).195 F 7.558(.W)
-.715 G 1.058(riting a list this w)-7.558 F 1.058(ay is)-.13 F 1.281
(more intuiti)33.336 210 R 1.671 -.195(ve a)-.325 H 1.281
(nd this notation is sometimes used informally).195 F 7.782(.H)-.845 G
-.325(ow)-7.782 G -2.795 -.325(ev e).325 H 2.322 -.52(r, l).325 H 1.282
(ists in formal).52 F .715
(grammars are written using either left or right recursion.)33.336 225 R
.715(The te)7.215 F .715(xt demonstrates that this)-.195 F(intuiti)
33.336 240 Q 1.481 -.195(ve n)-.325 H 1.091(otation is no more po).195 F
1.091(werful than BNF)-.325 F 4.341(,i)-1.04 G 1.091
(.e. it does not describe a richer set of)-4.341 F
(languages, it merely describes them in a dif)33.336 255 Q(ferent form.)
-.325 E/F4 13/Times-Bold@0 SF(LR / Bottom-Up P)199.333 285 Q(arsing)-.13
E F2 -1.04(To)33.336 321 S(p-do)1.04 E .199
(wn, or LL parsing, is weak because we must mak)-.325 F 3.449(ed)-.13 G
(eri)-3.449 E -.325(va)-.325 G .199(tion decisions based only).325 F
3.025(on the lookahead tok)33.336 336 R 6.275(en. If)-.13 F 3.025
(there are multiple rules for a gi)6.275 F -.195(ve)-.325 G 6.276(ns)
.195 G 3.026(ymbol which ha)-6.276 F -.195(ve)-.26 G(dif)33.336 351 Q
1.81(ferent non-terminals on the right side, the)-.325 F 5.06(ym)-.195 G
1.81(ust all ha)-5.06 F 2.2 -.195(ve d)-.26 H 1.81(istinct tok).195 F
1.81(ens which \215ag)-.13 F 3.25(them. Here)33.336 366 R(is a contri)
3.25 E -.195(ve)-.325 G 3.25(de).195 G
(xample of a grammar which is not LL:)-3.445 E F3(start: a)33.336 378 Q
(|b)69.336 390 Q(;)45.336 402 Q(a: A a B)33.336 426 Q 6(|/)45.336 438 S
6(*e)-6 G(mpty */)-6 E(;)45.336 450 Q(b: A b B B)33.336 474 Q 6(|/)
39.336 486 S 6(*e)-6 G(mpty */)-6 E(;)39.336 498 Q/F5 13/Times-Italic@0
SF 1.025(Note the stylistic use of /* empty */)33.336 534 R -1.196(Ya)
7.525 G 1.025(cc/Bison use tr)1.196 F 1.025
(aditional C-style comment syntax,)-.195 F .194(so this is ignor)33.336
549 R 3.444(ed. But)-.481 F .194(it r)3.444 F .193
(eminds us that we meant to leave that rule blank, as opposed to)-.481 F
(an e)33.336 564 Q(xtr)-.26 E 3.25(av)-.195 G(ertical bar that we for)
-3.25 E(got about)-.481 E F2(.)A 1.701(This grammar produces sequences \
such as AB, AABB, AAABBB which are rule a or)33.336 594 R 2.736
(ABB, AABBB, AAABBBBBB which are b)33.336 609 R 9.235(.S)-.52 G 2.735
(ince the rules are recursi)-9.235 F -.195(ve)-.325 G 5.985(,t).195 G
2.735(he v)-5.985 F(alid)-.325 E .091
(sentences are potentially in\214nite.)33.336 624 R(Gi)6.591 E -.195(ve)
-.325 G 3.341(nt).195 G .091(he input tok)-3.341 F .091
(en sequence, for e)-.13 F .091(xample, of A B B,)-.195 F .691(we can n\
ot determine if the input reduces to the non-terminal a or b, with just\
 one tok)33.336 639 R(en)-.13 E .726(of look-ahead.)33.336 654 R(Ha)
7.226 E .726(ving seen A and with B as the lookahead tok)-.26 F .727
(en, and not kno)-.13 F .727(wing that)-.325 F .58(another B is up ne)
33.336 669 R .58(xt, we might start do)-.195 F .58
(wn the path of a->A empty B.)-.325 F .579(This language can)7.079 F
.233(not be parsed using top-do)33.336 684 R .233
(wn LL parsing without an in\214nite amount of lookahead.)-.325 F .234
(It can)6.733 F(be parsed ho)33.336 699 Q(we)-.325 E -.195(ve)-.325 G
3.25(ri).195 G 3.25(nL)-3.25 G(R\(1\))-3.25 E 4.228
(That being said, man)33.336 720 R 7.478(yl)-.195 G 4.227
(anguages, especially older languages, were written with a)-7.478 F
(grammar than can be parsed in LL.)33.336 735 Q
(LR parsing, we will see, gi)6.5 E -.195(ve)-.325 G 3.25(su).195 G 3.25
(sm)-3.25 G(ore \215e)-3.25 E(xibility)-.195 E(.)-.845 E 0 Cg EP
%%Page: 11 11
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 11)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF .775(Whereas top-do)33.336 120 R .775
(wn parsing starts with the highest-le)-.325 F -.195(ve)-.325 G 4.026
(ln).195 G .776(ode and attempts to w)-4.026 F .776(ork do)-.13 F(wn)
-.325 E .005(to the terminals, bottom-up parsing consumes terminals and\
, as it recognizes sequences of)33.336 135 R 1.721(terminals which coul\
d be the right-hand-side of a production, replaces them with non-)33.336
150 R 4.809(terminals. This)33.336 165 R 1.559
(process continues, replacing sequences of symbols \(both terminals and)
4.809 F 3.584(non-terminals\) with higher)33.336 180 R(-le)-.26 E -.195
(ve)-.325 G 6.834(ln).195 G 3.584
(on-terminals, until the input is consumed and the)-6.834 F(highest-le)
33.336 195 Q -.195(ve)-.325 G 5.651(lt).195 G 2.401
(erminal has been recognized.)-5.651 F 2.4
(Therefore we can look at more than one)8.901 F(tok)33.336 210 Q 3.049
(en at a time when deciding which rule to apply)-.13 F 6.3(,w)-.845 G
3.05(hich mak)-6.3 F 3.05(es LR parsing more)-.13 F(po)33.336 225 Q
(werful than LL.)-.325 E .235
(LR parsing uses a symbol stack as its primary data structure.)33.336
246 R 2.315 -1.04(We c)6.735 H .235(an informally describe)1.04 F
(the bottom-up "shift-reduce" parsing method as:)33.336 261 Q/F2 10
/Courier@0 SF(while \(there are still input tokens\))90.936 273 Q
(shift a token onto a stack of symbols)148.536 285 Q
(while \(the top N symbols represent "best" rhs of a production\))
148.536 297 Q(replace the top N symbols with the lhs symbol)206.136 309
Q(stack must now contain only one symbol, the start or "goal" symbol,)
90.936 333 Q(otherwise report an error)102.936 345 Q F1 2.478(Determini\
ng whether the stack has the "best" rule to match, or whether more tok)
33.336 366 R(ens)-.13 E .082(should be shifted, is the "hard part".)
33.336 381 R .082
(An error occurs if the result of this process, when all)6.582 F 2.093(\
input has been consumed, is not the goal symbol which represents the en\
tirety of the)33.336 396 R(language \()33.336 411 Q/F3 13/Courier@0 SF
(expr)A F1(in our e)3.25 E(xample\).)-.195 E/F4 8/Courier@0 SF 1.2
(/* Grammar 1, again */)33.936 429 S 12 1.2(expr: IDENT)33.936 441 T 1.2
(/* RULE 1 */)114 G 114 1.2(|NUM /*)81.936 453 T 1.2(RULE 2 */)6 G 7.2
(|')81.936 465 S 1.2(\(' expr '\)')-6 G 1.2(/* RULE 3 */)108 G 7.2(|e)
81.936 477 S 1.2(xpr '+' expr)-6 G 1.2(/* RULE 4 */)102 G 7.2(|e)81.936
489 S 1.2(xpr '-' expr)-6 G 1.2(/* RULE 5 */)102 G 7.2(|e)81.936 501 S
1.2(xpr '*' expr)-6 G 1.2(/* RULE 6 */)102 G 7.2(|e)81.936 513 S 1.2
(xpr '/' expr)-6 G 1.2(/* RULE 7 */)102 G(;)81.936 525 Q 0 Cg EP
%%Page: 12 12
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 12)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF(Consider the input sequence)33.336 120 Q/F2 13
/Courier@0 SF -1.8(a+\(b-c\))2.35 G F1(where, as before, a, b, and c)
4.15 E(are all IDENT)33.336 135 Q 6.5(.T)-.962 G(he sequence of mo)-6.5
E -.195(ve)-.195 G 3.25(sm).195 G(ade during bottom-up)-3.25 E
(parsing is:)33.336 150 Q/F3 10/Courier@0 SF 142.8(MOVE Symbol)33.336
162 R(stack after move)6 E(Tokens Ahead)30 E 106.8
(---------- ----------------------------------------)33.336 174 R 136.8
(SHIFT IDENT)33.336 186 R 6(+\(I)138 G(DENT - IDENT \))-6 E 112.8
(REDUCE\(1\) expr)33.336 198 R 6(+\(I)144 G(DENT - IDENT \))-6 E 136.8
(SHIFT expr)33.336 210 R 160.8(+\()6 G(IDENT - IDENT \))-154.8 E 136.8
(SHIFT expr)33.336 222 R 102 6(+\( I)6 H(DENT - IDENT \))-6 E 136.8
(SHIFT expr)33.336 234 R 6(+\(I)6 G 97.2(DENT -)-6 F(IDENT \))6 E 112.8
(REDUCE\(1\) expr)33.336 246 R 6(+\(e)6 G 84(xpr -)-6 F(IDENT \))6 E
136.8(SHIFT expr)33.336 258 R 6(+\(e)6 G(xpr -)-6 E(IDENT \))78 E 136.8
(SHIFT expr)33.336 270 R 6(+\(e)6 G(xpr - IDENT)-6 E(\))42 E 112.8
(REDUCE\(1\) expr)33.336 282 R 6(+\(e)6 G(xpr - expr)-6 E(\))48 E 112.8
(REDUCE\(5\) expr)33.336 294 R 6(+\(e)6 G 84(xpr \))-6 F 136.8
(SHIFT expr)33.336 306 R 6(+\(e)6 G(xpr \))-6 E 112.8(REDUCE\(3\) expr)
33.336 318 R 6(+e)6 G(xpr)-6 E 112.8(REDUCE\(4\) expr)33.336 330 R F1
2.702(Note that if one reads the abo)33.336 351 R 3.091 -.195(ve s)-.195
H 2.701(equence of operations backw).195 F 2.701(ards, it forms a right)
-.13 F(deri)33.336 366 Q -.325(va)-.325 G 4.39(tion. Bottom-up).325 F
1.141(parsing is called LR parsing because it consumes the input from)
4.39 F .901(left-to-right, and b)33.336 381 R .901(uilds the deri)-.26 F
-.325(va)-.325 G .9(tion from right-to-left \(whereas LL parsing b).325
F .9(uilds left-)-.26 F(to-right\).)33.336 396 Q/F4 13/Times-Bold@0 SF
(Grammar P)220.061 426 Q -.13(ow)-.26 G(er).13 E F1 2.803 -1.04(We s)
33.336 456 T .724(ay that a grammar is LR\(1\) if it can be processed b\
y LR parsing, using at most one)1.04 F(tok)33.336 471 Q .594
(en of look-ahead.)-.13 F .594(An LR\(2\) grammar requires tw)7.094 F
3.844(ot)-.13 G(ok)-3.844 E .594(ens of look-ahead.)-.13 F .594
(Here is an)10.344 F -.195(ex)33.336 486 S
(ample of LR\(2\) lifted from the O'Reilly book:).195 E F3
(stmt: COMMAND opt_keyword '\(' IDENT '\)')33.336 498 Q(/* Rule 1*/)
111.6 E(;)90.936 510 Q 37.2(opt_keyword: /*empty*/)33.336 534 R
(/* Rule 2*/)118.8 E 6(|')90.936 546 S(\(' KEYWORD '\)')-6 E
(/* Rule 3*/)128.4 E(;)81.336 558 Q F1 4.644
(This grammar produces COMMAND \( IDENT\) or COMMAND \( KEYW)33.336 579
R 4.644(ORD \))-.13 F 7.198(\(IDENT\). Ha)33.336 594 R 3.947
(ving shifted COMMAND, with the single look-ahead tok)-.26 F 3.947
(en '\(', it is)-.13 F .548(ambiguous whether we ha)33.336 609 R .938
-.195(ve j)-.26 H .548(ust seen an empty opt_k).195 F -.195(ey)-.13 G
-.13(wo).195 G .548(rd and should reduce by Rule).13 F 2.551
(2, or should shift the '\(' in anticipation of Rule 3.)33.336 624 R
-1.3(Ya)9.05 G 2.55(cc or Bison w)1.3 F 2.55(ould call this a)-.13 F
2.406(shift/reduce con\215ict.)33.336 639 R 2.406
(If we could look ahead one more tok)8.906 F 2.406
(en, and determine if what)-.13 F(follo)33.336 654 Q .258
(ws '\(' is IDENT or KEYW)-.325 F .258
(ORD, then we could decide this positi)-.13 F -.195(ve)-.325 G(ly).195 E
6.758(.T)-.845 G .258(herefore the)-6.758 F(grammar is LR\(2\).)33.336
669 Q .261(It can be sho)33.336 690 R .261(wn that an)-.325 F 3.511(yL)
-.195 G .262(R\(n\) grammar)-3.511 F 3.512(,w)-.52 G .262(here n>1 b)
-3.512 F .262(ut bounded, can be re-written to be)-.26 F 3.354
(LR\(1\). Ho)33.336 705 R(we)-.325 E -.195(ve)-.325 G 1.144 -.52(r, t)
.195 H .104
(he resulting grammar may be more cumbersome, or may not be able to).52
F(capture the meaning of the syntax as ef)33.336 720 Q(fecti)-.325 E
-.195(ve)-.325 G(ly).195 E 6.5(.W)-.845 G 3.25(ec)-7.54 G
(an re-write the abo)-3.25 E .39 -.195(ve t)-.195 H(o:).195 E F3
(stmt: COMMAND '\(' KEYWORD '\)' '\(' IDENT \)'')33.336 732 Q 0 Cg EP
%%Page: 13 13
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 13)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
10/Courier@0 SF 18(|C)45.336 117 S(OMMAND '\(' IDENT '\)')-18 E(;)45.336
129 Q/F2 13/Times-Roman@0 SF 1.55(The abo)33.336 150 R 1.94 -.195(ve t)
-.195 H 1.55(echnique kno).195 F 1.55(wn a)-.325 F/F3 13/Times-Bold@0 SF
(In-lining)4.801 E F2 1.551
(the rules can also be useful in resolving some)4.801 F(mysterious gram\
mar con\215ict problems, as discussed later in this unit.)33.336 165 Q
.299(LR grammars are more po)33.336 186 R .299
(werful than LL grammars, in that the)-.325 F 3.549(yc)-.195 G .299
(an describe a lar)-3.549 F .299(ger set)-.234 F .465(of languages.)
33.336 201 R .465(All LL grammars are LR, b)6.965 F .466
(ut not all LR grammars are LL.)-.26 F .466(LR\(n\), n>1 \(n)6.966 F
1.819(is bounded\) grammars are more e)33.336 216 R(xpressi)-.195 E
2.209 -.195(ve t)-.325 H 1.819(han LR\(1\), b).195 F 1.819(ut the)-.26 F
5.069(yd)-.195 G 5.069(on)-5.069 G 1.819(ot describe more)-5.069 F
(languages, the)33.336 231 Q 3.25(ym)-.195 G
(erely describe them more intuiti)-3.25 E -.195(ve)-.325 G(ly).195 E(.)
-.845 E -1.3(Ya)33.336 252 S 1.323(cc and Bison generate parsers which \
can only handle LR\(1\) grammars, and in f)1.3 F 1.324(act a)-.13 F
2.266(subset of LR\(1\) kno)33.336 267 R 2.265
(wn as LALR\(1\), discussed directly belo)-.325 F 7.205 -.845(w. B)-.325
H 2.265(ison has support for).845 F .378
(generating a parser which can use an LR\(n\) grammar)33.336 282 R 3.628
(,w)-.52 G .378(here n is unbounded, also kno)-3.628 F(wn)-.325 E .98
(as Generalized LR \(GLR\) parsing.)33.336 297 R .98
(GLR grammars are the most e)7.48 F(xpressi)-.195 E 1.369 -.195(ve c)
-.325 H(onte).195 E(xt-free)-.195 E 4.007(grammars. An)33.336 312 R
4.007(yc)-.195 G(onte)-4.007 E .757
(xt-free grammar can be parsed by GLR.)-.195 F(Ho)7.257 E(we)-.325 E
-.195(ve)-.325 G 1.797 -.52(r, t).195 H .757(here is a price).52 F 2.42
(to pay)33.336 327 R 8.92(.A)-.845 G 5.67(tp)-8.92 G 2.42
(oints in the grammar where LR\(1\) w)-5.67 F 2.42
(ould produce a con\215ict, Bison will)-.13 F 1.476
("split" the parser into se)33.336 342 R -.195(ve)-.325 G 1.477
(ral parallel parsers, each taking one of the forks in the road.).195 F
.329(The tok)33.336 357 R .329
(en stream is also cloned and fed to each parallel parser as demanded.)
-.13 F .328(During this)6.828 F 4.757(split, the semantic actions \(see\
 later in this unit\) are not triggered b)33.336 372 R 4.757(ut the)-.26
F 8.008(ya)-.195 G(re)-8.008 E 3.914(remembered. Ev)33.336 387 R .664(e\
ntually a point is reached where a tie-breaking rule can be applied and)
-.195 F 1.202
(one of the parallel parsers is then chosen as the correct one.)33.336
402 R 1.202(At this time, the semantic)7.702 F .315
(actions that the chosen parser w)33.336 417 R .315(ould ha)-.13 F .705
-.195(ve t)-.26 H(ak).195 E .315(en are performed.)-.13 F .315
(This approach breaks the)6.815 F 1.427(coupling between the le)33.336
432 R -.195(xe)-.195 G 4.677(ra).195 G 1.427
(nd semantic actions, and may require push-back of one or)-4.677 F 1.84
(more tok)33.336 447 R 1.84
(ens if the parallel parsers result in rules that e)-.13 F -.325(va)
-.325 G 1.839(luate to dif).325 F 1.839(ferent numbers of)-.325 F
(terminals.)33.336 462 Q .606(Some languages ha)33.336 483 R .996 -.195
(ve s)-.26 H .606
(uch poorly designed syntax and complicated semantic rules \(such).195 F
.829(as C++\) that using GLR parsing is almost ine)33.336 498 R 4.079
(vitable. But)-.325 F(man)4.079 E 4.079(yl)-.195 G .829
(anguages, including C,)-4.079 F 2.068(can be parsed using LALR.)33.336
513 R 2.068(This simpler approach, and \214xing up a fe)8.568 F 5.318
(wc)-.325 G 2.068(orner cases)-5.318 F 1.321
(through a second pass in semantic analysis, is usually easier)33.336
528 R 7.82(.T)-.715 G 1.32(herefore we will not be)-7.82 F(co)33.336 543
Q -.195(ve)-.195 G .864(ring GLR parsing in this course, b).195 F .864
(ut the student is in)-.26 F .864(vited to e)-.52 F .864
(xplore that chapter in)-.195 F(the Bison documentation.)33.336 558 Q F3
(LALR\(1\) parser operation)193.678 588 Q F2 3.923(Most real-w)33.336
624 R 3.922
(orld programming languages can be adequately parsed using a parsing)
-.13 F 1.769(technique kno)33.336 639 R 1.769(wn as LALR\(1\).)-.325 F
1.769(The "Dragon Book" te)8.269 F 1.769(xt contains a full e)-.195 F
1.77(xplanation of)-.195 F(ho)33.336 654 Q 4.533(wt)-.325 G 1.283(he LA\
LR\(1\) parser state machine may be generated automatically from the se\
t of)-4.533 F(rules.)33.336 669 Q 3.848(Ag)33.336 690 S .599(rammar whi\
ch is said to be LALR\(1\) is one which can be parsed by this method, t\
he)-3.848 F(essentials of which are:)33.336 705 Q 3.25<8354>33.336 720 S
(he LALR\(1\) parser is a DF)-3.25 E 3.25(As)-.962 G(tate machine.)-3.25
E 3.25<8345>33.336 735 S
(ach of the states represents one or more LR\(1\) items)-3.25 E 0 Cg EP
%%Page: 14 14
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 14)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF 6.145<8341>33.336 120 S 6.145(nL)-6.145 G 2.895(R\(\
1\) item consists of three things: \(1\) a grammar rule, \(2\) a "curso\
r" which)-6.145 F .927(represents ho)33.336 135 R 4.177(wm)-.325 G .927
(uch of that rule we may ha)-4.177 F 1.317 -.195(ve a)-.26 H .928
(lready seen, \(3\) one or more lookahead).195 F(tok)33.336 150 Q 1.028
(ens to match ag)-.13 F 4.278(ainst. I.e.)-.065 F 4.278(as)4.278 G 1.028
(tate represents what we')-4.278 F 1.418 -.195(ve s)-.65 H 1.028
(een so f).195 F 1.027(ar and what rules it)-.13 F
(might possibly match.)33.336 165 Q 6.502<8341>33.336 180 S 3.252
(ll symbols, both terminals and non-terminals, are represented by inte)
-6.502 F 3.253(ger symbol)-.195 F(numbers.)33.336 195 Q 3.25<8341>33.336
210 S(ll states are represented by inte)-3.25 E(ger state numbers.)-.195
E 5.214<8341>33.336 225 S 1.964(ll rules are represented by inte)-5.214
F 1.964(ger rule numbers.)-.195 F 1.964(When a non-terminal has se)8.464
F -.195(ve)-.325 G(ral).195 E(possible rules, each is gi)33.336 240 Q
-.195(ve)-.325 G 3.25(nad).195 G(istinct rule number)-3.25 E(.)-.715 E
3.535<8354>33.336 255 S .285(he parser maintains a stack of state numbe\
rs, with the top of the stack representing the)-3.535 F
(current state number)33.336 270 Q 6.5(.T)-.715 G
(his stack is initialized by pushing state #0.)-6.5 E 6.491<8354>33.336
285 S 3.24
(here is a lock-step correspondence between states and symbols.)-6.491 F
3.24(The state stack)9.74 F 1.766(therefore can also be vie)33.336 300 R
1.766(wed as a symbol stack.)-.325 F(Ho)8.266 E(we)-.325 E -.195(ve)
-.325 G 2.806 -.52(r, t).195 H 1.766(here is no e).52 F 1.767
(xplicit symbol)-.195 F(stack in the LALR parser)33.336 315 Q(.)-.715 E
4.755(\203Ap)33.336 330 S 1.505(air of 2-dimensional tables are created\
 by the parser generator \(such as Y)-4.755 F -.52(AC)-1.56 G 4.754(Co)
.52 G(r)-4.754 E 1.574(bison\) and these control the state machine.)
33.336 345 R 1.574(The A)8.074 F 1.574
(CTION table describes the action to)-.52 F(tak)33.336 360 Q 5.139(ea)
-.13 G 1.889(fter consuming a tok)-5.139 F 1.889(en from the le)-.13 F
-.195(xe)-.195 G 6.568 -.715(r. I).195 H 5.138(ti).715 G 5.138(si)-5.138
G(nde)-5.138 E -.195(xe)-.195 G 5.138(db).195 G 5.138(yt)-5.138 G(ok)
-5.138 E 1.888(en number and state)-.13 F(number)33.336 375 Q 6.869(.T)
-.715 G .369(he GO)-6.869 F .837 -.234(TO t)-.52 H .369
(able determines what state to enter when a prior state is returned to)
.234 F 1.331(during a reduction action.)33.336 390 R 1.331(It is inde)
7.831 F -.195(xe)-.195 G 4.58(db).195 G 4.58(yt)-4.58 G 1.33
(he prior state number and the rule number)-4.58 F(.)-.715 E(Equi)33.336
405 Q -.325(va)-.325 G(lently).325 E 4.41(,s)-.845 G 1.161(ince each ru\
le is associated with just one left-hand-side non-terminal, we)-4.41 F
(can think of the GO)33.336 420 Q .468 -.234(TO t)-.52 H
(able as being inde).234 E -.195(xe)-.195 G 3.25(db).195 G 3.25(ys)-3.25
G(tate number and symbol.)-3.25 E 1.449
(Bison generates a function called)33.336 450 R/F2 13/Courier@0 SF -1.8
(yyparse)3.799 G F1 1.449(from an input \214le which has a)5.599 F F2
-1.8(.y)3.798 G F1 -.195(ex)5.598 G(tension.).195 E 2.414(The yyparse f\
unction is called once and consumes the entire input \(internally calli\
ng)33.336 465 R(yyle)33.336 480 Q 3.593(xt)-.195 G 3.593(oo)-3.593 G
.343(btain tok)-3.593 F .342(ens from the input stream\) and returns 1 \
if the input is accepted or 0 if)-.13 F(it contains a syntax error)
33.336 495 Q(.)-.715 E(The LALR algorithm as implemented by Bison/Y)
33.336 525 Q(acc follo)-1.3 E(ws, in pseudo-code:)-.325 E 0 Cg EP
%%Page: 15 15
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 15)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
8/Courier@0 SF 1.2(yyparse\(\))33.936 117 S({)33.936 129 Q 1.2
(initialize:)45.936 141 S 1.2(push state 0;)81.936 153 S 1.2
(current_state=0;)81.936 165 S 1.2(token=yylex\(\);)81.936 177 S 1.2
(for\(;;\))81.936 189 S({)81.936 201 Q 1.2
(action=ACTION_TABLE[current_state][token];)129.936 213 S 1.2
(switch\(action\))129.936 225 S({)129.936 237 Q 1.2(case ERROR:)135.936
249 S 1.2(yyerror\(descriptive error message\);)177.936 261 S 1.2
(return 0;)177.936 273 S 1.2(case ACCEPT:)135.936 285 S 1.2(return 1;)
177.936 297 S 1.2(case SHIFT\(new_state\):)135.936 309 S 1.2
(push new_state;)177.936 321 S 1.2(current_state=new_state;)177.936 333
S 1.2(token=yylex\(\);)177.936 345 S 1.2
(/**** SEMANTIC VALUE HANDLING : ***/)177.936 357 S 1.2
(push yylval on the semantic value stack)225.936 369 S 1.2(break;)
177.936 381 S 1.2(case REDUCE\(rule_num\):)135.936 393 S 6 1.2
(nrhs=LENGTH[rule_num]; //how)177.936 405 T 1.2
(many symbols RHS of rule)6 G 1.2(pop nrhs states from the stack)177.936
417 S 1.2(exposed_state=new top of stack)177.936 429 S 1.2
(new_state=GOTO[exposed_state][rule])177.936 441 S 1.2(push new_state)
177.936 453 S 1.2(current_state=new_state)177.936 465 S 1.2
(/**** SEMANTIC VALUE HANDLING : ***/)177.936 477 S 1.2
(execute the embedded semantic action C code)189.936 489 S 1.2
(associated with this rule.)201.936 501 S 1.2
(pop nrhs values from the value stack and replace)189.936 513 S 1.2
(with the new $$ value computed in the embedded code.)201.936 525 S(})
129.936 537 Q(})81.936 549 Q(})33.936 561 Q/F2 13/Times-Roman@0 SF 4.782
<8354>33.336 597 S 1.532(he ERR)-4.782 F 1.532
(OR action means that there is no may to mak)-.52 F 4.783(ef)-.13 G
1.533(urther progress to)-4.783 F -.13(wa)-.325 G 1.533(rds the).13 F
.195(goal symbol.)33.336 612 R .195(The def)6.695 F .195
(ault action is to report the error and halt \(return from yyparse\).)
-.13 F .195(In a)6.695 F(later unit we')33.336 627 Q(ll see ho)-.13 E
3.25(wt)-.325 G 3.25(om)-3.25 G(odify this action to allo)-3.25 E 3.25
(we)-.325 G(rror reco)-3.25 E -.195(ve)-.195 G(ry).195 E(.)-.845 E 4.59
<8354>33.336 642 S 1.34(he A)-4.59 F 1.341(CCEPT action occurs when the\
 parser is in state 0 and the look-ahead tok)-.52 F 1.341(en is)-.13 F
/F3 13/Courier@0 SF($end)33.336 657 Q F2 3.25(,t)C(he end of input.)
-3.25 E/F4 13/Times-Bold@0 SF(Canonical LR\(1\) vs LALR\(1\))186.268 687
Q F2 1.204(The LALR\(1\) method is a re\214nement of what the te)33.336
723 R 1.204(xt calls "Canonical LR\(1\) parsing.")-.195 F .998
(The latter produces a lar)33.336 738 R .998(ge number of states and v)
-.234 F .998(ery lar)-.195 F .998(ge A)-.234 F .999(CTION and GO)-.52 F
1.467 -.234(TO t)-.52 H(ables.).234 E 0 Cg EP
%%Page: 16 16
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 16)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF 1.126
(LALR combines states which share certain properties.)33.336 120 R -1.04
(We)7.626 G -.13('l)1.04 G 4.376(ls).13 G 1.126
(ee later that in some rare)-4.376 F
(cases, this causes a problem and a grammar can be LR\(1\) b)33.336 135
Q(ut f)-.26 E(ail to be LALR\(1\).)-.13 E/F2 13/Times-Bold@0 SF
(Running Bison)225.97 165 Q F1 1.173(Let us use the follo)33.336 201 R
1.173(wing simple grammar and see what bison does with it, by using the)
-.325 F/F3 13/Courier@0 SF(-v)33.336 216 Q F1(option and e)3.25 E
(xamining the .output \214le:)-.195 E/F4 10/Courier@0 SF
(/* Grammar 5 */)33.336 228 Q(%token NUM)33.336 240 Q(%%)33.336 252 Q 12
(expr: '\(')33.336 264 R(expr '\)')6 E 6(|N)81.336 276 S(UM)-6 E 6(|N)
81.336 288 S(UM '+' NUM)-6 E(;)81.336 300 Q(%%)33.336 312 Q F1 .88
(Bison internalizes the rules, gi)33.336 333 R .879
(ving them a number and adding a rule 0 which represents)-.325 F
(the entire language:)33.336 348 Q F4 6(0$)57.336 360 S
(accept: expr $end)-6 E 6(1e)57.336 384 S(xpr: '\(' expr '\)')-6 E 30
(2|)57.336 396 S(NUM)-24 E 30(3|)57.336 408 S(NUM '+' NUM)-24 E F1 3.862
-1.04(We w)33.336 429 T 1.782(ill use bison')1.04 F 5.032(sn)-.715 G
1.783(otation of a . character to represent the cursor which tracks ho)
-5.032 F(w)-.325 E .728(much of a gi)33.336 444 R -.195(ve)-.325 G 3.978
(nr).195 G .727(ule we ha)-3.978 F 1.117 -.195(ve a)-.26 H .727
(lready consumed.).195 F .727(In the initial state 0, we ha)7.227 F
1.117 -.195(ve n)-.26 H .727(ot seen).195 F(an)33.336 459 Q 3.25(yi)
-.195 G 3.25(nput. Therefore:)-3.25 F F4(state 0)33.336 471 Q 6(0$)
57.336 495 S(accept: . expr $end)-6 E 6(NUM shift,)57.336 519 R
(and go to state 1)6 E 6('\(' shift,)57.336 531 R(and go to state 2)6 E
6(expr go)57.336 555 R(to state 3)6 E F1 .529(The line after "state 0" \
tells us the place \(or places\) we could possibly be in.)33.336 576 R
.53(Here, there)7.03 F 1.525(is only one possible place, before the be)
33.336 591 R 1.525(ginning of the top-le)-.195 F -.195(ve)-.325 G 4.774
(ls).195 G 4.774(ymbol. This)-4.774 F 1.524(place is)4.774 F 2.206
(associated with rule #0.)33.336 606 R 2.207(Had the)8.707 F F3
(--report=all)5.457 E F1 2.207(option been gi)5.457 F -.195(ve)-.325 G
2.207(n, the output \214le).195 F -.13(wo)33.336 621 S
(uld list all possible places we could be, including deri).13 E -.195
(ve)-.325 G 3.25(dp).195 G(laces:)-3.25 E F4(state 0)33.336 633 Q 6(0$)
57.336 657 S(accept: . expr $end)-6 E 6(1e)57.336 669 S
(xpr: . '\(' expr '\)')-6 E 30(2|)57.336 681 S 6(.N)-24 G(UM)-6 E 30(3|)
57.336 693 S 6(.N)-24 G(UM '+' NUM)-6 E 6(NUM shift,)57.336 717 R
(and go to state 1)6 E 6('\(' shift,)57.336 729 R(and go to state 2)6 E
0 Cg EP
%%Page: 17 17
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 17)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
10/Courier@0 SF 6(expr go)57.336 117 R(to state 3)6 E/F2 13
/Times-Roman@0 SF .618(This is the dif)33.336 132 R .617
(ference between what is kno)-.325 F .617
(wn in LR parser theory as the entire set of LR)-.325 F .645
(items vs just the k)33.336 147 R 3.895(ernel. It)-.13 F .645
(is a property of LALR\(1\) parsers that each state is associated)3.895
F(uniquely with a particular set of k)33.336 162 Q(ernel items.)-.13 E
1.885(After the blank line, the ne)33.336 183 R 1.885
(xt group of lines gi)-.195 F 2.275 -.195(ve t)-.325 H 1.885
(he possible actions for tok).195 F 5.135(ens. If)-.13 F(a)5.135 E(tok)
33.336 198 Q .772
(en other than one of those listed is encountered, this produces an ERR)
-.13 F .773(OR action.)-.52 F(In)10.523 E 1.43
(some cases, it is possible to mak)33.336 213 R 4.68(ear)-.13 G 1.43
(eduction without looking at the ne)-4.68 F 1.43(xt tok)-.195 F 1.43
(en, and a)-.13 F 1.326(special tok)33.336 228 R(en)-.13 E/F3 13
/Courier@0 SF($default)4.577 E F2 1.327(will appear in the listing.)
4.577 F 1.327(This is equi)7.827 F -.325(va)-.325 G 1.327
(lent to a wildcard in).325 F .264(the A)33.336 243 R .264(CTION table.)
-.52 F .263(The last group of lines gi)6.764 F .653 -.195(ve t)-.325 H
.263(he GO).195 F .731 -.234(TO a)-.52 H .263(ctions if this state is e)
.234 F(xposed)-.195 E 1.361(after a reduction.)33.336 258 R 1.361
(These are listed by the symbol which has been reduced.)7.861 F(Ef)7.861
E(fecti)-.325 E -.195(ve)-.325 G(ly).195 E(,)-.845 E 1.152(the GO)33.336
273 R 1.62 -.234(TO t)-.52 H 1.152
(able tells us what state to go to after the cursor dot has adv).234 F
1.151(anced through a)-.325 F(non-terminal.)33.336 288 Q(Let')33.336 309
Q 6.015(st)-.715 G 2.765
(race out the steps which the Bison LALR parser generator algorithm tak)
-6.015 F 2.765(es in)-.13 F 1.856(constructing the states and tables.)
33.336 324 R 1.855(In state 0, there are tw)8.355 F 5.105(op)-.13 G
1.855(ossible tok)-5.105 F 1.855(ens which can)-.13 F(occur ne)33.336
339 Q(xt and be v)-.195 E(alid, NUM and \(.)-.325 E
(These lead to states 1 and 2 respecti)6.5 E -.195(ve)-.325 G(ly:).195 E
F1(state 1)33.336 351 Q 6(2e)57.336 375 S(xpr: NUM .)-6 E 30(3|)57.336
387 S(NUM . '+' NUM)-24 E 6('+' shift,)57.336 411 R(and go to state 4)6
E 6($default reduce)57.336 435 R(using rule 2 \(expr\))6 E F2(Ha)33.336
456 Q .627(ving reached state 1 by ha)-.26 F .628
(ving seen a NUM, a '+' tok)-.26 F .628(en w)-.13 F .628
(ould lead us to belie)-.13 F 1.018 -.195(ve t)-.325 H(hat).195 E .909
(we are in the middle of rule #3, as depicted by the cursor dot.)33.336
471 R .908(But an)7.408 F 4.158(yo)-.195 G .908(ther lookahead)-4.158 F
(tok)33.336 486 Q .236(en \(the)-.13 F F3($default)3.486 E F2 .236
(action\) w)3.486 F .236(ould lead us to belie)-.13 F .627 -.195(ve t)
-.325 H .237(hat we ha).195 F .627 -.195(ve j)-.26 H .237
(ust seen an instance).195 F 1.35(of rule #2.)33.336 501 R 1.35
(Note that there is no GO)7.85 F 1.818 -.234(TO a)-.52 H 1.35
(ction in state 1, because the cursor dot is not).234 F
(positioned directly to the left of an)33.336 516 Q 3.25(yn)-.195 G
(on-terminal in an)-3.25 E 3.25(yo)-.195 G 3.25(ft)-3.25 G
(he rules included in that state.)-3.25 E(State 2 is reached after ha)
33.336 537 Q(ving seen a '\(':)-.26 E F1(state 2)33.336 549 Q 6(1e)
57.336 573 S(xpr: '\(' . expr '\)')-6 E 6(NUM shift,)57.336 597 R
(and go to state 1)6 E 6('\(' shift,)57.336 609 R(and go to state 2)6 E
6(expr go)57.336 633 R(to state 5)6 E F2 3.003 -1.04(We a)33.336 654 T
.923(re almost in the same boat as state 0.)1.04 F 3.004 -1.04(We a)
7.424 H .924(re be)1.04 F .924(ginning a ne)-.195 F(w)-.325 E F3(expr)
4.174 E F2 4.174(,a)C .924(nd thus the)-4.174 F .248(same tok)33.336 669
R .248(ens are v)-.13 F .248
(alid and lead to the same actions as in state 0.)-.325 F(Let')6.747 E
3.497(sf)-.715 G(ollo)-3.497 E 3.497(wf)-.325 G .247(rom state 1)-3.497
F(to state 4:)33.336 684 Q F1(state 4)33.336 696 Q 6(3e)57.336 720 S
(xpr: NUM '+' . NUM)-6 E 0 Cg EP
%%Page: 18 18
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 18)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
10/Courier@0 SF 6(NUM shift,)57.336 117 R(and go to state 7)6 E/F2 13
/Times-Roman@0 SF(Ag)33.336 138 Q(ain, NUM is the only v)-.065 E
(alid tok)-.325 E 3.25(en. If)-.13 F(we see it, then we go to state 7:)
3.25 E F1(state 7)33.336 150 Q 6(3e)57.336 174 S(xpr: NUM '+' NUM .)-6 E
6($default reduce)57.336 198 R(using rule 3 \(expr\))6 E F2 .609
(In state 7, it doesn')33.336 219 R 3.859(tm)-.234 G .609
(atter what the look-ahead tok)-3.859 F .609(en is, we al)-.13 F -.13
(wa)-.13 G .61(ys perform this def).13 F(ault)-.13 E 4.07
(reduction. One)33.336 234 R .82(might ask wh)4.07 F 4.07(yt)-.065 G .82
(he state e)-4.07 F 4.07(xists? Wh)-.195 F 4.07(yn)-.065 G .82
(ot simply reduce in state 4?)-4.07 F(The)7.319 E .208
(answer is that the parser must preserv)33.336 249 R 3.458(et)-.195 G
.208(he one-to-one correspondence between states and)-3.458 F 5.39
(symbols. In)33.336 264 R 2.14(order to perform a reduction)5.39 F/F3 13
/Courier@0 SF 2.139(expr: NUM '+' NUM)5.389 F F2 5.389(,w)C 2.139
(hich has 3 rhs)-5.389 F .657
(symbols, there must be 3 corresponding states on the stack.)33.336 279
R .658(Thus we shift in state 4 and)7.157 F 2.052(push another state \(\
state 7\) on the stack, "representing" the second instance of NUM.)
33.336 294 R 1.914
(Then we pop 3 symbols from the stack during the reduction, and we ha)
33.336 309 R 2.304 -.195(ve r)-.26 H 1.914(educed to).195 F F3(expr)
33.336 324 Q F2 7.795(.W)C 1.295(here can)-7.795 F F3(expr)4.545 E F2
1.295(be found in a GO)4.545 F 1.763 -.234(TO a)-.52 H 4.545(ction? It)
.234 F 1.295(can be found in state 2 or in)4.545 F .665(state 0.)33.336
339 R .665(In both cases, we see that the cursor w)7.165 F .665
(as immediately to the left of)-.13 F F3(expr)3.916 E F2 .666(in the)
3.916 F .687(rule, and no)33.336 354 R 3.937(ww)-.325 G .687
(hen we return back to that state, ha)-3.937 F .686(ving reduced)-.26 F
F3(expr)3.936 E F2 3.936(,i)C 3.936(ti)-3.936 G 3.936(so)-3.936 G .686
(nly logical)-3.936 F(that we adv)33.336 369 Q
(ance to a state where the cursor has stepped past)-.325 E F3(expr)3.25
E F2(:)A F1(state 3)33.336 381 Q 6(0$)57.336 405 S(accept: expr . $end)
-6 E 6($end shift,)57.336 429 R(and go to state 6)6 E(state 5)33.336 453
Q 6(1e)57.336 477 S(xpr: '\(' expr . '\)')-6 E 6('\)' shift,)57.336 501
R(and go to state 8)6 E F2(In state 3, we must see)33.336 534 Q F3($end)
3.25 E F2 3.25(,t)C(he end of input.)-3.25 E(This w)6.5 E(ould tak)-.13
E 3.25(eu)-.13 G 3.25(st)-3.25 G 3.25(os)-3.25 G(tate 6:)-3.25 E F1
(state 6)33.336 546 Q 6(0$)57.336 570 S(accept: expr $end .)-6 E 6
($default accept)57.336 594 R F2 1.845
(in which the only action is to accept the input.)33.336 609 R(Ag)8.345
E 1.845(ain, the parser appears to mak)-.065 F 5.096(ea)-.13 G(n)-5.096
E -.195(ex)33.336 624 S .941(traneous mo).195 F 1.331 -.195(ve \()-.195
H(wh).195 E 4.191(yn)-.065 G .941
(ot simply accept in state 3?\) and this is to maintain consistenc)
-4.191 F(y)-.195 E(of the stack.)33.336 639 Q 1.029
(Looking at state 5, ha)33.336 669 R 1.029(ving seen)-.26 F F3(expr)
4.279 E F2(follo)4.279 E 1.029(wing '\(', the only v)-.325 F 1.03
(alid tok)-.325 F 1.03(en is '\)', and that)-.13 F
(will lead to state 8:)33.336 684 Q F1(state 8)33.336 696 Q 6(1e)57.336
720 S(xpr: '\(' expr '\)' .)-6 E 0 Cg EP
%%Page: 19 19
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 19)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
10/Courier@0 SF 6($default reduce)57.336 117 R(using rule 1 \(expr\))6 E
/F2 13/Times-Roman@0 SF(in which the def)33.336 132 Q
(ault action for an)-.13 E 3.25(yt)-.195 G(ok)-3.25 E
(en is to reduce by rule #1.)-.13 E 4.217 -1.04(We h)33.336 153 T -2.925
-.26(av e)1.04 H(no)5.647 E 5.387(ws)-.325 G 2.137
(een all 8 states generated by this grammar)-5.387 F 8.636(.T)-.715 G
2.136(he A)-8.636 F 2.136(CTION and GO)-.52 F -.234(TO)-.52 G
(tables may be summarized:)33.336 168 Q/F3 8/Courier@0 SF 1.2
(ACTION TABLE)129.936 180 S 1.2(GOTO TABLE)168 G 6 1.2(Sym: NUM)45.936
192 T 43.2(+\($)30 G 18 1.2(end \))-42 H 1.2(expr)90 G 1.2(State)33.936
204 S 43.2(0S)33.936 216 S 37.2(1e)-42 G 24 1.2(rr S2)-36 H 24 1.2
(err err)36 H 1.2(GOTO3)78 G 43.2(1R)33.936 228 S 37.2(2S)-42 G 37.2(4R)
-36 G 37.2(2R)-36 G 37.2(2R)-36 G 85.2(2n)-36 G 1.2(/a)-84 G 43.2(2S)
33.936 240 S 37.2(1e)-42 G 24 1.2(rr S2)-36 H 24 1.2(err err)36 H 1.2
(GOTO5)78 G 43.2(3e)33.936 252 S 24 1.2(rr err err S6)-42 H 72 1.2
(err n/a)36 H 43.2(4S)33.936 264 S 37.2(7e)-42 G 24 1.2(rr err err err)
-36 H 1.2(n/a)78 G 43.2(5e)33.936 276 S 24 1.2(rr err err err S8)-42 H
1.2(n/a)84 G 43.2(6a)33.936 288 S 6 1.2
(ccept accept accept accept accept)-42 H 1.2(n/a)60 G 43.2(7R)33.936 300
S 37.2(3R)-42 G 37.2(3R)-36 G 37.2(3R)-36 G 37.2(3R)-36 G 85.2(3n)-36 G
1.2(/a)-84 G 43.2(8R)33.936 312 S 37.2(1R)-42 G 37.2(1R)-36 G 37.2(1R)
-36 G 37.2(1R)-36 G 85.2(1n)-36 G 1.2(/a)-84 G F2 3.25(As)33.336 333 S
(tate transition diagram:)-3.25 E 0 0 309 309 -211 211 112.836 565
PBEGIN
%%BeginDocument: g2.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: g2.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Wed Feb 24 01:05:08 2010
%%For: hak@lex ()
%%BoundingBox: 0 0 309 211
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 211 moveto 0 0 lineto 309 0 lineto 309 211 lineto closepath clip newpath
-147.3 296.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 50
% Ellipse
7.500 slw
n 2700 2100 237 237 0 360 DrawEllipse gs col0 s gr

/Times-Roman ff 200.00 scf sf
2700 2175 m
gs 1 -1 sc (0) dup sw pop 2 div neg 0 rm  col0 sh gr
% Ellipse
n 4200 2100 237 237 0 360 DrawEllipse gs col0 s gr

/Times-Roman ff 200.00 scf sf
4200 2175 m
gs 1 -1 sc (1) dup sw pop 2 div neg 0 rm  col0 sh gr
% Ellipse
n 4200 3225 237 237 0 360 DrawEllipse gs col0 s gr

/Times-Roman ff 200.00 scf sf
4200 3300 m
gs 1 -1 sc (2) dup sw pop 2 div neg 0 rm  col0 sh gr
% Ellipse
n 5700 2100 237 237 0 360 DrawEllipse gs col0 s gr

/Times-Roman ff 200.00 scf sf
5700 2175 m
gs 1 -1 sc (4) dup sw pop 2 div neg 0 rm  col0 sh gr
% Ellipse
n 5775 3075 237 237 0 360 DrawEllipse gs col0 s gr

/Times-Roman ff 200.00 scf sf
5775 3150 m
gs 1 -1 sc (3) dup sw pop 2 div neg 0 rm  col0 sh gr
% Ellipse
n 5925 4200 237 237 0 360 DrawEllipse gs col0 s gr

/Times-Roman ff 200.00 scf sf
5925 4275 m
gs 1 -1 sc (5) dup sw pop 2 div neg 0 rm  col0 sh gr
% Ellipse
n 7200 3075 237 237 0 360 DrawEllipse gs col0 s gr

/Times-Roman ff 200.00 scf sf
7200 3150 m
gs 1 -1 sc (6) dup sw pop 2 div neg 0 rm  col0 sh gr
% Ellipse
n 7350 2100 237 237 0 360 DrawEllipse gs col0 s gr

/Times-Roman ff 200.00 scf sf
7350 2175 m
gs 1 -1 sc (7) dup sw pop 2 div neg 0 rm  col0 sh gr
% Ellipse
n 7350 4200 237 237 0 360 DrawEllipse gs col0 s gr

/Times-Roman ff 200.00 scf sf
7350 4275 m
gs 1 -1 sc (8) dup sw pop 2 div neg 0 rm  col0 sh gr
% Arc
gs  clippath
3997 3399 m 3980 3341 l 3835 3385 l 3959 3380 l 3852 3442 l cp
eoclip
n 3996.4 3685.7 311.5 -49.2 -93.9 arc
gs col0 s gr
 gr

% arrowhead
n 3852 3442 m 3959 3380 l 3835 3385 l  col0 s
% Ellipse
n 7200 3075 309 309 0 360 DrawEllipse gs col0 s gr

% Polyline
gs  clippath
3990 2130 m 3990 2070 l 3838 2070 l 3958 2100 l 3838 2130 l cp
eoclip
n 2925 2100 m
 3975 2100 l gs col0 s gr gr

% arrowhead
n 3838 2130 m 3958 2100 l 3838 2070 l  col0 s
% Polyline
gs  clippath
3969 3183 m 4004 3134 l 3882 3044 l 3962 3140 l 3847 3093 l cp
eoclip
n 2850 2325 m
 3975 3150 l gs col0 s gr gr

% arrowhead
n 3847 3093 m 3962 3140 l 3882 3044 l  col0 s
% Polyline
gs  clippath
5490 2130 m 5490 2070 l 5338 2070 l 5458 2100 l 5338 2130 l cp
eoclip
n 4500 2100 m
 5475 2100 l gs col0 s gr gr

% arrowhead
n 5338 2130 m 5458 2100 l 5338 2070 l  col0 s
% Polyline
 [60] 0 sd
gs  clippath
5481 2957 m 5497 2900 l 5351 2860 l 5459 2921 l 5335 2918 l cp
eoclip
n 3000 2250 m
 5475 2925 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 5335 2918 m 5459 2921 l 5351 2860 l  col0 s
% Polyline
gs  clippath
4230 2310 m 4170 2310 l 4170 2462 l 4200 2342 l 4230 2462 l cp
eoclip
n 4200 3000 m
 4200 2325 l gs col0 s gr gr

% arrowhead
n 4230 2462 m 4200 2342 l 4170 2462 l  col0 s
% Polyline
 [60] 0 sd
gs  clippath
5620 4233 m 5654 4183 l 5529 4098 l 5611 4191 l 5495 4147 l cp
eoclip
n 4425 3375 m
 5625 4200 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 5495 4147 m 5611 4191 l 5529 4098 l  col0 s
% Polyline
gs  clippath
6915 3105 m 6915 3045 l 6763 3045 l 6883 3075 l 6763 3105 l cp
eoclip
n 6000 3075 m
 6900 3075 l gs col0 s gr gr

% arrowhead
n 6763 3105 m 6883 3075 l 6763 3045 l  col0 s
% Polyline
gs  clippath
7065 2130 m 7065 2070 l 6913 2070 l 7033 2100 l 6913 2130 l cp
eoclip
n 5925 2100 m
 7050 2100 l gs col0 s gr gr

% arrowhead
n 6913 2130 m 7033 2100 l 6913 2070 l  col0 s
% Polyline
gs  clippath
7140 4230 m 7140 4170 l 6988 4170 l 7108 4200 l 6988 4230 l cp
eoclip
n 6225 4200 m
 7125 4200 l gs col0 s gr gr

% arrowhead
n 6988 4230 m 7108 4200 l 6988 4170 l  col0 s
% Polyline
 [60] 0 sd
gs  clippath
2816 1945 m 2866 1979 l 2950 1852 l 2859 1936 l 2900 1819 l cp
eoclip
n 7275 1875 m 6975 1725 l 3000 1725 l
 2850 1950 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 2900 1819 m 2859 1936 l 2950 1852 l  col0 s
% Polyline
 [60] 0 sd
gs  clippath
4362 3418 m 4317 3458 l 4417 3571 l 4361 3462 l 4462 3532 l cp
eoclip
n 7350 4425 m 7350 4725 l 5475 4725 l
 4350 3450 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 4462 3532 m 4361 3462 l 4417 3571 l  col0 s
% Polyline
 [60] 0 sd
gs  clippath
2910 2220 m 2910 2280 l 3062 2280 l 2942 2250 l 3062 2220 l cp
eoclip
n 4050 2250 m
 2925 2250 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 3062 2220 m 2942 2250 l 3062 2280 l  col0 s
/Times-Roman ff 200.00 scf sf
3375 1950 m
gs 1 -1 sc (NUM) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
3375 2625 m
gs 1 -1 sc (\() dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
5025 1950 m
gs 1 -1 sc (+) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
4650 2625 m
gs 1 -1 sc (expr) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
4500 3000 m
gs 1 -1 sc (NUM) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
3675 4050 m
gs 1 -1 sc (\() dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
6300 2925 m
gs 1 -1 sc ($end) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
6450 2025 m
gs 1 -1 sc (NUM) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
6600 4050 m
gs 1 -1 sc (\)) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
4950 3600 m
gs 1 -1 sc (expr) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
5850 4875 m
gs 1 -1 sc (expr: \( expr \)) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
5925 1575 m
gs 1 -1 sc (expr: NUM + NUM) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 166.67 scf sf
3300 2250 m
gs 1 -1 sc (expr:NUM) dup sw pop 2 div neg 0 rm  col0 sh gr
% here ends figure;
$F2psEnd
rs
showpage
%%EndDocument
end PEND 3.214(Let us follo)33.336 586 R 6.464(wt)-.325 G 3.214
(he operation of the parser when the input is)-6.464 F/F4 13/Courier@0
SF 11.014(\(\(N)6.464 G 3.214(UM \) \))-11.014 F F2 9.715(.T)C(o)-10.755
E .022(disambiguate which tok)33.336 601 R .021(en is which, we')-.13 F
.021(ll call the \214rst left paren \(1 and the second one \(2,)-.13 F
(etc.)33.336 616 Q F3 1.2(State stack)33.936 628 S 60 1.2(token action)
30 H 91.2(0\()33.936 640 S 85.2(1S)-90 G 1.2(HIFT\(2\))-84 G 60 7.2
(02 \()33.936 652 T 85.2(2S)-6 G 1.2(HIFT\(2\))-84 G 48 7.2(022 N)33.936
664 T 72 1.2(UM SHIFT\(1\))-6 H 36 7.2(0221 \))33.936 676 T 85.2(1R)-6 G
6 1.2(EDUCE\(2\) expr:)-84 H 1.2(NUM)6 G 48 7.2(022 \))33.936 688 T 85.2
(1G)-6 G 1.2(OTO \(2,expr\)==>5)-84 G 36 7.2(0225 \))33.936 700 T 85.2
(1S)-6 G 1.2(HIFT\(8\))-84 G 24 7.2(02258 \))33.936 712 T 85.2(2R)-6 G
1.2(EDUCE\(1\) expr: \( expr \))-84 G 60 7.2(02 \))33.936 724 T 85.2(2G)
-6 G 1.2(OTO \(2,expr\)==>5)-84 G 48 7.2(025 \))33.936 736 T 85.2(2S)-6
G 1.2(HIFT\(8\))-84 G 0 Cg EP
%%Page: 20 20
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 20)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
8/Courier@0 SF 36 7.2(0258 $)33.936 117 T 66 1.2(end REDUCE\(1\))-6 H
1.2(expr: \( expr \))6 G 91.2(0$)33.936 129 S 66 1.2(end GOTO)-90 H 1.2
(\(0,expr\)==>3)6 G 60 7.2(03 $)33.936 141 T 66 1.2(end SHIFT\(6\))-6 H
144 7.2(036 A)33.936 153 T 1.2(CCEPT)-6 G/F2 13/Times-Roman@0 SF 3.954
-1.04(We s)33.336 174 T 1.874(ee that the LALR parser made as man)1.04 F
5.124(ys)-.195 G 1.875(hifts as there were input tok)-5.124 F 1.875
(ens, and as)-.13 F(man)33.336 189 Q 7.179(yr)-.195 G 3.928
(eductions as there were non-terminals in the deri)-7.179 F -.325(va)
-.325 G 7.178(tion. From).325 F 3.928(this we can)7.178 F(conclude that\
 the LALR parser operates in linear time with respect to input length.)
33.336 204 Q/F3 13/Times-Bold@0 SF(Lists)253.972 234 Q F2(Ho)33.336 264
Q 3.919(ww)-.325 G .67(ould we write a grammar for a list of identi\214\
ers delimited by commas?)-4.049 F .67(One w)7.17 F(ay)-.13 E(is:)33.336
279 Q/F4 10/Courier@0 SF(id_list:)33.336 291 Q(ID)90.936 303 Q
(|id_list ',' ID)90.936 315 Q F2(vs:)33.336 330 Q F4(id_list:)33.336 342
Q(ID)90.936 354 Q(|ID ',' id_list)90.936 366 Q F2 .285(In LL parsing th\
e \214rst form is not acceptable since it is left-recursi)33.336 381 R
-.195(ve)-.325 G 6.784(.B).195 G .284(ut in LR parsing,)-6.784 F 1.536
(the second form, while usable, is sub-optimal.)33.336 396 R 1.536
(When f)8.036 F 1.536(aced with a right-recursi)-.13 F 1.927 -.195(ve r)
-.325 H(ule,).195 E .359
(the LR parser must shift the entire sequence of tok)33.336 411 R .358
(ens making up that list, and then mak)-.13 F(e)-.13 E 3.431(as)33.336
426 S .181(eries of reductions.)-3.431 F .181
(Since the list is potentially unbounded, this might o)6.681 F -.195(ve)
-.195 G(r\215o).195 E 3.431(wt)-.325 G .182(he LR)-3.431 F .804
(parser stack.)33.336 441 R -.195(Fo)7.304 G 4.054(rt).195 G .804
(his reason, lists are almost al)-4.054 F -.13(wa)-.13 G .804
(ys written in left-recursi).13 F 1.194 -.195(ve f)-.325 H .804
(orm when).195 F(intended for LR parsing.)33.336 456 Q F3(Con\215icts)
242.779 486 Q F2 .322(If, in a particular state, the LALR\(1\) parser g\
enerated by yacc or bison can not determine)33.336 522 R .644
(what action to tak)33.336 537 R 3.894(eb)-.13 G .644
(ased on the single lookahead tok)-3.894 F .643
(en, then there is a "con\215ict" in that)-.13 F 3.25(state. Con\215ict)
33.336 552 R(comes in tw)3.25 E 3.25(of)-.13 G(orms:)-3.25 E 4.467<8353>
33.336 567 S 1.218
(hift/Reduce: The input seen up to this point matches a rule, b)-4.467 F
1.218(ut the lookahead tok)-.26 F(en)-.13 E(gi)33.336 582 Q -.195(ve)
-.325 G 3.337(sp).195 G .086
(romise that we could continue to shift it \(and possibly more tok)
-3.337 F .086(ens\) and e)-.13 F -.195(ve)-.325 G(ntually).195 E
(match a dif)33.336 597 Q(ferent, "better" rule.)-.325 E 4.209<8352>
33.336 612 S .959(educe/Reduce: There are tw)-4.209 F 4.209(oo)-.13 G
4.209(rm)-4.209 G .96(ore rules which match the input seen thus f)-4.209
F(ar)-.13 E 4.21(,a)-.52 G(nd)-4.21 E(the lookahead tok)33.336 627 Q
(en doesn')-.13 E 3.25(th)-.234 G
(elp us in determining which one to apply)-3.25 E(.)-.845 E 1.005(Con\
\215icts may arise because the grammar as written is truly ambiguous, o\
r the grammar)33.336 648 R .977(may be perfectly clear b)33.336 663 R
.978(ut it f)-.26 F .978(ails to meet the criteria for LALR\(1\).)-.13 F
.978(yacc/bison resolv)7.478 F(es)-.195 E 4.758
(shift/reduce con\215icts in f)33.336 678 R -.26(avo)-.13 G 8.008(ro).26
G 8.008(fs)-8.008 G 4.758
(hifting \(unless some other means of resolution)-8.008 F -.195(ove)
33.336 693 S 1.308(rrides\), and considers these to be a w).195 F 4.558
(arning. Ho)-.13 F(we)-.325 E -.195(ve)-.325 G 2.349 -.52(r, r).195 H
1.309(educe/reduce con\215icts ha).52 F -.195(ve)-.26 G .782(no def)
33.336 708 R .782(ault resolution because it isn')-.13 F 4.032(tc)-.234
G .782(lear which semantic action to trigger)-4.032 F 7.282(.B)-.715 G
.782(ison picks)-7.282 F .661(the \214rst rule mentioned, b)33.336 723 R
.661(ut this is almost certainly not what you w)-.26 F 3.912(ant. It)
-.13 F .662(is a good idea)3.912 F 2.211(to eliminate all shift/reduce \
or reduce/reduce con\215icts, using the techniques described)33.336 738
R 0 Cg EP
%%Page: 21 21
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 21)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF(belo)33.336 120 Q -.845(w.)-.325 G/F2 13
/Times-Bold@0 SF(Operator Pr)208.433 150 Q(ecedence)-.234 E F1
(Consider this e)33.336 186 Q(xpression grammar:)-.195 E/F3 10/Courier@0
SF(/* Grammar 6 */)33.336 198 Q(%token NUM)33.336 210 Q(%%)33.336 222 Q
12(expr: NUM)33.336 234 R 24(|e)51.336 246 S(xpr '+' expr)-24 E 24(|e)
51.336 258 S(xpr '-' expr)-24 E 24(|e)51.336 270 S(xpr '/' expr)-24 E 24
(|e)51.336 282 S(xpr '*' expr)-24 E 24(|')51.336 294 S(\(' expr '\)')-24
E F1 .532(running this through bison yields 4 states with 4 shift/reduc\
e con\215icts each, for a total of)33.336 315 R 6.568(16. Let')33.336
330 R 3.318(sl)-.715 G .068(ook in the)-3.318 F/F4 13/Courier@0 SF
(.output)3.317 E F1 .067(\214le created by)3.317 F F4 .067
(bison -v --report=look-ahead)3.317 F F1
(at one of the con\215icting states:)33.336 345 Q F3(state 14)33.336 357
Q 6(2e)57.336 381 S(xpr: expr . '+' expr)-6 E 30(3|)57.336 393 S
(expr . '-' expr)-24 E 30(4|)57.336 405 S(expr . '/' expr)-24 E 30(5|)
57.336 417 S(expr . '*' expr)-24 E 30(5|)57.336 429 S(expr '*' expr .)
-24 E([$end, '+', '-', '/', '*', '\)'])12 E 6('+' shift,)57.336 453 R
(and go to state 6)6 E 6('-' shift,)57.336 465 R(and go to state 7)6 E 6
('/' shift,)57.336 477 R(and go to state 8)6 E 6('*' shift,)57.336 489 R
(and go to state 9)6 E 36('+' [reduce)57.336 513 R
(using rule 5 \(expr\)])6 E 36('-' [reduce)57.336 525 R
(using rule 5 \(expr\)])6 E 36('/' [reduce)57.336 537 R
(using rule 5 \(expr\)])6 E 36('*' [reduce)57.336 549 R
(using rule 5 \(expr\)])6 E 6($default reduce)57.336 561 R
(using rule 5 \(expr\))6 E F1 .38(Consider the input)33.336 582 R F4
(2*3+4)3.63 E F1 .38(at the point of reaching the +.)3.63 F .38
(The parser will see 2, reduce it)6.88 F 2.11(to e)33.336 597 R(xpr)
-.195 E 5.36(,s)-.52 G 2.11(hift the *, see 3 and reduce that to e)-5.36
F(xpr)-.195 E 8.609(.N)-.715 G -.325(ow)-8.609 G 5.359(,w)-.52 G(e)
-5.359 E/F5 13/Times-Italic@0 SF(could)5.359 E F1 2.109(be at)5.359 F F4
2.109(expr '*')5.359 F 2.007(expr .)33.336 612 R F1 2.008
(in which case we should reduce to e)5.257 F(xpr)-.195 E 8.508(.H)-.715
G -.325(ow)-8.508 G -2.795 -.325(ev e).325 H 3.048 -.52(r, w).325 H(e)
.52 E F5(could)5.258 E F1 2.008(also be in the)5.258 F .493(middle of)
33.336 627 R F4 .493(expr . '+' expr)3.743 F F1 3.743(,i)C 3.742(nw)
-3.743 G .492(hich case we should shift the + and continue.)-3.742 F
(The)6.992 E 1.641(precedence is not de\214ned in the grammar)33.336 642
R 4.891(,w)-.52 G 1.641(hich gi)-4.891 F -.195(ve)-.325 G 4.891(sr).195
G 1.641(ise to this shift/reduce con\215ict)-4.891 F 1.449
(between Shifting to state 6 and Reducing with rule 5.)33.336 657 R
4.698(As)7.948 G 1.448(imilar precedence con\215ict is)-4.698 F
(seen on the)33.336 672 Q(Lik)33.336 702 Q -.325(ew)-.13 G .211
(ise, there w).325 F .211(ould be an associati)-.13 F .211
(vity con\215ict in an e)-.325 F .211(xpression lik)-.195 F(e)-.13 E F4
(2*3*4)3.461 E F1 .211(which can)3.461 F
(be seen with Shift-9 vs Reduce-5 on the '*' tok)33.336 717 Q
(en or Shift-8 vs Reduce-5 on the '/' tok)-.13 E(en.)-.13 E 2.935 -1.04
(We s)33.336 738 T .855(ee by the f)1.04 F .855
(act that the con\215icting reduce action is inside of square brack)-.13
F .854(ets that the)-.13 F 0 Cg EP
%%Page: 22 22
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 22)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF 3.859(parser has resolv)33.336 120 R 3.859
(ed the shift/reduce con\215ict in f)-.195 F -.26(avo)-.13 G 7.109(ro)
.26 G 7.109(fs)-7.109 G 3.859(hift, which is the def)-7.109 F(ault)-.13
E(beha)33.336 135 Q(vior)-.26 E 7.866(.T)-.715 G 1.366(his has only a 5\
0% chance of being correct, though, in terms of preserving)-7.866 F
(the semantics of the language.)33.336 150 Q(Therefore it behoo)6.5 E
-.195(ve)-.195 G 3.25(su).195 G 3.25(st)-3.25 G 3.25(or)-3.25 G(esolv)
-3.25 E 3.25(et)-.195 G(he con\215ict e)-3.25 E(xplicitly)-.195 E(.)
-.845 E .592(This con\215ict appeared earlier)33.336 171 R 3.842(,a)-.52
G 3.842(sw)-3.842 G 3.842(ew)-3.842 G .592
(ere considering LL\(1\) grammars, and we solv)-3.842 F .592(ed it)-.195
F .425(by re-writing the grammar to be unambiguous.)33.336 186 R(Ho)
6.925 E(we)-.325 E -.195(ve)-.325 G 1.465 -.52(r, y).195 H .425
(acc and bison ha).52 F .815 -.195(ve s)-.26 H .425(ome nice).195 F
3.204(con\215ict resolution mechanisms which are technically be)33.336
201 R 3.205(yond the scope of LALR\(1\))-.195 F 3.046(parsing b)33.336
216 R 3.046(ut come in handy)-.26 F 9.546(.\()-.845 G 3.046
(In the listing abo)-9.546 F -.195(ve)-.195 G 6.296(,t).195 G 3.046
(he square brack)-6.296 F 3.045(ets after the tw)-.13 F(o)-.13 E .012
(instances of rule 5 list the possible look-ahead tok)33.336 231 R .012
(ens for which a reduction by that rule in)-.13 F 7.65
(that state might be considered.)33.336 246 R 7.65
(This information is supplied only with the)14.15 F/F2 13/Courier@0 SF
(--report=look-ahead)33.336 261 Q F1(or)3.628 E F2(--report-all)3.628 E
F1 .378(options to bison.)3.628 F .379(Note that while there)6.879 F
1.329(are tw)33.336 276 R 4.579(oL)-.13 G 1.329
(R\(1\) items in state 14 that in)-4.579 F -.26(vo)-.52 G(lv).26 E 4.579
(er)-.195 G 1.329(ule #5, only the second one can lead to a)-4.579 F
3.25(reduction. A)33.336 291 R(reduction can only tak)3.25 E 3.25(ep)
-.13 G(lace when the "cursor" is at the end of the rule!\))-3.25 E .773
(In this case, we can assign precedence le)33.336 312 R -.195(ve)-.325 G
.774(ls and associati).195 F .774(vity to the operator tok)-.325 F 4.024
(ens. A)-.13 F(ne)33.336 327 Q 3.25(wy)-.325 G(acc/bison grammar is:)
-3.25 E/F3 10/Courier@0 SF(/* Grammar 7 */)33.336 339 Q(%token NUM)
33.336 351 Q(%right '=')33.336 363 Q(%left '+' '-')33.336 375 Q
(%left '*' '/')33.336 387 Q(%%)33.336 399 Q 12(expr: NUM)33.336 411 R 24
(|e)51.336 423 S(xpr '+' expr)-24 E 24(|e)51.336 435 S(xpr '-' expr)-24
E 24(|e)51.336 447 S(xpr '/' expr)-24 E 24(|e)51.336 459 S(xpr '*' expr)
-24 E 24(|')51.336 471 S(\(' expr '\)')-24 E 24(|I)51.336 483 S
(DENT '=' expr)-24 E(/* Added to illustrate right associativity */)98.4
E(;)51.336 495 Q F1 .46(Precedence resolv)33.336 516 R .46
(es the con\215ict a)-.195 F F2 8.26(XbYc)3.71 G F1 3.71(,w)-8.26 G .459
(here a,b and c are symbols, such as e)-3.71 F(xpr)-.195 E(,)-.52 E .663
(and X/Y are \(dif)33.336 531 R .663(fering\) operators.)-.325 F .663
(The symbol b is e)7.163 F .663(xperiencing a con\215ict.)-.195 F .663
(When it has)7.163 F .102(been shifted or appears at the top of the par\
ser symbol stack, does it pull to)33.336 546 R -.13(wa)-.325 G .101
(rds operator).13 F 1.034(X, meaning REDUCE, or does it pull to)33.336
561 R -.13(wa)-.325 G 1.034(rds Y).13 F 4.284(,m)-1.677 G 1.034
(eaning SHIFT?)-4.284 F 4.284(bs)7.534 G 1.034(hould pull in the)-4.284
F .253(direction of the higher precedence operator)33.336 576 R 6.753
(.S)-.715 G 3.503(oc)-6.753 G .253(onsider a * b + c.)-3.503 F 3.502(bs)
6.752 G .252(hould pull to)-3.502 F -.13(wa)-.325 G(rds).13 E
(the *, and a * b should reduce to e)33.336 591 Q(xpr)-.195 E(.)-.715 E
(Associati)33.336 612 Q .949(vity resolv)-.325 F .95
(es the con\215ict a)-.195 F F2 8.75(ZbZc)4.2 G F1 4.2(,w)-8.75 G .95
(here Z is the same operator appearing)-4.2 F .335
(on both sides of symbol b)33.336 627 R 6.834(.I)-.52 G 3.584(fZi)-6.834
G 3.584(sal)-3.584 G(eft-associati)-3.584 E .724 -.195(ve o)-.325 H
(perator).195 E 3.584(,t)-.52 G .334(hen b pulls to)-3.584 F -.13(wa)
-.325 G .334(rds the left).13 F .164(instance of Z \(REDUCE\).)33.336
642 R .165(If Z is right- associati)9.914 F -.195(ve)-.325 G 3.415(,bp)
.195 G .165(ulls to to)-3.415 F -.13(wa)-.325 G .165
(rds the right \(SHIFT\).).13 F .964(So in the e)33.336 657 R .964(xpre\
ssion a - b - c, b should be pulled to the left \(because subtraction i\
s left-)-.195 F(associati)33.336 672 Q -.195(ve)-.325 G 3.493(\)a).195 G
.243(nd a - b is reduced to e)-3.493 F .243(xpr \214rst.)-.195 F .244
(But in a = b = c, b pulls to the right and the)6.744 F
(assignment b = c is reduced to e)33.336 687 Q(xpr \214rst.)-.195 E(The)
33.336 708 Q F2(%left)5.304 E F1(and)5.304 E F2(%right)5.304 E F1 2.054
(declarations specify the associati)5.304 F 2.054
(vity and precedence of the)-.325 F(tok)33.336 723 Q 4.805(ens. T)-.13 F
(ok)-1.04 E 1.555(ens mentioned earlier ha)-.13 F 1.945 -.195(ve l)-.26
H -.325(ow).195 G 1.555(er precedence.).325 F 1.555(All tok)8.055 F
1.556(ens mentioned in the)-.13 F 1.521(same line ha)33.336 738 R 1.911
-.195(ve t)-.26 H 1.521(he same precedence and associati).195 F(vity)
-.325 E 4.771(,i)-.845 G 1.521(.e. it is impossible to ha)-4.771 F 1.911
-.195(ve l)-.26 H(eft-).195 E 0 Cg EP
%%Page: 23 23
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 23)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF(and right-associati)33.336 120 Q .39 -.195(ve t)
-.325 H(ok).195 E(ens in the same precedence le)-.13 E -.195(ve)-.325 G
(l.).195 E .312(It is also possible to specify)33.336 141 R/F2 13
/Courier@0 SF(%nonassoc)3.562 E F1 .312(for tok)3.562 F .312
(ens which do not ha)-.13 F .702 -.195(ve a)-.26 H .702 -.195(ny a).195
H(ssociati).195 E(vity)-.325 E(.)-.845 E 3.99(An)33.336 156 S
(on-associati)-3.99 E 1.13 -.195(ve o)-.325 H .74
(perator is one where e).195 F .739(xpr OP e)-.195 F .739(xpr OP e)-.195
F .739(xpr does not mak)-.195 F 3.989(es)-.13 G 3.989(ense. In)-3.989 F
2.047(the C language, there are no true e)33.336 171 R 5.297
(xamples. Ho)-.195 F(we)-.325 E -.195(ve)-.325 G 3.087 -.52(r, c).195 H
2.047(onsider a language where the).52 F(construct)33.336 186 Q F2
(a<b<c)6.112 E F1 2.862(is equi)6.112 F -.325(va)-.325 G 2.862
(lent to the C e).325 F(xpression)-.195 E F2 2.862(\(a<b\) && \(b<c\))
6.112 F F1 9.362(.I)C 6.112(ns)-9.362 G 2.862(uch a)-6.112 F 1.003
(language, it w)33.336 201 R 1.004
(ould be proper to declare < and > as non-associati)-.13 F 1.394 -.195
(ve o)-.325 H 1.004(perators, to pre).195 F -.195(ve)-.325 G(nt).195 E
(the abo)33.336 216 Q .39 -.195(ve ex)-.195 H
(pression from being parsed \(as it w).195 E(ould be in C\))-.13 E F2
(\(a<b\)<c)3.25 E F1(.)A .852(Not only do tok)33.336 237 R .852(ens ha)
-.13 F 1.242 -.195(ve p)-.26 H .852(recedence, b).195 F .852
(ut a rule inherits precedence from the)-.26 F/F3 13/Times-Bold@0 SF
(right-most)4.102 E(tok)33.336 252 Q(en)-.13 E F1 1.664(on its rhs.)
4.914 F 1.664(The precedence of a rule can also be established e)11.414
F 1.664(xplicitly with the)-.195 F F2(%prec)33.336 267 Q F1(tag.)3.25 E
2.77
(When there is a shift/reduce con\215ict, operator precedence/associati)
33.336 288 R 2.77(vity resolv)-.325 F 2.77(es it by)-.195 F 2.841
(considering the con\215icting rule\(s\) along with the look-ahead tok)
33.336 303 R 2.841(en, according to the)-.13 F(follo)33.336 318 Q
(wing algorithm:)-.325 E 3.25<8349>33.336 333 S 3.25(fp)-3.25 G
(rec\(tok)-3.25 E(en\) > prec\(rule\), then shift)-.13 E 3.25<8349>
33.336 348 S 3.25(fp)-3.25 G(rec\(tok)-3.25 E
(en\) < prec\(rule\), then reduce)-.13 E 3.25<8349>33.336 363 S 3.25(fp)
-3.25 G(rec\(tok)-3.25 E(en\)==prec\(rule\) and tok)-.13 E
(en is left-associati)-.13 E -.195(ve)-.325 G 3.25(,r).195 G(educe)-3.25
E 3.25<8349>33.336 378 S 3.25(fp)-3.25 G(rec\(tok)-3.25 E
(en\)==prec\(rule\) and tok)-.13 E(en is right-associati)-.13 E -.195
(ve)-.325 G 3.25(,s).195 G(hift)-3.25 E 3.25<8349>33.336 393 S 3.25(fp)
-3.25 G(rec\(tok)-3.25 E(en\)==prec\(rule\) and tok)-.13 E
(en is non-associati)-.13 E -.195(ve)-.325 G 3.25(,e).195 G(rror)-3.25 E
5.621<8349>33.336 408 S 5.62(fe)-5.621 G 2.37(ither the rule or the tok)
-5.62 F 2.37(en has no de\214ned precedence, shift \(and Bison issues a)
-.13 F(shift/reduce con\215ict w)33.336 423 Q(arning\))-.13 E(No)33.336
444 Q 2.655 -.845(w, l)-.325 H(et').845 E 4.215(sl)-.715 G .966
(ook at the pesk)-4.215 F 4.216(ys)-.195 G .966(tate ag)-4.216 F .966
(ain \(in Bison 2.3 or 2.4, it w)-.065 F .966(as necessary to specify)
-.13 F F2 2.235(-v --report=all)33.336 459 R F1 2.235
(to get this reporting, and with the disambiguating features, the)5.485
F(state numbers changed\):)33.336 474 Q/F4 10/Courier@0 SF(state 16)
33.336 486 Q 6(2e)57.336 510 S(xpr: expr . '+' expr)-6 E 30(3|)57.336
522 S(expr . '-' expr)-24 E 30(4|)57.336 534 S(expr . '/' expr)-24 E 30
(5|)57.336 546 S(expr . '*' expr)-24 E 30(5|)57.336 558 S
(expr '*' expr .)-24 E([$end, '+', '-', '*', '/', '\)'])12 E 6
($default reduce)57.336 582 R(using rule 5 \(expr\))6 E(Conflict betwee\
n rule 5 and token '+' resolved as reduce \('+' < '*'\).)57.336 606 Q(C\
onflict between rule 5 and token '-' resolved as reduce \('-' < '*'\).)
57.336 618 Q(Conflict between rule 5 and token '*' resolved as reduce \
\(%left '*'\).)57.336 630 Q(Conflict between rule 5 and token '/' resol\
ved as reduce \(%left '/'\).)57.336 642 Q F1 .184
(The input 2*3+4 is resolv)33.336 663 R .185
(ed as a reduce action, because the precedence of + is lo)-.195 F .185
(wer than)-.325 F 2.544
(the precedence of rule 5 \(which inherits the precedence of *\).)33.336
678 R(Lik)9.043 E -.325(ew)-.13 G 2.543(ise, 2*3*4 is a).325 F
(reduce because * is left-associati)33.336 693 Q -.195(ve)-.325 G(.).195
E F3(The Dangling ELSE)211.345 723 Q 0 Cg EP
%%Page: 24 24
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 24)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF 4.602(Ac)33.336 120 S 1.352(lassic problem in block\
-structured programming languages is the nesting of if-then-)-4.602 F
(else statements.)33.336 135 Q(Consider the grammar:)6.5 E/F2 10
/Courier@0 SF(/* Grammar 8 */)33.336 147 Q 12(stmt: expr)33.336 159 R 30
(|i)45.336 171 S(f_stmt)-30 E(;)45.336 183 Q 42(if_stmt: IF)33.336 207 R
('\(' expr '\)' stmt)6 E 72(|I)51.336 219 S 6(F')-72 G
(\(' expr '\)' stmt ELSE stmt)-6 E(;)51.336 231 Q 12(expr: NUM)33.336
255 R 109.2(;/)90.936 267 S 6(*t)-109.2 G
(he ; terminates the rule, it is not a token! */)-6 E F1 .117
(which is an abstraction of the C grammar)33.336 282 R 6.617(.I)-.715 G
3.367(fw)-6.617 G 3.367(ew)-3.367 G .117
(ere to run this grammar through Bison,)-3.367 F(it w)33.336 297 Q
(ould report 1 shift/reduce con\215ict.)-.13 E(The)6.5 E/F3 13/Courier@0
SF(.output)3.25 E F1(\214le sho)3.25 E(ws:)-.325 E F2(state 10)33.336
309 Q 6(3i)57.336 333 S(f_stmt: IF '\(' expr '\)' stmt .)-6 E
([$end, ELSE])12 E 48(4|)57.336 345 S
(IF '\(' expr '\)' stmt . ELSE stmt)-42 E 6(ELSE shift,)57.336 369 R
(and go to state 11)6 E 30(ELSE [reduce)57.336 393 R
(using rule 3 \(if_stmt\)])6 E 6($default reduce)57.336 405 R
(using rule 3 \(if_stmt\))6 E F1 .202(Consider the input)33.336 426 R F3
.202(if \(1\) if \(2\) 3 else 4)3.452 F F1 3.452(,a)C .202(nd the mo)
-3.452 F -.195(ve)-.195 G 3.453(sw).195 G .203(hich the parser will)
-3.453 F(mak)33.336 441 Q(e:)-.13 E/F4 8/Courier@0 SF 1.2(Symbol stack)
33.936 453 S 1.2(LA token)72 G 1.2(Action)48 G 78 1.2(IF SHIFT)225.936
465 T 174 1.2(IF \()33.936 477 T 1.2(SHIFT)90 G 1.2(IF \()33.936 489 S
54 1.2(NUM{1} SHIFT)168 H 1.2(IF \( NUM{1})33.936 501 S 91.2(\)R)126 G
1.2(EDUCE: expr:NUM)-90 G 1.2(IF \( expr)33.936 513 S 91.2(\)S)138 G 1.2
(HIFT)-90 G 1.2(IF \( expr \))33.936 525 S 78 1.2(IF SHIFT)126 H 1.2
(IF \( expr \) IF)33.936 537 S 91.2(\(S)108 G 1.2(HIFT)-90 G 1.2
(IF \( expr \) IF \()33.936 549 S 54 1.2(NUM{2} SHIFT)96 H 1.2
(IF \( expr \) IF \( NUM{2})33.936 561 S 91.2(\)R)54 G 1.2
(EDUCE: expr:NUM)-90 G 1.2(IF \( expr \) IF \( expr)33.936 573 S 91.2
(\)S)66 G 1.2(HIFT)-90 G 1.2(IF \( expr \) IF \( expr \))33.936 585 S 54
1.2(NUM{3} SHIFT)54 H 1.2(IF \( expr \) IF \( expr \) NUM{3})33.936 597
S 66 1.2(ELSE REDUCE:)12 H 1.2(expr:NUM)6 G 1.2
(IF \( expr \) IF \( expr \) expr)33.936 609 S 66 1.2(ELSE REDUCE:)24 H
1.2(stmt:expr)6 G 1.2(IF \( expr \) IF \( expr \) stmt)33.936 621 S 66
1.2(ELSE conflict)24 H F1 2.238 -1.04(We a)33.336 636 T .158(re no)1.04
F 3.408(wi)-.325 G 3.408(ns)-3.408 G .158(tate 10, and there are tw)
-3.408 F 3.407(op)-.13 G 3.407(ossibilities. W)-3.407 F 3.407(ec)-1.04 G
.157(ould be at the end of rule #3,)-3.407 F .928(in which case we shou\
ld reduce, or we could be in the middle of rule #4, in which case)33.336
651 R .266(we should shift.)33.336 666 R .265(The f)6.766 F .265
(act that the)-.13 F F3 .265(reduce using rule3)3.515 F F1 .265
(action is in brack)3.515 F .265(ets tells us)-.13 F 1.036
(that bison has applied the def)33.336 681 R 1.036
(ault shift/reduce con\215ict resolution in f)-.13 F -.26(avo)-.13 G
4.286(ro).26 G 4.286(fs)-4.286 G 4.286(hifting. In)-4.286 F .628
(this case, this is actually what we w)33.336 696 R 3.878
(ant. \(Colloquially)-.13 F 3.878(,w)-.845 G 3.878(es)-3.878 G .628
(ay that in the C language, an)-3.878 F .178
(else associates with the nearest if.\))33.336 711 R(Ho)6.678 E(we)-.325
E -.195(ve)-.325 G 1.218 -.52(r, i).195 H 3.428(tw).52 G .178
(ould be nice to say so e)-3.558 F .178(xplicitly and not)-.195 F(ha)
33.336 726 Q 1.04 -.195(ve t)-.26 H 3.899(od).195 G .649(eal with the w)
-3.899 F 3.899(arning. W)-.13 F 3.899(ec)-1.04 G .649
(ould re-write the grammar to remo)-3.899 F 1.039 -.195(ve t)-.195 H
.649(he ambiguity).195 F(,)-.845 E -.26(bu)33.336 741 S 6.894(td).26 G
3.644(oing so w)-6.894 F 3.644(ould be a)-.13 F(wkw)-.195 E 6.894
(ard. Ho)-.13 F(we)-.325 E -.195(ve)-.325 G 4.684 -.52(r, w).195 H 6.894
(ec).52 G 3.645(an apply the operator precedence)-6.894 F 0 Cg EP
%%Page: 25 25
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 25)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF(mechanism:)33.336 120 Q/F2 10/Courier@0 SF
(/* Grammar 9 */)33.336 132 Q(%left IF)33.336 144 Q(%left ELSE)33.336
156 Q(%token NUM)33.336 168 Q(%%)33.336 180 Q 12(stmt: expr)33.336 192 R
30(|i)45.336 204 S(f_stmt)-30 E(;)45.336 216 Q 42(if_stmt: IF)33.336 240
R('\(' expr '\)' stmt)6 E(%prec IF)120 E 72(|I)51.336 252 S 6(F')-72 G
(\(' expr '\)' stmt ELSE stmt)-6 E(%prec ELSE)69.6 E(;)51.336 264 Q 12
(expr: NUM;)33.336 288 R F1(No)33.336 309 Q 3.978(ww)-.325 G 3.978(eh)
-3.978 G -2.925 -.26(av e)-3.978 H .727
(listed IF and ELSE so that IF has lo)4.238 F .727(wer precedence.)-.325
F 2.807 -1.04(We n)7.227 H .727(eed the)1.04 F/F3 13/Courier@0 SF(%prec)
3.977 E(IF)33.336 324 Q F1 .684
(on the \214rst rule because otherwise the rule w)3.934 F .685
(ould inherit the precedence of the right-)-.13 F .424(most tok)33.336
339 R .424(en which is '\)', and that has no de\214ned precedence here.)
-.13 F(The)6.924 E F3 .423(%prec ELSE)3.673 F F1(on)3.673 E .215
(the second rule is redundant and purely stylistic.)33.336 354 R .216
(The use of operator precedence forces a)6.715 F
(shift on ELSE in rule 3, eliminating the w)33.336 369 Q(arning:)-.13 E
F2(state 10)33.336 381 Q 6(3i)57.336 405 S
(f_stmt: IF '\(' expr '\)' stmt .)-6 E([$end])12 E 48(4|)57.336 417 S
(IF '\(' expr '\)' stmt . ELSE stmt)-42 E 6(ELSE shift,)57.336 441 R
(and go to state 11)6 E 6($default reduce)57.336 465 R
(using rule 3 \(if_stmt\))6 E(Conflict between rule 3 and token ELSE re\
solved as shift \(IF < ELSE\).)57.336 489 Q/F4 13/Times-Bold@0 SF
(Mysterious Lookahead ambiguities)169.829 519 Q F1 .925(Sometimes yacc/\
bison can not generate a parser for a grammar because of limited look-)
33.336 555 R 6.15(ahead. W)33.336 570 R 6.15(eh)-1.04 G -2.925 -.26
(av e)-6.15 H 2.901
(seen an LR\(2\) grammar and clearly LALR\(1\) can not deal with it)
6.411 F 1.497(because it needs tw)33.336 585 R 4.747(ot)-.13 G(ok)-4.747
E 1.497(ens of lookahead.)-.13 F 1.497
(But consider this grammar \(from the Bison)7.997 F(manual\):)33.336 600
Q F2(/*Grammar 10*/)33.336 627 Q(%token ID)33.336 639 Q(%%)33.336 651 Q
27.6(def: param_spec)33.336 663 R(return_spec ',')6 E(;)90.936 675 Q
(param_spec:)33.336 699 Q(type)90.936 711 Q 6(|n)90.936 723 S
(ame_list ':' type)-6 E(;)90.936 735 Q 0 Cg EP
%%Page: 26 26
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 26)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
10/Courier@0 SF(name_list:)33.336 117 Q(name)90.936 129 Q 6(|n)90.936
141 S(ame_list ',' name)-6 E(;)90.936 153 Q(return_spec:)33.336 177 Q
(type)90.936 189 Q 6(|n)90.936 201 S(ame ':' type)-6 E(;)90.936 213 Q
21.6(type: ID;)33.336 237 R 21.6(name: ID;)33.336 261 R/F2 13
/Times-Roman@0 SF 1.517(The intent of this contri)33.336 282 R -.195(ve)
-.325 G 4.767(dg).195 G 1.517
(rammar is to parse function prototype declarations with a)-4.767 F
2.699(sort of inside-out and backw)33.336 297 R 2.699(ards syntax.)-.13
F(Thus)9.199 E/F3 13/Courier@0 SF 2.699(a,b,c:int foo:int,)5.949 F F2
2.698(declares a)5.948 F 2.471(function called foo taking inte)33.336
312 R 2.472(ger ar)-.195 F 2.472(guments a, b and c.)-.234 F(Lik)8.972 E
-.325(ew)-.13 G(ise).325 E F3 2.472(int int,)5.722 F F2 2.472(is an)
5.722 F .459(abstract declarator gi)33.336 327 R .459
(ving a type of a function \(of abstract name\) returning an inte)-.325
F .458(ger and)-.195 F(accepting a single inte)33.336 342 Q(ger ar)-.195
E(gument.)-.234 E .739(Consider the input)33.336 363 R F3 .739(ID ',')
3.989 F F2 7.239(.I)C 3.989(ts)-7.239 G .739
(hould be possible to parse this without ambiguity)-3.989 F 7.24(.I)
-.845 G 3.99(ti)-7.24 G(s)-3.99 E 3.512(not a problem that there are tw)
33.336 378 R 6.762(or)-.13 G 3.512(ules which ha)-6.762 F 3.902 -.195
(ve t)-.26 H 3.512(he e).195 F 3.512(xact same right-hand-side.)-.195 F
(Because)33.336 393 Q F3(param_spec)3.58 E F2 .33(can not deri)3.58 F
.72 -.195(ve t)-.325 H(o).195 E/F4 13/Symbol-Slanted SF(e)3.58 E F2 3.58
(,a)C .331(nd because)-3.58 F F3(return_spec)3.581 E F2 .331
(can not contain)3.581 F 7.249(ac)33.336 408 S 3.999(omma, then the tok)
-7.249 F 3.999(en sequence ID ',)-.13 F 7.249('o)-.91 G 3.999
(ccurring at the start of input must be)-7.249 F F3 1.345
(param_spec -> name_list -> name)33.336 423 R F2 7.845(.E)C -.195(ve)
-7.845 G 4.595(nt).195 G 1.345(hough this grammar is LR\(1\), in)-4.595
F(yacc or bison it produces a reduce/reduce con\215ict:)33.336 438 Q F1
(state 1)33.336 450 Q 6(8t)57.336 474 S(ype: ID .)-6 E([ID, ','])12 E 6
(9n)57.336 486 S(ame: ID .)-6 E([',', ':'])12 E 36(',' reduce)57.336 510
R(using rule 8 \(type\))6 E 36(',' [reduce)57.336 522 R
(using rule 9 \(name\)])6 E 36(':' reduce)57.336 534 R
(using rule 9 \(name\))6 E 6($default reduce)57.336 546 R
(using rule 8 \(type\))6 E F2 .952
(The problem is that LALR has combined tw)33.336 567 R 4.202(ok)-.13 G
.951(ernels into state 1, and thus can')-4.332 F 4.201(td)-.234 G(ecide)
-4.201 E .632(whether ID is a)33.336 582 R F3(type)3.882 E F2 .632(or a)
3.882 F F3(name)3.883 E F2 7.133(.I)C 3.883(ts)-7.133 G(houldn')-3.883 E
3.883(th)-.234 G -2.925 -.26(av e)-3.883 H .633(done that, b)4.143 F
.633(ut this is a de\214cienc)-.26 F 3.883(yo)-.195 G(f)-3.883 E .342
(the LALR algorithm.)33.336 597 R .341(This grammar is LR\(1\) b)6.842 F
.341(ut not LALR\(1\).)-.26 F .341(One w)6.841 F .341
(ay to \214x this is to)-.13 F(introduce an in)33.336 612 Q -.325(va)
-.52 G(lid production, no).325 E(w:)-.325 E F1(/* Grammar 11 */)33.336
624 Q(return_spec:)33.336 636 Q(type)90.936 648 Q 6(|n)90.936 660 S
(ame ':' type)-6 E 6(|I)90.936 672 S 6(DB)-6 G(OGUS)-6 E(;)90.936 684 Q
F2 .436(Where BOGUS is a dummy tok)33.336 699 R .436(en which will ne)
-.13 F -.195(ve)-.325 G 3.686(rb).195 G 3.686(er)-3.686 G .436
(eturned by the le)-3.686 F -.195(xe)-.195 G 5.116 -.715(r. T).195 H
.436(his forces).715 F 2.07(some of the states to be split and \214x)
33.336 714 R 2.07(es the ambiguity)-.195 F 8.569(.A)-.845 G 2.069
(nother approach might be to)-8.569 F .123
(\215atten the grammar and remo)33.336 729 R .513 -.195(ve t)-.195 H(he)
.195 E F3(type)3.373 E F2(and)3.373 E F3(name)3.373 E F2 .123
(rules, inlining their de\214nition where)3.373 F(the)33.336 744 Q 3.25
(ya)-.195 G(ppear in the)-3.25 E F3(param_spec)3.25 E F2(,)A F3
(return_spec)3.25 E F2(and)3.25 E F3(name_list)3.25 E F2(rules.)3.25 E 0
Cg EP
%%Page: 27 27
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 27)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF 2.226(One might ask what is the purpse of ha)33.336
120 R 2.226(ving tw)-.26 F 5.476(od)-.13 G(if)-5.476 E 2.226
(ferent symbols,)-.325 F/F2 13/Courier@0 SF(type)5.475 E F1(and)5.475 E
F2(name)5.475 E F1 .997(which are the same thing?)33.336 135 R -.195(Fo)
7.497 G 4.247(rp).195 G .997(urely parsing purposes, this is pointless.)
-4.247 F .998(But of course)7.498 F 2.208
(parsing is not the end goal of the compiler)33.336 150 R 8.707(.W)-.715
G 5.457(em)-9.747 G 2.207(ay w)-5.457 F 2.207(ant to tak)-.13 F 5.457
(ed)-.13 G(if)-5.457 E 2.207(ferent semantic)-.325 F(actions \(see belo)
33.336 165 Q(w\) depending on what symbol is recognized.)-.325 E/F3 13
/Times-Bold@0 SF(Other con\215ict pr)201.374 195 Q(oblems)-.234 E F1
.404(There are other cases where LALR\(1\) parsers get in to trouble.)
33.336 231 R(Thankfully)6.904 E 3.654(,i)-.845 G 3.654(nm)-3.654 G .404
(ost real-)-3.654 F -.13(wo)33.336 246 S 1.32(rld cases, the).13 F 4.57
(yc)-.195 G 1.32(an be \214x)-4.57 F 1.32(ed, which is wh)-.195 F 4.57
(yL)-.065 G 1.32(ALR\(1\) parsers continue to be the most)-4.57 F 1.736
(widely used.)33.336 261 R 1.737(If the con\215ict can not be resolv)
8.236 F 1.737(ed entirely within the parser)-.195 F 4.987(,i)-.52 G
4.987(tm)-4.987 G 1.737(ight be)-4.987 F 5.225(necessary to simplify th\
e grammar and try to \214x things in the semantic stage.)33.336 276 R
(Alternati)33.336 291 Q -.195(ve)-.325 G(ly).195 E 4.017(,i)-.845 G
4.017(tm)-4.017 G .767(ight be possible to pass information back do)
-4.017 F .767(wn to the le)-.325 F -.195(xe)-.195 G 4.017(rt).195 G
4.017(oc)-4.017 G .767(ause it)-4.017 F .992(to alter beha)33.336 306 R
.992(vior and return dif)-.26 F .992(ferent tok)-.325 F .992
(en codes to resolv)-.13 F 4.242(et)-.195 G .991(he problem.)-4.242 F
.991(The Y)7.491 F .991(acc and)-1.3 F
(Bison documentation, as well as the O'Reilly Book, gi)33.336 321 Q .39
-.195(ve ex)-.325 H(amples of this approach.).195 E F3(Semantic Actions)
219.132 351 Q F1 3.951 -1.04(We h)33.336 387 T -2.925 -.26(av e)1.04 H
1.871(seen that the yacc/bison state stack corresponds to the symbols \
\(terminals or)5.381 F 2.499(non-terminals\) in progress.)33.336 402 R
2.498(In addition to this state, yacc/bison maintains a semantic)8.999 F
-.325(va)33.336 417 S .478(lue stack in lock-step with the state stack.)
.325 F(Ev)6.978 E .478(ery symbol has a semantic v)-.195 F 3.729
(alue. V)-.325 F(alues)-1.443 E 2.438(of terminals are set by the le)
33.336 432 R -.195(xe)-.195 G 5.688(rt).195 G 2.437(hrough the v)-5.688
F(ariable)-.325 E F2(yylval)5.687 E F1 5.687(,w)C 2.437(hile v)-5.687 F
2.437(alues of non-)-.325 F .572
(terminals are computed by embedded actions.)33.336 447 R .572
(When a rule is reduced, the v)7.072 F .572(alue stack is)-.325 F .949
(accessible from within the embedded action by use of)33.336 462 R F2($)
4.199 E F1 4.199(macros. It)4.199 F .949(is easiest to gi)4.199 F 1.339
-.195(ve a)-.325 H(n).195 E -.195(ex)33.336 477 S(ample:).195 E 0 Cg EP
%%Page: 28 28
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 28)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
8/Courier@0 SF 1.2(/* Grammar expr.y */)33.936 117 S 1.2
(/* %debug generates code to print out debugging actions */)33.936 129 S
1.2(%debug)33.936 141 S 1.2(/* %error-verbose causes bison to generous \
meaningful syntax error messages */)33.936 153 S 1.2(%error-verbose)
33.936 165 S 1.2(%{)33.936 177 S 1.2(#define YYDEBUG 1)33.936 189 S 1.2
(/* enable debug code to compile */)42 G 1.2(%})33.936 201 S 1.2
(%token NUM)33.936 213 S 1.2(%token NL)33.936 225 S 1.2(%left '+' '-')
33.936 237 S 1.2(%left '*' '/')33.936 249 S 1.2(%nonassoc '\(')33.936
261 S 1.2(%%)33.936 273 S 36 1.2(exprlist: expr)33.936 285 T 1.2
({printf\("EXPR VALUE IS %d\\n",$1\);})72 G 7.2(|e)81.936 297 S 1.2
(xprlist NL expr)-6 G 1.2({printf\("EXPR VALUE IS)36 G 1.2
(%d\\n",$3\);})18 G(;)81.936 309 Q 12 1.2(expr: NUM)33.936 333 T 1.2
({$$=$1;})78 G 25.2(|e)51.936 345 S 1.2(xpr '+' expr)-24 G 1.2
({$$ = $1 + $3;})18 G 25.2(|e)51.936 357 S 1.2(xpr '-' expr)-24 G 1.2
({$$=$1 - $3;})18 G 25.2(|e)51.936 369 S 1.2(xpr '/' expr)-24 G 1.2
({if \($3 ==0\) fprintf\(stderr,)18 G 1.2
("/0 err\\n"\); else $$=$1 / $3;})177.936 381 S 25.2(|e)51.936 393 S 1.2
(xpr '*' expr)-24 G 1.2({$$=$1*$3;})18 G 25.2(|')51.936 405 S 1.2
(-' expr %prec '\(' {$$= -1 * $2; })-24 G 1.2
(/* The %prec above forces unary minus to have a precedence higher than)
33.936 417 S 1.2(multiplication or division.)81.936 429 S 1.2
(Technically, the expression)12 G 1.2
(-B/C should be parsed \(-B\)/C, not -\(B/C\) */)81.936 441 S 25.2(|')
51.936 453 S 1.2(\(' expr '\)')-24 G 1.2({$$=$2;})24 G(;)51.936 465 Q
1.2(%%)33.936 489 S 1.2(main\(\))33.936 501 S({)33.936 513 Q 30 1.2
(yydebug=1; /*)81.936 525 T 1.2
(turn on run-time debugging output from Bison */)6 G 1.2(yyparse\(\);)
81.936 537 S(})33.936 549 Q 1.2(yyerror\(char *err\))33.936 573 S({)
33.936 585 Q 1.2(fprintf\(stderr,"syntax error:%s\\n",err\);)81.936 597
S(})33.936 609 Q/F2 13/Times-Roman@0 SF(Consider the input)33.336 630 Q
/F3 13/Courier@0 SF(4+5)3.25 E F2 6.5(.T)C(he parser will mak)-6.5 E
3.25(et)-.13 G(he follo)-3.25 E(wing mo)-.325 E -.195(ve)-.195 G(s:).195
E F1 1.2(State/Symbol Stack)33.936 642 S 1.2(LA token)84 G 1.2
(Value stack)48 G 1.2(ACTION)30 G 168 1.2(NUM SHIFT)225.936 654 T 168
1.2(NUM +)33.936 666 T 91.2(4R)90 G 1.2(EDUCE)-90 G 162 1.2(expr +)
33.936 678 T 91.2(4S)90 G 1.2(HIFT)-90 G 1.2(expr +)33.936 690 S 72 1.2
(NUM 4)156 H 66 1.2(?? SHIFT)6 H 1.2(expr + NUM)33.936 702 S 66 1.2
($end 4)132 H 1.2(?? 5)6 G 1.2(REDUCE)60 G 1.2(expr + expr)33.936 714 S
66 1.2($end 4)126 H 1.2(?? 5)6 G 1.2(REDUCE)60 G 162 1.2(expr $end)
33.936 726 T 91.2(9A)72 G 1.2(CCEPT)-90 G F2 .468(When a tok)33.336 741
R .469(en is shifted, the v)-.13 F .469(alue of the global v)-.325 F
(ariable)-.325 E F3(yylval)3.719 E F2 3.719(,w)C .469
(hich has been set by)-3.719 F 0 Cg EP
%%Page: 29 29
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 29)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF .556(the le)33.336 120 R -.195(xe)-.195 G 1.596 -.52
(r, i).195 H 3.806(sp).52 G .556(ushed onto the v)-3.806 F .556
(alue stack.)-.325 F .556(\(In the e)7.056 F .556(xample abo)-.195 F
-.195(ve)-.195 G 3.806(,t).195 G(ok)-3.806 E .555(ens such as '+' ha)
-.13 F -.195(ve)-.26 G .873(no meaningful v)33.336 135 R 4.123
(alue. The)-.325 F(le)4.124 E -.195(xe)-.195 G 4.124(rw).195 G .874
(ould probably not assign to)-4.254 F/F2 13/Courier@0 SF(yylval)4.124 E
F1 .874(in this case, and)4.124 F 1.847(its v)33.336 150 R 1.847(alue w)
-.325 F 1.847(ould remain the same as the last tok)-.13 F 1.847
(en seen with an actual semantic v)-.13 F(alue.)-.325 E 3.066
(Since the v)33.336 165 R 3.066
(alue of '+' is of no consequence to us, we lea)-.325 F 3.457 -.195
(ve i)-.26 H 6.317(tu).195 G 6.317(nde\214ned. Be)-6.317 F -.13(wa)-.325
G(re:).13 E(referencing the wrong semantic v)33.336 180 Q
(alue is a common yacc/bison error\))-.325 E 1.391
(During a reduction, as man)33.336 201 R 4.641(yv)-.195 G 1.391
(alue stack entries are popped from the stack as there are)-4.966 F
1.039(symbols on the rhs of the corresponding rule.)33.336 216 R 1.039
(The code embedded in curly braces after)7.539 F 1.587(the rule is e)
33.336 231 R -.195(xe)-.195 G 4.837(cuted. This).195 F 1.587
(code is copied v)4.837 F 1.587(erbatim into the)-.195 F F2(yyparse)
4.837 E F1 1.587(function, e)4.837 F(xcept)-.195 E .796
(that occurrences of)33.336 246 R F2($1)4.046 E F1 .796
(are translated to an e)4.046 F .796
(xpression which accesses the \214rst \(leftmost\))-.195 F .091
(of the popped v)33.336 261 R .09(alues, i.e. it corresponds to the v)
-.325 F .09(alue of the \214rst rhs symbol.)-.325 F(Lik)6.59 E -.325(ew)
-.13 G(ise,).325 E F2($2)3.34 E F1
(corresponds to the second symbol, etc.)33.336 276 Q
(Or in general, $n is)6.5 E/F3 10/Courier@0 SF(value_stack_top[n-NRHS])
90.936 288 Q F1(where NRHS is the number of symbols on the right-hand-s\
ide of the rule.)33.336 303 Q F2($$)33.336 324 Q F1 .639
(represents a temporary v)3.889 F .64
(ariable which is used to hold the computed v)-.325 F .64
(alue which will)-.325 F 2.643(become the semantic v)33.336 339 R 2.643
(alue of the symbol on the lhs of the rule.)-.325 F 2.643
(After the rule has)9.143 F -.195(exe)33.336 354 S(cuted, this).195 E F2
($$)3.25 E F1 -.325(va)3.25 G(lue will be pushed onto the v).325 E
(alue stack.)-.325 E -1.3(Ya)33.336 375 S 6.601
(cc/Bison implicitly assign $$=$1 before an)1.3 F 9.851(ye)-.195 G 6.601
(xplicit embedded action code.)-10.046 F 2.548(Therefore, if there is n\
o embedded action, or the action does not contain an e)33.336 390 R
(xplicit)-.195 E 1.005(assignment to)33.336 405 R F2($$)4.255 E F1 4.256
(,t)C 1.006(hen the def)-4.256 F 1.006(ault action)-.13 F F2($$=$1)4.256
E F1(tak)4.256 E 1.006(es place, i.e. the v)-.13 F 1.006
(alue of the lhs is)-.325 F(the v)33.336 420 Q
(alue of the \214rst rhs symbol.)-.325 E/F4 13/Times-Bold@0 SF
(Synthesized and Inherited Attrib)164.727 450 Q(utes)-.26 E F1 1.06
(Another w)33.336 486 R 1.06(ay to vie)-.13 F 4.31(wt)-.325 G 1.06
(his process is to dra)-4.31 F 4.31(wt)-.195 G 1.06
(he parse tree, annotated with the semantic)-4.31 F -.325(va)33.336 501
S(lue associated with each node of the tree.).325 E 0 0 236 236 -125 125
149.336 647 PBEGIN
%%BeginDocument: valtree.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: valtree.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Mon Sep 29 02:07:12 2008
%%For: hak@lex ()
%%BoundingBox: 0 0 236 125
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 125 moveto 0 0 lineto 236 0 lineto 236 125 lineto closepath clip newpath
-229.5 315.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 50
% Arc
7.500 slw
gs  clippath
7500 4541 m 7472 4594 l 7607 4664 l 7515 4583 l 7635 4611 l cp
eoclip
n 7417.5 4882.5 318.4 43.1 -75.0 arcn
gs col0 s gr
 gr

% arrowhead
n 7635 4611 m 7515 4583 l 7607 4664 l  col0 s
% Arc
gs  clippath
4577 4541 m 4546 4593 l 4677 4669 l 4589 4583 l 4707 4617 l cp
eoclip
n 4450.0 4925.0 371.7 42.3 -70.3 arcn
gs col0 s gr
 gr

% arrowhead
n 4707 4617 m 4589 4583 l 4677 4669 l  col0 s
% Polyline
gs  clippath
5878 3467 m 5846 3416 l 5718 3499 l 5836 3459 l 5751 3549 l cp
eoclip
n 4575 4275 m
 5850 3450 l gs col0 s gr gr

% arrowhead
n 5751 3549 m 5836 3459 l 5718 3499 l  col0 s
% Polyline
gs  clippath
6005 3416 m 5970 3465 l 6094 3553 l 6014 3460 l 6129 3504 l cp
eoclip
n 7275 4350 m
 6000 3450 l gs col0 s gr gr

% arrowhead
n 6129 3504 m 6014 3460 l 6094 3553 l  col0 s
% Polyline
 [60] 0 sd
n 5325 3375 m
 4275 4125 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5550 3375 m
 5550 4125 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5625 3375 m
 6600 4125 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 4050 4425 m
 4050 4875 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 6900 4425 m
 6900 4875 l gs col0 s gr  [] 0 sd
/Times-Roman ff 200.00 scf sf
3825 5100 m
gs 1 -1 sc (NUM) col0 sh gr
/Times-Roman ff 200.00 scf sf
6600 5100 m
gs 1 -1 sc (NUM) col0 sh gr
/Times-Roman ff 200.00 scf sf
3825 4350 m
gs 1 -1 sc (expr) col0 sh gr
/Times-Roman ff 200.00 scf sf
6675 4350 m
gs 1 -1 sc (expr) col0 sh gr
/Times-Roman ff 200.00 scf sf
5325 3300 m
gs 1 -1 sc (expr) col0 sh gr
/Times-Roman ff 200.00 scf sf
5325 4350 m
gs 1 -1 sc (+) col0 sh gr
/Courier-Oblique ff 200.00 scf sf
4425 5250 m
gs 1 -1 sc (68) col0 sh gr
/Courier-Oblique ff 200.00 scf sf
7200 5175 m
gs 1 -1 sc (70) col0 sh gr
/Courier-Oblique ff 200.00 scf sf
5475 4425 m
gs 1 -1 sc (??) col0 sh gr
/Courier-Oblique ff 200.00 scf sf
4275 4575 m
gs 1 -1 sc (68) col0 sh gr
/Courier-Oblique ff 200.00 scf sf
7125 4575 m
gs 1 -1 sc (70) col0 sh gr
/Courier-Oblique ff 200.00 scf sf
5775 3375 m
gs 1 -1 sc (138) col0 sh gr
% here ends figure;
$F2psEnd
rs
showpage
%%EndDocument
end PEND .147(The arro)33.336 668 R .147(ws indicate data \215o)-.325 F
5.087 -.845(w. T)-.325 H .147(he lea).845 F -.195(ve)-.26 G 3.397(so)
.195 G 3.397(ft)-3.397 G .148(he parse tree are the terminals \(tok)
-3.397 F .148(ens\), and)-.13 F .028(their semantic v)33.336 683 R .028
(alues are established by the le)-.325 F -.195(xe)-.195 G 4.708 -.715
(r. N).195 H .027(ote that in the tree abo).715 F -.195(ve)-.195 G 3.277
(,t).195 G .027(he v)-3.277 F .027(alue of)-.325 F(an)33.336 698 Q 6.644
(yn)-.195 G 3.395(on-terminal node depends solely on the v)-6.644 F
3.395(alues of its children.)-.325 F 3.395(I.e. all of the)9.895 F
(data\215o)33.336 713 Q 3.95(wa)-.325 G(rro)-3.95 E .7(ws point "up.")
-.325 F .7(Such v)7.2 F .7(alues are called)-.325 F F4 .7
(Synthesized Attrib)3.95 F(utes)-.26 E F1 3.95(,a)C .699(nd when a)-3.95
F .549
(grammar with embedded actions relies solely on synthesized attrib)
33.336 728 R .549(utes, it is kno)-.26 F .549(wn as an)-.325 F F4
(S-Attrib)33.336 743 Q(uted Grammar)-.26 E F1(.)A 0 Cg EP
%%Page: 30 30
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 30)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF .883(Note also that since the LR parser al)33.336
120 R -.13(wa)-.13 G .882(ys mak).13 F .882(es a depth-\214rst tra)-.13
F -.195(ve)-.26 G .882(rsal of the parse tree,).195 F -.325(eva)33.336
135 S(luation of S-attrib).325 E(uted grammar comes naturally)-.26 E(.)
-.845 E(No)33.336 156 Q 4.576(wc)-.325 G 1.326(onsider this grammar and\
 semantic actions, intended to represent a simpli\214ed C-)-4.576 F
(style declaration syntax.)33.336 171 Q/F2 8/Courier@0 SF 1.2
(/* Grammar 13 */)33.936 183 S 1.2(%token INT)33.936 195 S 1.2
(%token DOUBLE)33.936 207 S 1.2(%token IDENT)33.936 219 S 1.2(%{)33.936
231 S 1.2(#define YYSTYPE char*)33.936 243 S 1.2(%})33.936 255 S 1.2(%%)
33.936 291 S 1.2(start: decl)33.936 303 S 1.2(|start decl)81.936 315 S
(;)81.936 327 Q 1.2(decl: type_name ident_list ';')33.936 351 S(;)81.936
363 Q 1.2(ident_list:)33.936 387 S 1.2(ident_list ',' IDENT)81.936 399 S
1.2({printf\("%s declared as %s\\n",$3,$0\);$$=NULL;})24 G 102 1.2
(|IDENT {printf\("%s)81.936 411 T 1.2
(declared as %s\\n",$1,$0\);$$=NULL;})6 G(;)81.936 423 Q 1.2(type_name:)
33.936 447 S 168 1.2(INT {$$="integer";})81.936 459 T 144 1.2
(|DOUBLE {$$="double";})81.936 471 T(;)81.936 483 Q 1.2(%%)33.936 495 S
F1(Consider an input of)33.336 516 Q/F3 13/Courier@0 SF(int a,b;)3.25 E
F1(and the mo)3.25 E -.195(ve)-.195 G 3.25(sw).195 G
(hich the parser mak)-3.25 E(es:)-.13 E F2 1.2(State/symbol stack)33.936
528 S 78 1.2(LA Value)84 H 24 1.2(stack ACTION)6 H 168 1.2(INT SHIFT)
225.936 540 T 168 1.2(INT IDENT)33.936 552 T 91.2(?R)66 G 1.2(EDUCE)-90
G 132 1.2(type_name IDENT)33.936 564 T 48 1.2(integer SHIFT)66 H 1.2
(type_name IDENT)33.936 576 S 91.2(,i)102 G 1.2(nteger a)-90 G 1.2
(REDUCE)42 G 1.2(\(prints "a declared as integer"\))81.936 588 S 1.2
(type_name ident_list)33.936 600 S 91.2(,i)72 G 1.2(nteger NULL)-90 G
1.2(SHIFT)24 G 1.2(type_name ident_list ,)33.936 612 S 60 1.2
(IDENT integer)60 H 1.2(NULL ?)6 G 1.2(SHIFT)12 G 1.2
(type_name ident_list , IDENT)33.936 624 S 91.2(;i)24 G 1.2
(nteger NULL ? b REDUCE)-90 G 1.2(\(prints "b declared as integer"\))
87.936 636 S 1.2(type_name ident_list)33.936 648 S 91.2(;i)72 G 1.2
(nteger NULL)-90 G 1.2(SHIFT)24 G F1 .234(The notation)33.336 669 R F3
($0)3.484 E F1 .234(refers to the semantic v)3.484 F .234
(alue just to the left of \(i.e. just belo)-.325 F 3.484(wi)-.325 G
3.484(nt)-3.484 G .234(he v)-3.484 F(alue)-.325 E .256(stack\) the v)
33.336 684 R .257(alue of the leftmost symbol on the rhs of the rule.)
-.325 F .257(Call the rule being reduced)6.757 F 3.57(C. The)33.336 699
R .319(symbol C associated with the rule \(the lhs\) must appear in som\
e other rule which)3.57 F .176(is higher in the parse tree.)33.336 714 R
.177(Call that rule P)6.677 F 6.677(.T)-1.443 G(hen)-6.677 E F3($0)3.427
E F1 .177(is the v)3.427 F .177(alue of the symbol just to the)-.325 F
.133(left of C in rule P)33.336 729 R 6.633(.I)-1.443 G .133
(.e. to locate)-6.633 F F3($0)3.383 E F1 3.383(,w)C 3.383(eg)-3.383 G
3.383(ou)-3.383 G 3.383(po)-3.383 G .133(ne le)-3.383 F -.195(ve)-.325 G
3.383(la).195 G .133(nd one step to the left.)-3.383 F .132(\(If we go)
6.632 F 2.032(up one le)33.336 744 R -.195(ve)-.325 G 5.282(la).195 G
2.032(nd there are no symbols to the left, we go upw)-5.282 F 2.032
(ards until there are...the)-.13 F 0 Cg EP
%%Page: 31 31
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 31)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF 4.518(reasoning behind this is apparent from e)
33.336 120 R 4.518(xamination of the semantic v)-.195 F 4.518
(alue stack\).)-.325 F(Lik)33.336 135 Q -.325(ew)-.13 G(ise,).325 E/F2
13/Courier@0 SF($-1)3.25 E F1 -.13(wo)3.25 G(uld refer to the symbol tw)
.13 E 3.25(op)-.13 G(laces to the left of C in rule P)-3.25 E(.)-1.443 E
(Ag)33.336 156 Q(ain, visualizing the attrib)-.065 E(uted parse tree:)
-.26 E 0 0 328 328 -183 183 103.336 360 PBEGIN
%%BeginDocument: valtree2.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: valtree2.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Mon Sep 29 02:12:37 2008
%%For: hak@lex ()
%%BoundingBox: 0 0 328 183
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 183 moveto 0 0 lineto 328 0 lineto 328 183 lineto closepath clip newpath
-243.0 306.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 50
% Arc
7.500 slw
gs  clippath
6295 4166 m 6275 4223 l 6419 4274 l 6316 4206 l 6439 4217 l cp
eoclip
n 6052.5 5101.5 934.9 -9.3 -74.6 arcn
gs col0 s gr
 gr

% arrowhead
n 6439 4217 m 6316 4206 l 6419 4274 l  col0 s
% Arc
gs  clippath
6904 3491 m 6870 3541 l 6995 3627 l 6914 3534 l 7029 3577 l cp
eoclip
n 9037.5 562.5 3653.1 84.7 125.8 arc
gs col0 s gr
 gr

% arrowhead
n 7029 3577 m 6914 3534 l 6995 3627 l  col0 s
% Polyline
 [60] 0 sd
n 5700 2175 m
 5700 2475 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5625 2775 m
 4725 3150 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5850 2775 m
 6300 3075 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 6075 2775 m
 7575 3225 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 4650 3450 m
 4650 3900 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 6450 3450 m
 6375 3900 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 6600 3450 m
 7425 3975 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 6825 3375 m
 8775 3825 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 6450 4200 m
 6450 4725 l gs col0 s gr  [] 0 sd
% Polyline
gs  clippath
5120 3648 m 5066 3675 l 5133 3810 l 5107 3690 l 5187 3783 l cp
eoclip
n 5325 4125 m
 5100 3675 l gs col0 s gr gr

% arrowhead
n 5187 3783 m 5107 3690 l 5133 3810 l  col0 s
% Polyline
gs  clippath
6321 3475 m 6307 3417 l 6160 3454 l 6284 3454 l 6174 3512 l cp
eoclip
n 5700 3600 m
 6300 3450 l gs col0 s gr gr

% arrowhead
n 6174 3512 m 6284 3454 l 6160 3454 l  col0 s
% Polyline
gs  clippath
6059 4229 m 6108 4194 l 6019 4071 l 6065 4187 l 5970 4106 l cp
eoclip
n 5700 3675 m
 6075 4200 l gs col0 s gr gr

% arrowhead
n 5970 4106 m 6065 4187 l 6019 4071 l  col0 s
/Times-Roman ff 200.00 scf sf
4050 3375 m
gs 1 -1 sc (type_name) col0 sh gr
/Times-Roman ff 200.00 scf sf
6150 3375 m
gs 1 -1 sc (ident_list) col0 sh gr
/Times-Roman ff 200.00 scf sf
7725 3375 m
gs 1 -1 sc (;) col0 sh gr
/Times-Roman ff 200.00 scf sf
5550 2175 m
gs 1 -1 sc (start) col0 sh gr
/Times-Roman ff 200.00 scf sf
5550 2700 m
gs 1 -1 sc (decl) col0 sh gr
/Times-Roman ff 200.00 scf sf
4425 4125 m
gs 1 -1 sc (INT) col0 sh gr
/Times-Roman ff 200.00 scf sf
6150 4125 m
gs 1 -1 sc (ident_list) col0 sh gr
/Times-Roman ff 200.00 scf sf
7425 4125 m
gs 1 -1 sc (,) col0 sh gr
/Times-Roman ff 200.00 scf sf
8700 4125 m
gs 1 -1 sc (IDENT) col0 sh gr
/Times-Roman ff 200.00 scf sf
6150 4950 m
gs 1 -1 sc (IDENT) col0 sh gr
/Courier-Oblique ff 200.00 scf sf
4725 4350 m
gs 1 -1 sc (integer) col0 sh gr
/Courier-Oblique ff 200.00 scf sf
6825 5100 m
gs 1 -1 sc (a) col0 sh gr
/Courier-Oblique ff 200.00 scf sf
9375 4200 m
gs 1 -1 sc (b) col0 sh gr
/Courier-Oblique ff 200.00 scf sf
4725 3600 m
gs 1 -1 sc (integer) col0 sh gr
% here ends figure;
$F2psEnd
rs
showpage
%%EndDocument
end PEND 2.502 -1.04(We s)33.336 381 T .422(ee that the data \215o)1.04
F 3.672(wa)-.325 G(rro)-3.672 E .422(ws point either up or do)-.325 F
3.672(wn. Those)-.325 F(attrib)3.672 E .422(utes which depend)-.26 F
3.421(on nodes which are not children are termed)33.336 396 R/F3 13
/Times-Bold@0 SF 3.421(Inherited Attrib)6.671 F(utes)-.26 E F1 9.921(.I)
C 6.671(fa)-9.921 G 6.671(na)-6.671 G(ttrib)-6.671 E(uted)-.26 E .056
(grammar contains only either synthesized attrib)33.336 411 R .057
(utes or attrib)-.26 F .057(utes inherited from abo)-.26 F .447 -.195
(ve a)-.195 H(nd).195 E(to the left, that is kno)33.336 426 Q(wn as an)
-.325 E F2(L-attributed grammar)3.25 E F1(.)A .932
(While we could concei)33.336 447 R 1.322 -.195(ve o)-.325 H 4.182(fo)
.195 G .932(ther w)-4.182 F .932(ays of attrib)-.13 F .931
(uting a parse tree in which the data\215o)-.26 F(w)-.325 E 1.112
(does not satisfy L-attrib)33.336 462 R 1.112(uted, such schemes w)-.26
F 1.113(ould be dif)-.13 F 1.113(\214cult to e)-.325 F -.325(va)-.325 G
1.113(luate practically \(or).325 F 2.476(impossible if the data\215o)
33.336 477 R 5.725(wg)-.325 G 2.475
(raph contained circular dependencies\), because we w)-5.725 F(ould)-.13
E(ha)33.336 492 Q .39 -.195(ve a)-.26 H(ttrib).195 E
(utes which depend on symbols which we ha)-.26 E .39 -.195(ve n)-.26 H
(ot yet seen.).195 E 1.58
(In yacc or bison, caution is suggested when using inherited attrib)
33.336 513 R 4.83(utes. This)-.26 F 1.58(is because)4.83 F(the)33.336
528 Q 6.336(yd)-.195 G 3.085
(epend on the position of the rule in another rule.)-6.336 F 3.085
(If the rule which is using)9.585 F 2.491(inherited attrib)33.336 543 R
2.491(utes can appear in multiple parent rules, the attrib)-.26 F 2.491
(ute in which we are)-.26 F .959(interested might be a dif)33.336 558 R
.959(ferent number of steps to the left, and then we can not write an)
-.325 F .863(action which will consistently reference it \(correctly\).)
33.336 573 R 2.943 -1.04(We m)7.363 H .863(ight also re)1.04 F .863
(write part of the)-.325 F .049(grammar and inadv)33.336 588 R .049
(ertently change the position of inherited attrib)-.195 F .048
(utes, leading to incorrect)-.26 F(results.)33.336 603 Q .945
(In the "declaration" e)33.336 624 R .945(xample abo)-.195 F -.195(ve)
-.195 G 4.195(,i).195 G 4.195(fw)-4.195 G 4.195(ew)-4.195 G .945
(anted to a)-4.325 F -.26(vo)-.26 G .945(id inherited attrib).26 F .945
(utes, we could)-.26 F 2.786
(instead process the entire declaration, storing the)33.336 639 R F2
(ident_list)6.036 E F1 2.786(using some internal)6.036 F .673
(format \(e.g. a link)33.336 654 R .674
(ed list\), and then taking a second pass at the end of the rule.)-.13 F
.674(Then the)7.174 F(type and the identi\214ers list w)33.336 669 Q
(ould both be accessible as synthesized attrib)-.13 E(utes.)-.26 E 1.493
(Note that in the actions for the tw)33.336 690 R(o)-.13 E F2
(ident_list)4.743 E F1 1.493(rules, we assigned)4.743 F F2($$=NULL)4.743
E F1 4.743(,e)C -.195(ve)-5.068 G(n).195 E 1.04(though the semantic v)
33.336 705 R 1.04(alue for)-.325 F F2(ident_list)4.29 E F1 1.04(is ne)
4.29 F -.195(ve)-.325 G 4.29(rr).195 G 1.04(eferenced else)-4.29 F 1.04
(where in the code.)-.325 F 1.618(This is a good defensi)33.336 720 R
2.008 -.195(ve c)-.325 H 1.617(oding practice.).195 F -1.3(Ya)8.117 G
1.617(cc/Bison implicitly do)1.3 F F2($$=$1)4.867 E F1 1.617(before an)
4.867 F(y)-.195 E -.195(ex)33.336 735 S 5.535(plicit embedded action.)
.195 F 5.535(Therefore, had we not made the e)12.035 F 5.536
(xplicit assignment,)-.195 F 0 Cg EP
%%Page: 32 32
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 32)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Courier@0 SF(ident_list)33.336 120 Q/F2 13/Times-Roman@0 SF -.13(wo)
3.572 G .321(uld recei).13 F .711 -.195(ve t)-.325 H .321(he semantic v)
.195 F .321(alue associated with either)-.325 F F1(ident_list)3.571 E F2
(or)3.571 E F1(IDENT)33.336 135 Q F2 .685(in those rules.)3.935 F .685
(This could lead to v)7.185 F .686(ery subtle and elusi)-.195 F 1.076
-.195(ve e)-.325 H 3.936(rrors. Say).195 F 3.936(,i)-.845 G 3.936(na)
-3.936 G(nother)-3.936 E 2.994(embedded action, we mistak)33.336 150 R
2.993(enly refer to the v)-.13 F 2.993(alue of)-.325 F F1(ident_list)
6.243 E F2 6.243(,w)C 2.993(hich has no)-6.243 F .24(meaningful v)33.336
165 R 3.49(alue. W)-.325 F .24(ithout our e)-.52 F .24
(xplicit NULL, we w)-.195 F .241(ould get a v)-.13 F .241
(alue which is probably a)-.325 F -.325(va)33.336 180 S 2.386
(lid pointer).325 F 5.635(,b)-.52 G 2.385(ut of course is the wrong v)
-5.895 F 2.385(alid pointer!)-.325 F 2.385(This pointer may in turn get)
8.885 F -.26(bu)33.336 195 S 1.882(ried and referenced in other data st\
ructures, creating a data corruption b).26 F 1.882(ug that will)-.26 F
(dri)33.336 210 Q 3.447 -.195(ve o)-.325 H 3.057(ne crazy!).195 F 3.057
(By setting it to NULL, we will access an in)9.557 F -.325(va)-.52 G
3.056(lid pointer and the).325 F .139(compiler will die.)33.336 225 R
.139(On the surf)6.639 F .139(ace this sounds w)-.13 F .139(orse, b)-.13
F .14(ut it is better to f)-.26 F .14(ail and let the end-)-.13 F .853
(user \(or in)33.336 240 R -.26(vo)-.52 G .853(king mak).26 F 4.103(ep)
-.13 G .853(rogram\) kno)-4.103 F 4.103(wi)-.325 G .853
(t, than to seemingly w)-4.103 F .853(ork b)-.13 F .853
(ut produce incorrect)-.26 F(output.)33.336 255 Q/F3 13/Times-Bold@0 SF
(Mid-rule actions)221.296 285 Q F2(It is possible in yacc or bison to e\
mbed an action in the middle of a rule:)33.336 321 Q/F4 10/Courier@0 SF
(rule: sym1 sym2)33.336 333 Q
({printf\("sym1=%d sym2=%d\\n",$1,$2\);$$=$1+$2;} sym4)90.936 345 Q
({printf\("midrule=%d\\\\n",$3\);})90.936 357 Q(;)90.936 369 Q F2 1.982
(Recall that in the LALR parser algorithm, the embedded actions are e)
33.336 390 R -.195(xe)-.195 G 1.982(cuted when a).195 F 2.68
(REDUCE is performed.)33.336 405 R -1.3(Ya)9.18 G 2.679
(cc/Bison therefore must introduce a dummy non-terminal)1.3 F .458
(symbol at the point of the mid-rule action.)33.336 420 R .459
(This dummy symbol must al)6.959 F -.13(wa)-.13 G .459(ys reduce, i.e.)
.13 F(it must be)33.336 435 Q/F5 13/Symbol-Slanted SF(e)3.25 E F2 6.5
(.S)C 3.25(ot)-6.5 G(he mid-rule action abo)-3.25 E .39 -.195(ve i)-.195
H 3.25(se).195 G(qui)-3.25 E -.325(va)-.325 G(lent to:).325 E F4
(rule: sym1 sym2 midrule sym4)33.336 447 Q(;)90.936 459 Q 3.6
(midrule: /*empty*/)33.336 483 R 12(;{)148.536 495 S
(printf\("sym1=%d sym2=%d\\n",$-1,$0\);$$=$-1+$0;})-12 E F2(The)33.336
510 Q F5(e)3.463 E F2 .213(production may cause what had been a perfect\
ly \214ne LALR\(1\) grammar to become)3.463 F 4.864(LR\(2\). Consider)
33.336 525 R(abo)4.864 E -.195(ve)-.195 G 4.864(,i).195 G 4.865(fa)
-4.864 G 1.615(fter ha)-4.865 F 1.615(ving seen)-.26 F F1 1.615
(sym1 sym2)4.865 F F2 4.865(,i)C 4.865(fi)-4.865 G 4.865(tc)-4.865 G
1.615(an not be determined)-4.865 F 4.107
(based on the one look-ahead tok)33.336 540 R 4.107
(en whether we are about to see)-.13 F F1(sym4)7.357 E F2 7.357(,t)C
4.107(hen the)-7.357 F 1.301
(introduction of the mid-rule action will break the grammar)33.336 555 R
7.802(.I)-.715 G 4.552(tc)-7.802 G 1.302(an be sho)-4.552 F 1.302
(wn that if the)-.325 F 3.214(grammar \(or the portion of it to which w\
e wish to apply the mid-rule action\) w)33.336 570 R(as)-.13 E 1.213
(formerly LL\(1\), then the addition of the)33.336 585 R F5(e)4.463 E F2
1.213(production will mak)4.463 F 4.463(ei)-.13 G 4.463(tL)-4.463 G
4.463(R\(1\). But)-4.463 F 1.213(if it w)4.463 F(as)-.13 E 2.206
(not LL\(1\) before, then it will not be LR\(1\) afterw)33.336 600 R
2.205(ards, and we can not introduce the)-.13 F(action.)33.336 615 Q
.748(As a programming con)33.336 636 R -.195(ve)-.52 G .748
(nience, the semantic v).195 F .748
(alues of the symbols to the left of a mid-)-.325 F .647
(rule action can be referenced using $1, $2, etc.)33.336 651 R -1.3(Ya)
7.146 G .646(cc/Bison will translate that to $-1, $0,)1.3 F .8
(etc., because it recognizes that this is a mid-rule action.)33.336 666
R(Ho)7.301 E(we)-.325 E -.195(ve)-.325 G 1.841 -.52(r, i).195 H 4.051
(ft).52 G .801(he mid-rule action)-4.051 F 2.015(is mo)33.336 681 R
-.195(ve)-.195 G 5.264(dt).195 G 5.264(oa)-5.264 G 5.264(ne)-5.264 G
(xplicit)-5.459 E F5(e)5.264 E F2 2.014
(dummy non-terminal, then those e)5.264 F 2.014(xact same v)-.195 F
2.014(alues must be)-.325 F .997(referenced using $0, $-1, etc.)33.336
696 R .997(In the e)7.497 F .998(xample abo)-.195 F -.195(ve)-.195 G(,)
.195 E F1(sym2)4.248 E F2 .998(is immediately to the left in)4.248 F .1
(the rule in which)33.336 711 R F1(midrule)3.35 E F2 .1
(appears, therefore it is $0.)3.35 F(Lik)6.6 E -.325(ew)-.13 G(ise).325
E F1(sym1)3.349 E F2 .099(is tw)3.349 F 3.349(os)-.13 G .099(ymbols to)
-3.349 F
(the left in the containing rule, so it is referenced using $-1.)33.336
726 Q 0 Cg EP
%%Page: 33 33
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 33)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF .568(The mid-rule action may set $$.)33.336 120 R
.568(This does not set the semantic v)7.068 F .568(alue of the o)-.325 F
-.195(ve)-.195 G .568(rall rule,).195 F -.26(bu)33.336 135 S 3.576(tj)
.26 G .326(ust the v)-3.576 F .326
(alue of the dummy symbol which represents the mid-rule action.)-.325 F
.325(This v)6.826 F(alue)-.325 E .995(can be referenced by the \214nal \
reduce action in the containing rule \(or by other mid-rule)33.336 150 R
.849(actions which appear later in that same rule\).)33.336 165 R .849
(In the e)7.349 F .848(xample abo)-.195 F -.195(ve)-.195 G 4.098(,t).195
G .848(he mid-rule action)-4.098 F .534(is the third symbol in)33.336
180 R/F2 13/Courier@0 SF(rule)3.784 E F1 3.784(,a)C .535
(nd the end-rule action references its v)-3.784 F .535(alue using $3.)
-.325 F .535(If the)7.035 F 1.887
(mid-rule action does not set $$, the resulting v)33.336 195 R 1.887
(alue is)-.325 F/F3 13/Times-Bold@0 SF(unde\214ned)5.137 E F1 5.137(,b)C
1.887(ecause the implicit)-5.137 F 2.868
($$=$1 assignment is referencing a non-e)33.336 210 R 2.868
(xistent symbol \(the empty production has 0)-.195 F(symbols\).)33.336
225 Q 1.515(The introduction of a mid-rule action into an e)33.336 246 R
1.514(xisting rule of course increments the $n)-.195 F 2.034
(nomenclature for the symbols to the right of it.)33.336 261 R 2.035
(Other actions in that rule need to be)8.535 F
(manually adjusted for the ne)33.336 276 Q 3.25(w$)-.325 G 3.25(nv)-3.25
G 3.25(alues. This)-3.575 F(is a frequent source of error)3.25 E(.)-.715
E -1.04(Ty)33.336 312 S .158(pically a mid-rule action is used in a com\
piler when it is desired to establish some kind)1.04 F 1.607
(of global state change before shifting the remaining part of a rule.)
33.336 327 R -.195(Fo)8.108 G 4.858(re).195 G 1.608(xample, upon)-5.053
F .733(seeing the opening brace which starts a ne)33.336 342 R 3.983(ws)
-.325 G .733(cope in the C language, one might w)-3.983 F .732(ant to)
-.13 F(adjust the symbol table to be in that scope.)33.336 357 Q/F4 10
/Courier@0 SF(compound_statement:)33.336 369 Q
('{' {enter_block\(\);} decl_or_stmt_list '}' {leave_block\(\);})90.936
381 Q F1 2.027(Another common source of error is f)33.336 396 R 2.027
(ailing to realize that when the mid-rule action is)-.13 F .968
(triggered, the \214rst tok)33.336 411 R .968(en of the ne)-.13 F .968
(xt symbol has already been processed by the le)-.195 F -.195(xe)-.195 G
5.648 -.715(r. I).195 H(n).715 E .615(the abo)33.336 426 R 1.005 -.195
(ve ex)-.195 H .616(ample, if it is important that the \214rst tok).195
F .616(en of a)-.13 F F2(decl_or_stmt_list)3.866 E F1(be)3.866 E 1.785
(processed in the ne)33.336 441 R 5.035(ws)-.325 G 1.785
(cope, the mid-rule action must be mo)-5.035 F -.195(ve)-.195 G 5.034
(dt).195 G 5.034(ob)-5.034 G 1.784(efore the opening)-5.034 F 1.39
(brace tok)33.336 456 R 4.64(en. Ho)-.13 F(we)-.325 E -.195(ve)-.325 G
2.43 -.52(r, d).195 H 1.39(epending on the rest of the grammar).52 F
4.64(,t)-.52 G 1.39(his may create a LALR)-4.64 F(con\215ict.)33.336 471
Q F3(Using the Y)159.436 501 Q(acc/Bison %union dir)-1.105 E(ecti)-.234
E -.13(ve)-.13 G F1 1.15(The type of the v)33.336 537 R 1.15
(alue stack of Y)-.325 F 1.149
(acc/Bison is represented by a typedef name)-1.3 F F2(YYSTYPE)4.399 E F1
(.)A .06(By def)33.336 552 R .061(ault, this is de\214ned to be)-.13 F
F2(int)3.311 E F1 6.561(.I)C 3.311(np)-6.561 G .061
(ractical compilers, this is rarely what is desired.)-3.311 F 3.861
(By using the)33.336 567 R F2 3.861(%union {)7.111 F F1(directi)7.111 E
4.251 -.195(ve i)-.325 H 7.111(nt).195 G 3.861
(he .y \214le, yacc/bison will include a union)-7.111 F 1.203
(declaration for)33.336 582 R F2(YYSYTPE)4.453 E F1 7.703(.E)C -.195(ve)
-7.703 G 1.203(rything which appears between the opening brace of the)
.195 F .131(%union and its closing brace is copied v)33.336 597 R .131
(erbatim \(comments too\) into the .tab)-.195 F .131(.h \214le, inside)
-.52 F(of a)33.336 612 Q F2(union)3.25 E F1(typedef declaration.)3.25 E
-1.04(Ty)33.336 633 S(pically)1.04 E 3.326(,i)-.845 G .076(nside the %u\
nion, one declares a union of all the possible data types to be held)
-3.326 F .491(on the stack.)33.336 648 R(Dif)6.991 E .491
(ferent grammar symbols ha)-.325 F .881 -.195(ve d)-.26 H(if).195 E .49
(ferent data types associated with them.)-.325 F 2.441(The v)33.336 663
R 2.441(alue stack is an array of unions.)-.325 F 2.441
(I.e. each slot of this array is of \214x)8.941 F 2.442(ed size in)-.195
F(memory)33.336 678 Q 3.25(,a)-.845 G(nd is lar)-3.25 E
(ge enough to hold the lar)-.234 E(gest data type.)-.234 E -1.3(Ya)
33.336 699 S .818(cc/Bison does not actually understand the C language.)
1.3 F .818(This point is often o)7.318 F -.195(ve)-.195 G(rlook).195 E
(ed)-.13 E .277(by no)33.336 714 R 3.527(vices. One)-.195 F .277
(can write an)3.527 F .277(ything inside of the %union directi)-.195 F
-.195(ve)-.325 G 6.777(.Y).195 G .277(acc/Bison can')-8.077 F 3.527(tt)
-.234 G(ell)-3.527 E 1.776(if it is v)33.336 729 R 1.776(alid C.)-.325 F
1.776(It also can')8.276 F 5.026(tp)-.234 G 1.775
(arse the union declaration and \214gure out what the v)-5.026 F(alid)
-.325 E .339(names are.)33.336 744 R .339(One must associate data types\
 with each terminal or non-terminal symbol, by)6.839 F 0 Cg EP
%%Page: 34 34
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF 138.492(ECE466:Compilers Unit)33.336 60 R
(2/pg 34)2.25 E(\2512019 Jef)142.155 E 2.25(fH)-.225 G(akner)-2.25 E/F1
13/Times-Roman@0 SF .205(using the)33.336 120 R/F2 13/Courier@0 SF 8.005
(<t)3.455 G .204(ype >)-8.005 F F1 3.454(notation. This)3.454 F .204
(is applied to tok)3.454 F .204(ens by attaching the type to a %left,)
-.13 F .918(%right, %nonassoc or %tok)33.336 135 R .918(en directi)-.13
F -.195(ve)-.325 G 7.418(.F).195 G .918
(or non-terminals, the %type directi)-7.613 F 1.309 -.195(ve i)-.325 H
4.169(su).195 G(sed.)-4.169 E(Each symbol must ha)33.336 150 Q .39 -.195
(ve o)-.26 H(nly one type de\214ned for it.).195 E .715
(When a semantic v)33.336 171 R .715
(alue is referenced and the grammar had a %union directi)-.325 F -.195
(ve)-.325 G 3.965(,a).195 G .715(ccess to)-3.965 F(that v)33.336 186 Q
(alue translates to C code \(in the .tab)-.325 E
(.c \214le\) similar to:)-.52 E/F3 10/Courier@0 SF
(value_stack_pointer[offset].type_name)90.936 198 Q F1 2.624(Because Y)
33.336 219 R 2.624(acc/Bison can')-1.3 F 5.874(tp)-.234 G 2.624
(arse the union declaration, it is up to the programmer to)-5.874 F .616
(correctly associate the Y)33.336 234 R .616
(acc/Bison type names with the corresponding \214eld de\214nitions in)
-1.3 F(the union.)33.336 249 Q
(Errors will not be detected until the .tab)6.5 E
(.c \214le is compiled.)-.52 E .174(When using a %union, e)33.336 270 R
-.195(ve)-.325 G .174(ry symbol in the grammar must ha).195 F .564 -.195
(ve a t)-.26 H .175(ype, e).195 F -.195(ve)-.325 G 3.425(ni).195 G 3.425
(fi)-3.425 G .175(ts v)-3.425 F .175(alue is)-.325 F(ne)33.336 285 Q
-.195(ve)-.325 G 6.16(re).195 G 2.91
(xplicitly set or referenced, because of the implicit)-6.355 F F2
($$=$1;)6.159 E F1 6.159(action. Mid-rule)6.159 F 2.794
(actions do not ha)33.336 300 R 3.184 -.195(ve a s)-.26 H 2.794
(ymbol name, so if the).195 F 6.044(yn)-.195 G 2.794(eed to set their o)
-6.044 F(wn)-.325 E F2($$)6.045 E F1 -.325(va)6.045 G 2.795(lue, the)
.325 F F2($<type_name>$)33.336 315 Q F1 3.89(notation must be used.)7.14
F(Similarly)10.389 E 7.139(,i)-.845 G 7.139(fam)-7.139 G 3.889
(id-rule action v)-7.139 F 3.889(alue is)-.325 F 1.038(referenced in an\
d end-of-rule action, say as the third symbol, then the notation needs \
to)33.336 330 R(be)33.336 345 Q F2($<type_name>3)3.25 E F1 6.5(.C)C
(onsult the Bison manual for more comprehensi)-6.5 E .39 -.195(ve i)
-.325 H(nformation.).195 E 0 Cg EP
%%Trailer
end
%%EOF
