
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<base href="/assets/ece302/">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>ECE302 -- Proj1</title><meta name="generator" content="MATLAB 9.9"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2021-04-13"><meta name="DC.source" content="hw1.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>ECE302 -- Proj1</h1><!--introduction--><p>Steven Lee &amp; Jonathan Lam; Prof. Keene; 1/29/21</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">See accompanying PDF.</a></li><li><a href="#3">1a</a></li><li><a href="#4">1b</a></li><li><a href="#5">1c</a></li><li><a href="#6">1d</a></li><li><a href="#7">2a</a></li><li><a href="#8">2b</a></li><li><a href="#9">2c</a></li><li><a href="#10">2d</a></li><li><a href="#11">2e</a></li><li><a href="#12">2f</a></li></ul></div><h2 id="1">See accompanying PDF.</h2><p><a href="http://files.lambdalambda.ninja/reports/20-21_spring/ece302_proj1.lam_lee.pdf">http://files.lambdalambda.ninja/reports/20-21_spring/ece302_proj1.lam_lee.pdf</a></p><pre class="codeinput">clc; clear;
N = 100000;			<span class="comment">% number of trials</span>
D = 3;				<span class="comment">% number of dice to take the sum of</span>
T = 3;				<span class="comment">% number of trials (in fun method)</span>
S = 6;				<span class="comment">% number of skills</span>
F = 6;				<span class="comment">% number of faces on the die</span>
</pre><h2 id="3">1a</h2><pre class="codeinput">q1a_exact = 1 / 6^D;

rolls = roll_dice([N D], F);	<span class="comment">% random simulation</span>
q1a_est = sum(sum(rolls, 2) == 18) / N;

print_res(<span class="string">'1a'</span>, q1a_exact, q1a_est);
</pre><h2 id="4">1b</h2><pre class="codeinput">q1b_exact = 1 - (1/216)^0*(215/216)^T;
rolls = roll_dice([N*T D], F);
three_roll_sums = reshape(sum(rolls, 2) == 18, N, T);
q1b_est = sum(sum(three_roll_sums, 2) &gt;= 1) / N;

print_res(<span class="string">'1b'</span>, q1b_exact, q1b_est);
</pre><pre class="codeoutput">Question 1b: Exact: 0.013825; Estimate: 0.013810; % Err: 0.106243%
</pre><h2 id="5">1c</h2><p>For both this question and the 1d: Both the exact (analytical) and simulated values are 0.000000 to 6 digits of precision; this is due to the probability being a small number raised to the sixth power. If we set S to a smaller value (e.g., S=1 or S=2), we see that the exact and simulated values match.</p><pre class="codeinput">q1c_exact = (q1b_exact)^S;
rolls = roll_dice([N*T*S D], F);
three_roll_sums = reshape(sum(rolls, 2) == 18, [], T);
ability_scores = reshape(sum(three_roll_sums, 2) &gt;= 1, [], S);
q1c_est = sum(sum(ability_scores, 2) == S) / N;

print_res(<span class="string">'1c'</span>, q1c_exact, q1c_est);
</pre><pre class="codeoutput">Question 1c: Exact: 0.000000; Estimate: 0.000000; % Err: 100.000000%
</pre><h2 id="6">1d</h2><p>P(all &lt;= 9) - P(all &lt;= 9 &amp;&amp; none == 9)</p><pre class="codeinput">q1d_exact = ((81/216)^T - ((81-25)/216)^T)^S;

rolls = roll_dice([N*T*S D], F);
three_roll_sums = reshape(sum(rolls, 2), [], T);
ability_scores = reshape(max(three_roll_sums, [], 2) == 9, [], S);
q1d_est = sum(sum(ability_scores, 2) == S) / N;

print_res(<span class="string">'1d'</span>, q1d_exact, q1d_est);
</pre><pre class="codeoutput">Question 1d: Exact: 0.000000; Estimate: 0.000000; % Err: 100.000000%
</pre><h2 id="7">2a</h2><pre class="codeinput">D_T = 1;			<span class="comment">% number of dice trolls use</span>
F_T = 4;			<span class="comment">% number of faces on troll die</span>
D_K = 2;			<span class="comment">% number of dice Keene uses</span>
F_K = 2;			<span class="comment">% number of faces on Keene die</span>

<span class="comment">% average hitpoints for trolls</span>
q2a_exact = (1*1 + 2*1 + 3*1 + 4*1) / 4;
rolls = roll_dice([N, D_T], F_T);
q2a_est = mean(sum(rolls, 2));
print_res(<span class="string">'2a: avg. troll hp'</span>, q2a_exact, q2a_est);

<span class="comment">% average damage from fireball</span>
q2a_exact = (2*1 + 3*2 + 4*1) / 4;
rolls = roll_dice([N, D_K], F_K);
q2a_est = mean(sum(rolls, 2));
print_res(<span class="string">'2a: avg. fb dmg'</span>, q2a_exact, q2a_est);

<span class="comment">% probability of dealing more than 3 damage with a fireball</span>
q2a_exact = 1/4;
rolls = roll_dice([N, D_K], F_K);
q2a_est = sum(sum(rolls, 2) &gt; 3) / N;
print_res(<span class="string">'2a: P(dmg &gt; 3)'</span>, q2a_exact, q2a_est);
</pre><pre class="codeoutput">Question 2a: avg. troll hp: Exact: 2.500000; Estimate: 2.496060; % Err: 0.157600%
Question 2a: avg. fb dmg: Exact: 3.000000; Estimate: 3.002010; % Err: 0.067000%
Question 2a: P(dmg &gt; 3): Exact: 0.250000; Estimate: 0.251620; % Err: 0.648000%
</pre><h2 id="8">2b</h2><pre class="codeinput">q2b_exact = ones(1, 4) / 4;
rolls = roll_dice([N D_T], F_T);
q2b_est = histcounts(sum(rolls, 2), <span class="string">'BinMethod'</span>, <span class="string">'integers'</span>) / N;
fprintf(<span class="string">'2b: Histogram of Troll HPs (hp={1,2,3,4})\n'</span>);
q2b_exact
q2b_est

q2b_exact = [0.25 0.5 0.25];
rolls = roll_dice([N D_K], F_K);
q2b_est = histcounts(sum(rolls, 2), <span class="string">'BinMethod'</span>, <span class="string">'integers'</span>) / N;
fprintf(<span class="string">'2b: Histogram of Firebolt Damage (dmg={2,3,4})\n'</span>);
q2b_exact
q2b_est
</pre><pre class="codeoutput">2b: Histogram of Troll HPs (hp={1,2,3,4})

q2b_exact =

    0.2500    0.2500    0.2500    0.2500


q2b_est =

    0.2516    0.2477    0.2506    0.2501

2b: Histogram of Firebolt Damage (dmg={2,3,4})

q2b_exact =

    0.2500    0.5000    0.2500


q2b_est =

    0.2514    0.4993    0.2493

</pre><h2 id="9">2c</h2><p>given the trolls, life, we willl evaluate whether or not the fireball can kill the trolls then we do that trial 6 times</p><pre class="codeinput"><span class="comment">%given troll health is 1 or 2, trolls always die, if health is</span>
<span class="comment">% 3 then 75% and if health is 4, then 25%</span>

q2c_exact = 0.25*(1/2)^6+0.5*(3/4)^6+0.25;
rolls_troll = reshape(roll_dice([N*6 D_T], F_T), [] ,6);
rolls_fire = sum(roll_dice([N D_K], F_K),2);

diff = rolls_troll - rolls_fire;
maximum = max(diff, [], 2);
q2c_est = 1- sum(maximum &gt; 0)/N;

print_res(<span class="string">'2c'</span>, q2c_exact, q2c_est);
</pre><pre class="codeoutput">Question 2c: Exact: 0.342896; Estimate: 0.340680; % Err: 0.646117%
</pre><h2 id="10">2d</h2><p>scenarios for 5 dying, one surviving: note that it is only possible that FB=2 or 3 and HP=3 or 4 define the following events: a := HP=4, FB=3, all other HP&lt;=3; P(a) = (1/4)(1/2)(3/4)^5 b := HP=4, FB=2, all other HP&lt;=2: P(b) = (1/4)(1/4)(1/2)^5 c := HP=3, FB=2, all other HP&lt;=2: P(c) = (1/4)(1/4)(1/2)^5 = P(b) P(d) := P(HP=4 ^ 5 dying, one surviving) = P(a) + P(b) P(e) := P(HP=3 ^ 5 dying, one surviving) = P(c) P(f) := P(5 dying, one surviving) = P(a ^ b ^ c) = P(a) + P(b) + P(c) E[HP | 5 dying, 1 surviving] = 4*P(d)/P(f) + 3*P(e)/P(f) (+ 2*0 + 1*0)</p><pre class="codeinput">Pa = 1/4 * 1/2 * (3/4)^5;
Pb = 1/4 * 1/4 * (1/2)^5;
Pc = Pb;
Pd = Pa + Pb;
Pe = Pc;
Pf = Pa + Pb + Pc;

q2d_exact = 4*Pd/Pf + 3*Pe/Pf;

rolls_T = roll_dice([N*6 D_T], F_T);
rolls_K = roll_dice([N D_K], F_K);

<span class="comment">% in simulation, need to select the cases where exactly 5 die</span>
troll_hp = reshape(sum(rolls_T, 2), [], 6);
fire_dmg = sum(rolls_K, 2);
matches = troll_hp - fire_dmg;
matches_where_1_troll_wins = sum(matches &gt; 0, 2) == 1;
matches = matches(matches_where_1_troll_wins, :);
troll_hp = troll_hp(matches_where_1_troll_wins, :);
q2d_est = mean(troll_hp(matches &gt; 0));

print_res(<span class="string">'2d'</span>, q2d_exact, q2d_est);
</pre><pre class="codeoutput">Question 2d: Exact: 3.941818; Estimate: 3.940868; % Err: 0.024094%
</pre><h2 id="11">2e</h2><pre class="codeinput">D_SoT = 2;			<span class="comment">% Sword of Tuition</span>
D_HTD = 1;			<span class="comment">% Hammer of Tenure Denial</span>
D_hit = 1;			<span class="comment">% to hit Keene with sword or hammer</span>
F_SoT = 6;
F_HTD = 4;
F_hit = 20;

q2e_exact = 1/2*(3.5+3.5) + 1/2*1/2*(2.5);
<span class="comment">% calculate extra dice rolls here for simplicity; however, due to</span>
<span class="comment">% independence it doesn't make affect the result</span>
rolls_hit = reshape(sum(roll_dice([N*2 D_hit], F_hit), 2), [], 2);
rolls_SoT = sum(roll_dice([N D_SoT], F_SoT), 2);
rolls_HTD = sum(roll_dice([N D_HTD], F_HTD), 2);

SoT_damage = rolls_SoT(rolls_hit(:, 1) &gt;= 11);
HTD_damage = rolls_HTD((rolls_hit(:, 1) &gt;= 11) &amp; (rolls_hit(:, 2) &gt;= 11));
q2e_est = (sum(SoT_damage) + sum(HTD_damage)) / N;

print_res(<span class="string">'2e'</span>, q2e_exact, q2e_est);
</pre><h2 id="12">2f</h2><p>when u play dnd with us :)</p><pre class="codeinput"><span class="comment">% helper function</span>
<span class="keyword">function</span> print_res(question, exact, est)
	pct_err = abs((est - exact) / exact * 100);
	fprintf(<span class="string">'Question %s: Exact: %f; Estimate: %f; %% Err: %f%%\n'</span>, <span class="keyword">...</span>
		question, exact, est, pct_err);
<span class="keyword">end</span>

<span class="comment">% usage: roll_dice([x y])</span>
<span class="keyword">function</span> res = roll_dice(shape, faces)
	res = randi(faces, shape);
<span class="keyword">end</span>
</pre><pre class="codeoutput">Question 1a: Exact: 0.004630; Estimate: 0.004790; % Err: 3.464000%
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2020b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% ECE302 REPLACE_WITH_DASH_DASH Proj1
% Steven Lee & Jonathan Lam;
% Prof. Keene;
% 1/29/21

%% See accompanying PDF.
% http://files.lambdalambda.ninja/reports/20-21_spring/ece302_proj1.lam_lee.pdf

%%
clc; clear;
N = 100000;			% number of trials
D = 3;				% number of dice to take the sum of
T = 3;				% number of trials (in fun method)
S = 6;				% number of skills
F = 6;				% number of faces on the die

%% 1a
q1a_exact = 1 / 6^D;

rolls = roll_dice([N D], F);	% random simulation
q1a_est = sum(sum(rolls, 2) == 18) / N;

print_res('1a', q1a_exact, q1a_est);

%% 1b
q1b_exact = 1 - (1/216)^0*(215/216)^T;
rolls = roll_dice([N*T D], F);
three_roll_sums = reshape(sum(rolls, 2) == 18, N, T);
q1b_est = sum(sum(three_roll_sums, 2) >= 1) / N;

print_res('1b', q1b_exact, q1b_est);

%% 1c
% For both this question and the 1d:
% Both the exact (analytical) and simulated values are 0.000000
% to 6 digits of precision; this is due to the probability being
% a small number raised to the sixth power. If we set S to a smaller
% value (e.g., S=1 or S=2), we see that the exact and simulated
% values match.
q1c_exact = (q1b_exact)^S;
rolls = roll_dice([N*T*S D], F);
three_roll_sums = reshape(sum(rolls, 2) == 18, [], T);
ability_scores = reshape(sum(three_roll_sums, 2) >= 1, [], S);
q1c_est = sum(sum(ability_scores, 2) == S) / N;

print_res('1c', q1c_exact, q1c_est);

%% 1d 
% P(all <= 9) - P(all <= 9 && none == 9)
q1d_exact = ((81/216)^T - ((81-25)/216)^T)^S;
 
rolls = roll_dice([N*T*S D], F);
three_roll_sums = reshape(sum(rolls, 2), [], T);
ability_scores = reshape(max(three_roll_sums, [], 2) == 9, [], S);
q1d_est = sum(sum(ability_scores, 2) == S) / N;

print_res('1d', q1d_exact, q1d_est);

%% 2a
D_T = 1;			% number of dice trolls use
F_T = 4;			% number of faces on troll die
D_K = 2;			% number of dice Keene uses
F_K = 2;			% number of faces on Keene die

% average hitpoints for trolls
q2a_exact = (1*1 + 2*1 + 3*1 + 4*1) / 4;
rolls = roll_dice([N, D_T], F_T);
q2a_est = mean(sum(rolls, 2));
print_res('2a: avg. troll hp', q2a_exact, q2a_est);

% average damage from fireball
q2a_exact = (2*1 + 3*2 + 4*1) / 4;
rolls = roll_dice([N, D_K], F_K);
q2a_est = mean(sum(rolls, 2));
print_res('2a: avg. fb dmg', q2a_exact, q2a_est);

% probability of dealing more than 3 damage with a fireball
q2a_exact = 1/4;
rolls = roll_dice([N, D_K], F_K);
q2a_est = sum(sum(rolls, 2) > 3) / N;
print_res('2a: P(dmg > 3)', q2a_exact, q2a_est);

%% 2b
q2b_exact = ones(1, 4) / 4;
rolls = roll_dice([N D_T], F_T);
q2b_est = histcounts(sum(rolls, 2), 'BinMethod', 'integers') / N;
fprintf('2b: Histogram of Troll HPs (hp={1,2,3,4})\n');
q2b_exact
q2b_est

q2b_exact = [0.25 0.5 0.25];
rolls = roll_dice([N D_K], F_K);
q2b_est = histcounts(sum(rolls, 2), 'BinMethod', 'integers') / N;
fprintf('2b: Histogram of Firebolt Damage (dmg={2,3,4})\n');
q2b_exact
q2b_est

%% 2c 
% given the trolls, life, we willl evaluate whether or not the
% fireball can kill the trolls then we do that trial 6 times
%given troll health is 1 or 2, trolls always die, if health is
% 3 then 75% and if health is 4, then 25%

q2c_exact = 0.25*(1/2)^6+0.5*(3/4)^6+0.25;
rolls_troll = reshape(roll_dice([N*6 D_T], F_T), [] ,6);
rolls_fire = sum(roll_dice([N D_K], F_K),2);

diff = rolls_troll - rolls_fire;
maximum = max(diff, [], 2);
q2c_est = 1- sum(maximum > 0)/N;

print_res('2c', q2c_exact, q2c_est);

%% 2d
% scenarios for 5 dying, one surviving:
% note that it is only possible that FB=2 or 3 and HP=3 or 4
% define the following events:
% a := HP=4, FB=3, all other HP<=3; P(a) = (1/4)(1/2)(3/4)^5
% b := HP=4, FB=2, all other HP<=2: P(b) = (1/4)(1/4)(1/2)^5
% c := HP=3, FB=2, all other HP<=2: P(c) = (1/4)(1/4)(1/2)^5 = P(b)
% P(d) := P(HP=4 ^ 5 dying, one surviving) = P(a) + P(b)
% P(e) := P(HP=3 ^ 5 dying, one surviving) = P(c)
% P(f) := P(5 dying, one surviving) = P(a ^ b ^ c) = P(a) + P(b) + P(c)
% E[HP | 5 dying, 1 surviving] = 4*P(d)/P(f) + 3*P(e)/P(f) (+ 2*0 + 1*0)
Pa = 1/4 * 1/2 * (3/4)^5;
Pb = 1/4 * 1/4 * (1/2)^5;
Pc = Pb;
Pd = Pa + Pb;
Pe = Pc;
Pf = Pa + Pb + Pc;

q2d_exact = 4*Pd/Pf + 3*Pe/Pf;

rolls_T = roll_dice([N*6 D_T], F_T);
rolls_K = roll_dice([N D_K], F_K);

% in simulation, need to select the cases where exactly 5 die
troll_hp = reshape(sum(rolls_T, 2), [], 6);
fire_dmg = sum(rolls_K, 2);
matches = troll_hp - fire_dmg;
matches_where_1_troll_wins = sum(matches > 0, 2) == 1;
matches = matches(matches_where_1_troll_wins, :);
troll_hp = troll_hp(matches_where_1_troll_wins, :);
q2d_est = mean(troll_hp(matches > 0));

print_res('2d', q2d_exact, q2d_est);

%% 2e
D_SoT = 2;			% Sword of Tuition
D_HTD = 1;			% Hammer of Tenure Denial
D_hit = 1;			% to hit Keene with sword or hammer
F_SoT = 6;
F_HTD = 4;
F_hit = 20;

q2e_exact = 1/2*(3.5+3.5) + 1/2*1/2*(2.5);
% calculate extra dice rolls here for simplicity; however, due to
% independence it doesn't make affect the result
rolls_hit = reshape(sum(roll_dice([N*2 D_hit], F_hit), 2), [], 2);
rolls_SoT = sum(roll_dice([N D_SoT], F_SoT), 2);
rolls_HTD = sum(roll_dice([N D_HTD], F_HTD), 2);

SoT_damage = rolls_SoT(rolls_hit(:, 1) >= 11);
HTD_damage = rolls_HTD((rolls_hit(:, 1) >= 11) & (rolls_hit(:, 2) >= 11));
q2e_est = (sum(SoT_damage) + sum(HTD_damage)) / N;

print_res('2e', q2e_exact, q2e_est);

%% 2f
% when u play dnd with us :)

% helper function
function print_res(question, exact, est)
	pct_err = abs((est - exact) / exact * 100);
	fprintf('Question %s: Exact: %f; Estimate: %f; %% Err: %f%%\n', ...
		question, exact, est, pct_err);
end

% usage: roll_dice([x y])
function res = roll_dice(shape, faces)
	res = randi(faces, shape);
end
##### SOURCE END #####
--></body></html>
